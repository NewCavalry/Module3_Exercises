(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9460,4924],{60937:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironment2",function(){return t(67731)}])},7243:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(35944),i=(t(67294),t(69346)),o=t(81255);function a(e){var n=e.gap,t=e.inset,a=e.children,l=e.className;return(0,r.tZ)(i.Z,{className:l,css:[{overflowX:"auto",overflowY:"hidden","::-webkit-scrollbar":[o.l0.display.none]}],children:(0,r.tZ)(i.Z,{css:[o.l0.px(t),o.l0.rowWithGap(n),{width:"fit-content"}],children:a})})}},42699:function(e,n,t){"use strict";t.d(n,{l:function(){return o},x:function(){return i}});var r=t(60977),i=function(e){(0,r.j)(r.U3.COURSE_ACTION,e)},o=function(e){(0,r.j)(r.U3.LESSON_ACTION,e)}},21767:function(e,n,t){"use strict";t.d(n,{Y:function(){return o}});var r=t(7297);function i(){var e=(0,r.Z)(["\n  fragment ReplLinkRepl on Repl {\n    id\n    url\n    nextPagePathname\n  }\n"]);return i=function(){return e},e}var o=(0,t(31230).Ps)(i())},64181:function(e,n,t){"use strict";t.d(n,{SM:function(){return p},sL:function(){return d},yO:function(){return f}});var r,i=t(10253),o=t(16998),a=t(60977),l=t(91131),c=t(28592),s=t(67294),u=t(97808),d="user-preferred-locale",p=(0,l.cn)(void 0),f=(0,l.cn)((function(e){return e(r)}),(function(e,n,t){var i=e(r),l=e(p);n(r,t),i.locale!==t.locale&&(l&&t.locale!==u.ZW?(o.Z.set(d,t.locale),(0,a.j)(a.U3.LANGUAGE_CHANGED,{from:i.locale,to:t.locale}),n(p,u.ZW)):t.locale===u.ZW&&(o.Z.remove(d),n(p,i.locale)))}));n.ZP=function(e){var n=e.courseSlug,t=e.countryCode,a=e.defaultLocale;if(!r){var h=o.Z.get(d);h&&!a&&(a=h),r=(0,l.cn)((0,u.QW)(n,a))}var v=(0,i.Z)((0,l.KO)(f),2),m=v[0],g=v[1],Z=(0,i.Z)((0,l.KO)(p),2)[1],y=(0,c.useLDClient)(),b=null===y||void 0===y?void 0:y.variation("flag-100-days-localized-version-if-available",!1);return(0,s.useMemo)((function(){if(!b||a!==u.ZW)return m;var e=o.Z.get(d);if(e){var r=(0,u.QW)(n,e);return g(r),Z(u.ZW),r}var i=(0,u.gO)(t,navigator.languages),l=i.locale,c=i.optionalSwitch,s=(0,u.QW)(n,l);return g(s),Z(c),s}),[b,a,t,n,g,Z,m])}},54854:function(e,n,t){"use strict";function r(e,n){if(!e)return null;var t=e[n];return t?Array.isArray(t)?null:t:null}t.d(n,{Z:function(){return r}})},52008:function(e,n,t){"use strict";t.d(n,{JM:function(){return p},SL:function(){return u}});var r=t(26042),i=t(7297),o=t(31230),a=t(37887);function l(){var e=(0,i.Z)(['\n  fragment ReplEnvironment2CurrentUserLayoutFlags on CurrentUser {\n    id\n    flagGhostrunner: gate(feature: "flag-ghostrunner")\n    flagLayoutNavigator: gate(feature: "flag-layout-navigator")\n  }\n']);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query ReplEnvironment2LayoutFlags {\n    currentUser {\n      id\n      ...ReplEnvironment2CurrentUserLayoutFlags\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var s={},u=(0,o.Ps)(l()),d=(0,o.Ps)(c(),u);function p(e){var n=(0,r.Z)({},s,e);return a.a(d,n)}},79611:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(67294),i=t(11163);function o(e,n){var t=(0,i.useRouter)();(0,r.useEffect)((function(){}),[e,t]),(0,r.useEffect)((function(){if("SubscriptionExpiredError"===(null===e||void 0===e?void 0:e.__typename)){var r=e.replId,i=e.isOwner,o=n.split("/")[1].slice(1);t.replace({pathname:"/expiredPrivateRepl",query:{isOwner:i,ownerUsername:o,replId:r}},t.asPath)}}),[e,t,n])}},5804:function(e,n,t){"use strict";t.d(n,{JL:function(){return x},L8:function(){return Z},M6:function(){return g},QH:function(){return y},nr:function(){return m}});var r=t(14924),i=t(26042),o=t(29815),a=t(35944),l=t(67294),c=t(69346),s=t(81255),u=t(1144),d=t(46197),p=t(44365),f=t(72917),h=t(7243),v=t(68480);function m(e,n){var t,r=(null===(t=n.tags)||void 0===t?void 0:t.length)?n.tags.join(","):null;return{href:{pathname:"/postsFeed",query:{boardSlug:r,q:e}},as:{pathname:r?"/community/".concat(r):"/community/all",query:{q:e}}}}function g(e,n){return n?{href:{pathname:"/postsFeed",query:{boardSlug:e,order:n.order}},as:{pathname:"/community/".concat(e),query:(0,i.Z)({},n.order!==p.eR?{order:n.order.toLowerCase()}:{})}}:{href:{pathname:"/postsFeed",query:{boardSlug:e}},as:"/community/".concat(e)}}function Z(e){return g("all",e)}function y(e,n){var t=n.tags?n.tags.join(","):"all";return{href:{pathname:"/postsFeed",query:{boardSlug:t,order:(0,p.Zb)(e)}},as:{pathname:"/community/".concat(t),query:(0,i.Z)({},e!==p.eR?{order:(0,p.Zb)(e)}:{})}}}var b=c.K.div,w=v.Mz+32;function x(e){var n,t,i=e.tagGroups,p=e.params,m=(0,o.Z)(i.official).concat((0,o.Z)(i.community)).map((function(e){var n,t=Boolean(null===(n=p.tags)||void 0===n?void 0:n.includes(e.id)),r=t?Z(p):g(e.id,p);return(0,a.tZ)(f.t,{tag:e,link:r,isActive:t},e.id)})),y=(0,l.useState)(!1),x=y[0],k=y[1],C=(0,l.useRef)(null);return(0,l.useEffect)((function(){if(C.current){var e=new window.IntersectionObserver((function(e){e.forEach((function(e){window.scrollY<e.boundingClientRect.top-w?k(!1):k(!e.isIntersecting)}))}),{root:null,rootMargin:"".concat(-w,"px 0px 0px 0px"),threshold:1}),n=C.current;return e.observe(n),function(){e.unobserve(n),e.disconnect()}}}),[]),(0,a.BX)(c.Z,{children:[(0,a.tZ)(b,{ref:C}),(0,a.BX)(c.Z,{css:[s.l0.colWithGap(16),x&&(0,r.Z)({},d.A.desktop,[s.l0.position.fixed,s.l0.overflowY("auto"),s.l0.height("calc(100vh - ".concat(v.Mz,"px)")),s.l0.py(32),{top:v.Mz}])],children:[(0,a.tZ)(u.x,{color:"dimmer",children:"TOP TAGS"}),(0,a.BX)(c.Z,{children:[(0,a.tZ)(h.Z,{gap:8,inset:16,css:[(n={},(0,r.Z)(n,d.A.desktop,[s.l0.display.none]),(0,r.Z)(n,"marginLeft","calc(-1 * ".concat(s.TV.space16,")")),(0,r.Z)(n,"marginRight","calc(-1 * ".concat(s.TV.space16,")")),n)],children:m}),(0,a.tZ)(c.Z,{css:(t={},(0,r.Z)(t,d.A.mobile,[s.l0.display.none]),(0,r.Z)(t,d.A.desktop,[s.l0.colWithGap(32)]),t),children:(0,a.tZ)(c.Z,{css:[s.l0.colWithGap(8),s.l0.align.start],children:m})})]})]})]})}},4924:function(e,n,t){"use strict";t.d(n,{Vs:function(){return b},ZP:function(){return x},p0:function(){return w}});var r=t(26042),i=t(69396),o=t(35944),a=(t(67294),t(41664)),l=t.n(a),c=t(70917),s=t(15085),u=t(53427),d=t(69928),p=t(5804),f=t(72917),h=t(88046),v=t(82447),m=t(45273),g=t(94718),Z=s.KD.a,y=(0,c.iv)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function b(e){var n=e.tags,t=e.maxVisible,r=void 0===t?3:t,i=e.onTagClick,a=n.slice(0,r),l=n.length-a.length;return(0,o.BX)(s.G7,{css:[s.l0.rowWithGap(4),s.l0.align.center],children:[a.map((function(e){return(0,o.tZ)(f.t,{small:!0,tag:e,link:(0,p.M6)(e.id),onClick:i},e.id)})),l>0?(0,o.BX)(s.xv,{variant:"small",color:"dimmest",children:["+",l]}):null]})}function w(e){var n=e.repl,t=e.showOwner,a=e.maxVisibleTags,c=e.onReplClick,p=e.onUserClick,f=e.onTagClick,w=n.owner;return(0,o.BX)(s.G7,{css:[s.l0.colWithGap(16)],children:[(0,o.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.align.start,s.l0.flex.growAndShrink(1)],children:[(0,o.tZ)(u.ZP,{size:84,iconUrl:n.iconUrl,alt:n.title}),(0,o.BX)(s.G7,{css:[s.l0.flex.growAndShrink(1),s.l0.colWithGap(4)],children:[(0,o.tZ)(l(),(0,i.Z)((0,r.Z)({passHref:!0},(0,h.j3)(n)),{children:(0,o.tZ)(Z,{css:[{color:"inherit"},y],onClick:c,children:(0,o.tZ)(s.xv,{variant:"subheadBig",children:n.title})})})),t&&w?(0,o.tZ)(s.G7,{css:[{maxWidth:"fit-content",zIndex:1}],children:(0,o.tZ)(g.Z,{username:w.username,children:(0,o.tZ)(v.ZP,{user:w,children:(0,o.BX)(Z,{css:[{color:"inherit"},s.l0.rowWithGap(4),s.l0.align.center,s.l0.pr(16)],onClick:p,children:[(0,o.tZ)(m.Z,{src:w.image,username:w.username,size:16,layout:"intrinsic"}),(0,o.tZ)(s.xv,{children:w.username})]})})})}):null,n.description?(0,o.tZ)(s.xv,{color:"dimmer",maxLines:2,css:[s.l0.maxWidth(450)],children:n.description}):null]})]}),(0,o.BX)(s.G7,{css:[s.l0.rowWithGap(8),s.l0.justify.spaceBetween,s.l0.flex.wrap],children:[(0,o.tZ)(d.Z,{css:[s.l0.pb(2)],repl:n}),a?(0,o.tZ)(s.G7,{css:[s.l0.position.relative,s.l0.pt(2),{zIndex:1}],children:(0,o.tZ)(b,{tags:n.tags,maxVisible:a,onTagClick:f})}):null]})]})}function x(e){var n=e.repl,t=e.showOwner,r=e.maxVisibleTags,i=e.onReplClick,a=e.onUserClick,l=e.onTagClick,c=e.dataCy;return(0,o.tZ)(s.Tg,{elevated:!0,css:[s.l0.borderRadius(8),s.l0.p(8),s.l0.position.relative,s.gU.filledAndOutlined,s.l0.backgroundColor.backgroundDefault,{border:"1px solid "+s.TV.outlineDimmest}],dataCy:c,children:(0,o.tZ)(w,{repl:n,showOwner:t,maxVisibleTags:r,onReplClick:i,onUserClick:a,onTagClick:l})})}},69928:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var r=t(35944),i=(t(67294),t(69346)),o=t(81255),a=t(12530),l=t(51995),c=t(75026),s=t(27843),u=t(34847);function d(e){var n=e.repl;return(0,r.BX)(i.Z,{css:[o.l0.rowWithGap(16),o.l0.align.center],children:[(0,r.tZ)(a.Z,{small:!0,count:n.runCount,tooltip:(0,u.Z)("runs",n.runCount),children:(0,r.tZ)(l.Z,{})}),(0,r.tZ)(a.Z,{small:!0,count:n.commentCount,tooltip:(0,u.Z)("comment",n.commentCount),children:(0,r.tZ)(c.Z,{})}),(0,r.tZ)(a.Z,{small:!0,count:n.likeCount,tooltip:(0,u.Z)("like",n.likeCount),children:(0,r.tZ)(s.Z,{})})]})}},72917:function(e,n,t){"use strict";t.d(n,{g:function(){return x},t:function(){return b}});var r=t(26042),i=t(69396),o=t(35944),a=(t(67294),t(70917)),l=t(41664),c=t.n(l),s=t(69346),u=t(93160),d=t(81255),p=t(1144),f=t(44044),h=t(67629),v=t(16857),m=(0,a.iv)({border:"1px solid "+d.TV.accentPrimaryDefault,backgroundColor:"transparent"}),g=function(e){var n=e.isActive,t=e.small;return(0,a.iv)([d.l0.p(t?4:8),d.l0.align.center,d.l0.rowWithGap(4),d.l0.fontSize(12),n?m:f.gU.outlined,d.l0.borderRadius(16),{color:"inherit","&:hover":m}])};function Z(e){var n=e.tag,t=e.isActive,r=e.isRemovable,i=e.small,a=i?"small":"text";return(0,o.tZ)(u.Z,{elevated:t,css:[d.l0.borderRadius(16)],children:(0,o.BX)(u.Z,{elevated:t,css:[g({isActive:t,small:i})],children:[(0,o.BX)(s.Z,{css:[d.l0.flex.row,d.l0.align.center,d.l0.flex.shrink(1)],children:[(0,o.tZ)(p.x,{variant:a,color:"dimmest",children:"#"}),(0,o.tZ)(p.x,{color:"dimmer",variant:a,css:[d.l0.flex.shrink(1)],children:n.id})]}),n.isOfficial&&!i?(0,o.tZ)(v.Z,{}):null,r?(0,o.tZ)(h.Z,{size:i?12:16}):null]})})}var y=s.K.a;function b(e){var n=e.tag,t=e.link,a=e.isActive,l=e.small,s=e.onClick;return(0,o.tZ)(c(),(0,i.Z)((0,r.Z)({},t),{passHref:!0,css:[d.l0.flex.shrink(1),{backgroundColor:"red"}],children:(0,o.tZ)(y,{css:[{color:"inherit"},d.l0.flex.shrink(1)],onClick:s,children:(0,o.tZ)(Z,{tag:n,isActive:a,small:l,isRemovable:a})})}))}var w=s.K.button;function x(e){var n=e.tag,t=e.onClick,r=e.isActive,i=e.small;return(0,o.tZ)(w,{css:[d.l0.reset.button],onClick:t,children:(0,o.tZ)(Z,{tag:n,isActive:r,small:i,isRemovable:!0})})}},46197:function(e,n,t){"use strict";t.d(n,{A:function(){return i}});var r=t(57263),i={mobile:"@media (max-width: ".concat(r.j.tabletMin,"px)"),desktop:"@media (min-width: ".concat(r.j.tabletMin+1,"px)")}},44365:function(e,n,t){"use strict";t.d(n,{Qf:function(){return c},Zb:function(){return l},eR:function(){return o}});var r=t(90317),i=t(54854),o=r.vX.Hot,a={hot:r.vX.Hot,new:r.vX.New,top:r.vX.Top,votes:r.vX.Top};function l(e){return e.toLowerCase()}function c(e){var n=(0,i.Z)(e,"after")||void 0,t=(0,i.Z)(e,"q")||void 0,r=(0,i.Z)(e,"boardSlug")||void 0,c=r&&"all"!==r?r.split(","):void 0,s=(0,i.Z)(e,"order")||l(o),u=a[s]||o,d=(0,i.Z)(e,"count"),p=d?parseInt(d,10):void 0;return void 0!==p&&Number.isNaN(p)&&(p=void 0),{tags:c,order:u,count:p,searchQuery:t,after:n}}},12530:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(35944),i=t(67294),o=t(1144),a=t(81255),l=t(69346),c=t(81456);function s(e){var n=e.count,t=e.children,s=e.tooltip,u=e.small,d=(0,c.d)(n);return(0,r.BX)(l.Z,{"aria-label":s,"data-microtip-position":"left",role:"tooltip",css:[a.l0.rowWithGap(4),a.l0.align.center,a.l0.color.foregroundDimmer,{userSelect:"none",lineHeight:1}],children:[i.cloneElement(t,{size:u?12:void 0}),(0,r.tZ)(o.x,{variant:u?"small":void 0,color:"dimmer",children:d})]})}},19923:function(e,n,t){"use strict";t.d(n,{Gp:function(){return U},Oh:function(){return Y},V3:function(){return N},Xl:function(){return L},Yd:function(){return j},_b:function(){return K},gX:function(){return ne},h2:function(){return A},on:function(){return G},q7:function(){return J},vs:function(){return T},w9:function(){return F},zp:function(){return V}});var r=t(26042),i=t(7297),o=t(31230),a=t(7900),l=t(37887),c=t(50319);function s(){var e=(0,i.Z)(["\n  fragment TeamProfileReplTemplateModelSolution on ReplTemplateModelSolution {\n    id\n    visibleAfterSubmitting\n    visibleAfterPassingTests\n    visibleAfterDueDate\n    repl {\n      id\n      url\n      nextPagePathname\n    }\n    canStudentFork\n    studentFork {\n      id\n      url\n      nextPagePathname\n    }\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment TeamProfileReplTemplate on ReplTemplate {\n    id\n    isPublished\n    isGroupProject\n    allowSelfGrouping\n    imageUrl\n    url\n    dueDate\n    modelSolution {\n      id\n      ...TeamProfileReplTemplateModelSolution\n    }\n    userSubmissionGroup {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment TeamProfileRepl on Repl {\n    id\n    title\n    description\n    slug\n    timeCreated\n    url\n    pinnedToProfile\n    nextPagePathname\n    templateInfo {\n      label\n      iconUrl\n    }\n    template {\n      id\n      ...TeamProfileReplTemplate\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i.Z)(["\n  fragment TeamProfileStack on Stack {\n    id\n    title\n    repls {\n      id\n      ...TeamProfileRepl\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment TeamEduProfile on Team {\n    id\n    username\n    displayName\n    isAdmin\n    archived\n    needsMigrationToStacks\n    defaultTemplateStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n      capabilities {\n        isExpired: isExpiring(daysFromNow: 0)\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  fragment TeamProProfile on Team {\n    id\n    username\n    displayName\n    isMember\n    isAdmin\n    archived\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment TeamProfileAllStacks on Team {\n    id\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  fragment TeamCreateReplSubmissionOutput on CreateReplSubmissionOutput {\n    ... on Repl {\n      id\n      nextPagePathname\n      url\n      template {\n        id\n        ...TeamProfileReplTemplate\n      }\n    }\n    ... on UserError {\n      message\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  query TeamProProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamProProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  query TeamEduProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamEduProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function y(){var e=(0,i.Z)(["\n  mutation TeamProProfilePinRepl($replId: String!) {\n    pinReplToProfile2(replId: $replId) {\n      ... on Repl {\n        id\n        pinnedToProfile\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return y=function(){return e},e}function b(){var e=(0,i.Z)(["\n  mutation TeamProProfileUnpinRepl($replId: String!) {\n    unpinReplFromProfile2(replId: $replId) {\n      ... on Repl {\n        id\n        pinnedToProfile\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return b=function(){return e},e}function w(){var e=(0,i.Z)(["\n  mutation TeamProfileArrangeStackItem($input: ArrangeStackItemInput!) {\n    arrangeStackItem(input: $input) {\n      ... on Team {\n        id\n        ...TeamProfileAllStacks\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function x(){var e=(0,i.Z)(["\n  mutation TeamProfileUpdateReplTemplate($input: UpdateReplTemplateInput!) {\n    updateReplTemplate(input: $input) {\n      ... on ReplTemplate {\n        id\n        repl {\n          id\n          ...TeamProfileRepl\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function k(){var e=(0,i.Z)(["\n  mutation TeamProfileMigrateTeamToStacks($teamId: Int!) {\n    migrateTeamToStacks(teamId: $teamId) {\n      ... on Team {\n        id\n        ...TeamEduProfile\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function C(){var e=(0,i.Z)(["\n  mutation TeamProfileCreateReplTemplateModelSolution(\n    $input: CreateReplTemplateModelSolutionInput!\n  ) {\n    createReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return C=function(){return e},e}function I(){var e=(0,i.Z)(["\n  mutation TeamProfileCreateReplTemplateModelSolutionFork(\n    $input: CreateReplTemplateModelSolutionForkInput!\n  ) {\n    createReplTemplateModelSolutionFork(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return I=function(){return e},e}function P(){var e=(0,i.Z)(["\n  mutation TeamCreateReplSubmission($templateId: Int!) {\n    createReplSubmission(templateId: $templateId) {\n      ...TeamCreateReplSubmissionOutput\n    }\n  }\n  ","\n"]);return P=function(){return e},e}var S={},R=(0,o.Ps)(s()),E=(0,o.Ps)(u(),R,a.Pc),T=(0,o.Ps)(d(),E),D=(0,o.Ps)(p(),T),U=(0,o.Ps)(f(),D),_=(0,o.Ps)(h(),D),G=(0,o.Ps)(v(),D),B=(0,o.Ps)(m(),E),M=(0,o.Ps)(g(),_);function A(e){var n=(0,r.Z)({},S,e);return l.a(M,n)}var X=(0,o.Ps)(Z(),U);function N(e){var n=(0,r.Z)({},S,e);return l.a(X,n)}var O=(0,o.Ps)(y());function L(e){var n=(0,r.Z)({},S,e);return c.D(O,n)}var z=(0,o.Ps)(b());function j(e){var n=(0,r.Z)({},S,e);return c.D(z,n)}var W=(0,o.Ps)(w(),G);function F(e){var n=(0,r.Z)({},S,e);return c.D(W,n)}var H=(0,o.Ps)(x(),T);function V(e){var n=(0,r.Z)({},S,e);return c.D(H,n)}var $=(0,o.Ps)(k(),U);function K(e){var n=(0,r.Z)({},S,e);return c.D($,n)}var q=(0,o.Ps)(C(),T);function Y(e){var n=(0,r.Z)({},S,e);return c.D(q,n)}var Q=(0,o.Ps)(I(),T);function J(e){var n=(0,r.Z)({},S,e);return c.D(Q,n)}var ee=(0,o.Ps)(P(),B);function ne(e){var n=(0,r.Z)({},S,e);return c.D(ee,n)}},26082:function(e,n,t){"use strict";var r=t(5152),i=t.n(r);n.Z=i()((function(){return Promise.all([t.e(8966),t.e(5499),t.e(5117),t.e(7068)]).then(t.bind(t,87068)).then((function(e){return e.EditReplTemplate}))}),{loadableGenerated:{webpack:function(){return[87068]}}})},70710:function(e,n,t){"use strict";t.d(n,{I$:function(){return k},Du:function(){return C},Cd:function(){return P}});var r=t(26042),i=t(7297),o=t(31230),a=t(9523);function l(){var e=(0,i.Z)(['\n  fragment ReplEnvironmentTourCurrentUser on CurrentUser {\n    id\n    flagLayoutNavigator: gate(feature: "flag-layout-navigator")\n    hasSeenOldWorkspaceTour: tourSeen(name: "workspace-desktop-tour")\n  }\n']);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentTourRepl on Repl {\n    id\n    lesson {\n      id\n    }\n  }\n"]);return c=function(){return e},e}var s=(0,o.Ps)(l()),u=(0,o.Ps)(c()),d=t(52008),p=t(65711),f=t(6695);function h(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentHeaderLeftCurrentUser on CurrentUser {\n    id\n    isFirewallMode\n  }\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentHeaderLeftRepl on Repl {\n    id\n    isAlwaysOn\n    slug\n    url\n    ...WorkspaceHeaderReplMetadataRepl\n  }\n  ","\n"]);return v=function(){return e},e}var m=(0,o.Ps)(h()),g=(0,o.Ps)(v(),f.s),Z=t(37887);function y(){var e=(0,i.Z)(["\n  fragment ReplEnvironment2CurrentUser on CurrentUser {\n    id\n    image\n    isFirewallMode\n    ...CrosisContextCurrentUser\n    ...ReplEnvironment2CurrentUserLayoutFlags\n    editorPreferences {\n      ...CurrentUserPreferences\n    }\n    ...ReplEnvironmentHeaderLeftCurrentUser\n    ...ReplEnvironmentTourCurrentUser\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i.Z)(["\n  fragment ReplEnvironment2Repl on Repl {\n    id\n    title\n    layoutState\n    description\n    multiplayers {\n      id\n    }\n    currentUserPermissions {\n      containerWrite\n    }\n    origin {\n      id\n    }\n    language\n    config {\n      isVnc\n      isServer\n    }\n    lesson {\n      id\n    }\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n  }\n  ","\n  ","\n"]);return b=function(){return e},e}function w(){var e=(0,i.Z)(["\n  query ReplEnvironment2($url: String!) {\n    repl(url: $url) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n        ...ReplEnvironment2Repl\n        ...ReplEnvironmentTourRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n        isOwner\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironment2CurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return w=function(){return e},e}var x={},k=(0,o.Ps)(y(),a.D,d.SL,p.wO,m,s),C=(0,o.Ps)(b(),a.C,g),I=(0,o.Ps)(w(),a.C,C,u,k);function P(e){var n=(0,r.Z)({},x,e);return Z.a(I,n)}},67731:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Ih}});var r=t(47568),i=t(10253),o=t(70655),a=t(35944),l=t(67294),c=t(91131),s=t(11163),u=t(22862),d=t(70338),p=t(47685),f=t(15519),h=t(70710),v=t(15085),m=t(61756),g=t(1879),Z=t(67629),y=t(69346),b=t(1144),w=t(81255),x=t(88075);var k=function(e){return(0,a.tZ)(g.Z,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,a.BX)(y.Z,{css:[w.l0.colWithGap(24)],children:[(0,a.tZ)(b.h,{variant:"headerDefault",level:2,css:w.l0.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,a.tZ)(b.x,{multiline:!0,children:"Never miss messages from your collaborators if you\u2019re in another tab or window."}),(0,a.BX)(y.Z,{css:[w.l0.rowWithGap(12),w.l0.justify.end],children:[(0,a.tZ)(m.ZP,{onClick:e.onCancel,text:"Deny",iconLeft:(0,a.tZ)(Z.Z,{})}),(0,a.tZ)(m.ZP,{text:"Allow notifications",colorway:"positive",iconLeft:(0,a.tZ)(x.Z,{}),onClick:e.onConfirm})]})]})})},C=t(92098),I=t(60977),P=t(90317),S=t(26042),R=t(7297),E=t(31230),T=t(37887);function D(){var e=(0,R.Z)(["\n  fragment ReplEnvironmentAvatarMenuCurrentUser on CurrentUser {\n    id\n    url\n    username\n    image\n    isHacker\n  }\n"]);return D=function(){return e},e}function U(){var e=(0,R.Z)(["\n  query ReplEnvironmentAvatarMenu {\n    currentUser {\n      id\n      ...ReplEnvironmentAvatarMenuCurrentUser\n    }\n  }\n  ","\n"]);return U=function(){return e},e}var _={},G=(0,E.Ps)(D()),B=(0,E.Ps)(U(),G);var M=t(50319);function A(){var e=(0,R.Z)(["\n  fragment MarkLessonCompleteLesson on UserCourseLesson {\n    id\n    lessonSlug\n    timeCompleted\n    course {\n      id\n      courseSlug\n    }\n  }\n"]);return A=function(){return e},e}function X(){var e=(0,R.Z)(["\n  mutation MarkLessonAsComplete($input: CompleteUserCourseLessonInput!) {\n    completeUserCourseLesson(input: $input) {\n      ... on UpdatedUserCourseLesson {\n        __typename\n        userCourseLesson {\n          id\n          timeCompleted\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return X=function(){return e},e}var N={},O=(0,E.Ps)(A()),L=(0,E.Ps)(X());var z=t(6695);function j(){var e=(0,R.Z)(["\n  fragment ReplEnvironmentHeaderCurrentUser on CurrentUser {\n    id\n    isSubscribed\n    isFirewallMode\n    isExplorer: hasRole(role: EXPLORER)\n    ...ReplEnvironmentAvatarMenuCurrentUser\n  }\n  ","\n"]);return j=function(){return e},e}function W(){var e=(0,R.Z)(["\n  fragment ReplEnvironmentHeaderRepl on Repl {\n    id\n    slug\n    url\n    isAlwaysOn\n    isOwner\n    isPrivate\n    workspaceCta\n    rootOriginReplUrl\n    lang {\n      id\n      engine\n    }\n    origin {\n      id\n    }\n    currentUserPermissions {\n      editMultiplayers\n      inviteGuests\n      containerWrite\n    }\n    owner {\n      ... on Team {\n        id\n        capabilities {\n          isEducationPlan\n        }\n      }\n      ... on User {\n        id\n      }\n    }\n    template {\n      id\n      isGroupProject\n    }\n    lesson {\n      id\n      ...MarkLessonCompleteLesson\n    }\n    multiplayers {\n      id\n    }\n  }\n  ","\n"]);return W=function(){return e},e}function F(){var e=(0,R.Z)(["\n  query ReplEnvironmentHeader($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentHeaderRepl\n        ...WorkspaceHeaderReplMetadataRepl\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentHeaderCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n"]);return F=function(){return e},e}var H={},V=(0,E.Ps)(j(),G),$=(0,E.Ps)(W(),O),K=(0,E.Ps)(F(),$,z.s,V);var q=t(26473),Y=t(70804),Q=t(99408),J=t(58502),ee=t(83475),ne=t(87603),te=t.n(ne),re=t(73359);function ie(){var e=(0,R.Z)(["\n  query WorkspaceHeaderUsersOnline($ids: [Int!]!) {\n    currentUser {\n      id\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return ie=function(){return e},e}var oe={},ae=(0,E.Ps)(ie());function le(e){var n=(0,S.Z)({},oe,e);return T.a(ae,n)}var ce=t(57263),se=t(69396),ue=t(57731),de=t(66060);function pe(e){var n=function(){e.canClick&&e.onClick&&e.onClick({username:e.username,id:e.id})};return(0,a.tZ)(de.ZP,{placement:"bottom",tooltip:"Observe ".concat(e.username),children:function(t,r){return(0,a.tZ)(y.Z,(0,se.Z)((0,S.Z)({},t),{innerRef:r,onClick:n,children:(0,a.tZ)(ue.Z,{size:e.size||35,src:e.image,alt:e.username,css:[e.canClick&&w.l0.cursor.pointer,{transition:"all 0.2s ease",border:"2px solid "+e.color,"&:hover":{filter:"brightness(95%)",boxShadow:w.TV.shadow1}}]})}))}})}var fe=t(94184),he=t.n(fe),ve=t(77365);function me(){var e=(0,R.Z)(["\n  fragment UserListModalUser on User {\n    id\n    username\n    image\n  }\n"]);return me=function(){return e},e}function ge(){var e=(0,R.Z)(["\n  fragment UserListModalReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...UserListModalUser\n    }\n  }\n  ","\n"]);return ge=function(){return e},e}function Ze(){var e=(0,R.Z)(["\n  query UserListModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UserListModalUser\n        }\n        permissions {\n          id\n          ...UserListModalReplPermission\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n  ","\n"]);return Ze=function(){return e},e}var ye={},be=(0,E.Ps)(me()),we=(0,E.Ps)(ge(),be),xe=(0,E.Ps)(Ze(),be,we);var ke=t(63377);function Ce(){var e=(0,Q.Z)(),n=e.session,t=e.presence;return l.useCallback((function(e){var r=e.username,i=e.id,o=t.getFollowedUser();if((null===o||void 0===o?void 0:o.username)!==r){t.followUser(r);var a=t.getActiveFileForUser(i),l=n.getActiveFile();a&&a!==l&&n.openFile(a)}else t.unfollowUser()}),[n,t])}var Ie=t(34140);function Pe(e){var n=e.hideModal,t=e.onUserClick,r=e.isOpen,i=(0,ke.Z)(),o=(0,Q.Z)().presence,l=(0,J.Z)({presence:o});return(0,a.tZ)(v.u_,{isOpen:r,onRequestClose:n,children:(0,a.tZ)(Re,{replId:i,onUserClick:t,activeUsers:l,hideModal:n})})}function Se(e,n){return n.some((function(n){return n.id===e}))}function Re(e){var n=e.replId,t=e.activeUsers,r=e.onUserClick,i=e.hideModal,o=function(e){var n=(0,S.Z)({},ye,e);return T.a(xe,n)}({variables:{replId:n}}),l=o.data,c=o.loading,s=o.error;if(c)return(0,a.tZ)(v.G7,{css:[v.l0.flex.row,v.l0.justify.center,v.l0.p(32)],children:(0,a.tZ)(ve.Z,{})});if(s)return(0,a.tZ)("div",{children:s.message});if("Repl"===(null===l||void 0===l?void 0:l.repl.__typename)){var u=l.repl,d=l.currentUser,p=u.user,f=p&&t.find((function(e){return e.username===p.username})),h=u.permissions.filter((function(e){var n=e.user;return n&&Se(n.id,t)})),m=u.permissions.filter((function(e){var n=e.user;return n&&!Se(n.id,t)}));return(0,a.BX)(v.G7,{css:[v.l0.colWithGap(24)],children:[(0,a.tZ)(v.h4,{level:1,variant:"headerDefault",children:"Multiplayers"}),(0,a.tZ)(v.xv,{multiline:!0,children:"Users can interact with this Repl in real time."}),(0,a.tZ)(v.G7,{css:[v.l0.maxHeight(330),{overflowY:"auto"}],children:(0,a.BX)(v.G7,{children:[p?(0,a.tZ)(Te,(0,se.Z)((0,S.Z)({},p),{onClick:r,isOnline:Boolean(f),color:f?f.color:"transparent",isOwner:!0,hideModal:i,canClickAvatar:Boolean(f)&&p.id!==(null===d||void 0===d?void 0:d.id),type:P.aQ.Rw})):null,h.map((function(e){var n=e.type,o=e.user;if(!o)throw new Error("Expected user");var l=t.find((function(e){return e.username===o.username}));if(!l)throw new Error("Expected user online");var c=o.id!==(null===d||void 0===d?void 0:d.id);return(0,a.tZ)(Te,(0,se.Z)((0,S.Z)({onClick:r,type:n},o),{isOnline:!0,canClickAvatar:c,color:l.color,hideModal:i,isOwner:!1}),"chat-user-list-".concat(o.username))})),m.map((function(e){var n=e.type,t=e.user;if(!t)throw new Error("Expected user");return(0,a.tZ)(Te,(0,se.Z)((0,S.Z)({onClick:r,type:n},t),{canClickAvatar:!1,isOnline:!1,color:"transparent",hideModal:i,isOwner:!1}),"chat-user-list-".concat(t.username))}))]})})]})}return"ReplRedirect"===(null===l||void 0===l?void 0:l.repl.__typename)?(0,a.BX)("div",{children:["This Repl has moved to"," ",(0,a.tZ)("a",{href:l.repl.replUrl,children:l.repl.replUrl})]}):"SubscriptionExpiredError"===(null===l||void 0===l?void 0:l.repl.__typename)?(0,a.BX)("div",{children:["Your subscription has expired.",(0,a.tZ)("a",{href:"/pricing",children:"Upgrade here"})]}):null}var Ee={r:"read only",rw:"can edit"};function Te(e){var n=e.type,t=e.id,r=e.username,i=e.image,o=e.isOnline,l=e.isOwner,c=e.color,s=e.onClick,u=e.hideModal,d=e.canClickAvatar,p=Ce(),f=function(){d&&(p({username:r,id:t}),u())};return(0,a.BX)("div",{className:te().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]])+" "+(he()("user-list-item-wrapper",{online:o})||""),children:[(0,a.BX)("div",{role:"button",onClick:f,onKeyDown:f,tabIndex:0,className:te().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]])+" image",children:[(0,a.tZ)("img",{src:i,alt:"",className:te().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]])+" "+((o?"":"offline")||"")}),(0,a.BX)(Ie.T,{children:["Observe ",r]})]}),(0,a.BX)("div",{className:te().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]])+" info",children:[(0,a.BX)("div",{className:te().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]]),children:[(0,a.BX)("a",{href:"/@".concat(r),target:"_blank",onClick:s,className:te().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]]),children:["@",r]}),!o&&" (offline)"]}),(0,a.tZ)("div",{className:te().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]]),children:l?"owner":Ee[n]})]}),(0,a.tZ)(te(),{id:"8abf4fce485dcead",dynamic:[d?"pointer":"auto",c],children:".user-list-item-wrapper.__jsx-style-dynamic-selector{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-ordinal-group:2;-webkit-order:1;-moz-box-ordinal-group:2;-ms-flex-order:1;order:1}.image.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;cursor:".concat(d?"pointer":"auto","}img.__jsx-style-dynamic-selector{width:40px;height:40px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;border:3px solid ").concat(c,";background:white;-o-object-fit:cover;object-fit:cover}.info.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-left:var(--space-8)}img.offline.__jsx-style-dynamic-selector{-webkit-filter:grayscale(100%);filter:grayscale(100%)}.user-list-item-wrapper.online.__jsx-style-dynamic-selector{-webkit-box-ordinal-group:1;-webkit-order:0;-moz-box-ordinal-group:1;-ms-flex-order:0;order:0}")})]})}function De(e){var n=(0,i.Z)(l.useState(!1),2),t=n[0],r=n[1],o=(0,ke.Z)(),c=le({variables:{ids:e.users.map((function(e){return e.id}))},ssr:!1,skip:!e.users.length}),s=c.data,u=c.loading,d=c.error,p=e.users.reduce((function(e,n){return e[n.id]=n.color,e}),{});if(u)return null;if(d)return null;if(!(null===s||void 0===s?void 0:s.currentUser))return null;var f=s.usersByIds,h=s.currentUser,m=f.filter((function(e){return e.id!==h.id})),g=m.length-3;return 0===m.length?null:(0,a.BX)(v.G7,{tag:"ul",className:"multiplayer-users-container",css:[v.l0.px(8),v.l0.rowWithGap(4),v.l0.align.center],"aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[g>0?(0,a.tZ)("li",{className:te().dynamic([["9e6f75ce31331994",[ce.j.mobileMax+100]]]),children:(0,a.tZ)(v.zx,{onClick:function(){return r(!0)},text:"+ ".concat(g),css:{background:"none"}})}):null,m.slice(0,3).map((function(n){return(0,a.tZ)("li",{className:te().dynamic([["9e6f75ce31331994",[ce.j.mobileMax+100]]]),children:(0,a.tZ)(pe,{id:n.id,username:n.username,image:n.image,color:p[n.id],onClick:e.onAvatarClick,canClick:!0})},n.id)})),(0,a.tZ)(Pe,{isOpen:t,hideModal:function(){return r(!1)},onUserClick:function(){(0,I.j)(I.U3.MP2_VISITED_PROFILE,{replId:o,from:"OnlineUsers"})}}),(0,a.tZ)(te(),{id:"9e6f75ce31331994",dynamic:[ce.j.mobileMax+100],children:".multiplayer-users-container.__jsx-style-dynamic-selector li.__jsx-style-dynamic-selector{list-style-type:none}@media only screen and (max-width:".concat(ce.j.mobileMax+100,"px){.multiplayer-users-container.__jsx-style-dynamic-selector{display:none}}")})]})}var Ue=t(34193),_e=t(29815);function Ge(){var e=(0,R.Z)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n  }\n"]);return Ge=function(){return e},e}function Be(){var e=(0,R.Z)(["\n  fragment MultiplayerReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...MultiplayerUser\n    }\n  }\n  ","\n"]);return Be=function(){return e},e}function Me(){var e=(0,R.Z)(["\n  query MultiplayerManageTeamMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        currentUserPermissions {\n          editMultiplayers\n          inviteGuests\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Me=function(){return e},e}function Ae(){var e=(0,R.Z)(["\n  mutation MultiplayerManageTeamMultiplayersAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Ae=function(){return e},e}function Xe(){var e=(0,R.Z)(["\n  mutation MultiplayerManageTeamMultiplayersRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Xe=function(){return e},e}var Ne={},Oe=(0,E.Ps)(Ge()),Le=(0,E.Ps)(Be(),Oe),ze=(0,E.Ps)(Me(),Le,Oe);var je=(0,E.Ps)(Ae(),Oe,Le);var We=(0,E.Ps)(Xe(),Oe,Le);function Fe(){var e=(0,R.Z)(["\n  fragment MultiplayerControlUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return Fe=function(){return e},e}function He(){var e=(0,R.Z)(["\n  fragment MultiplayerControlReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...MultiplayerControlUser\n    }\n  }\n  ","\n"]);return He=function(){return e},e}function Ve(){var e=(0,R.Z)(["\n  fragment MultiplayerControlEmailInviteReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      image\n      username\n      url\n    }\n  }\n"]);return Ve=function(){return e},e}function $e(){var e=(0,R.Z)(["\n  query MultiplayerControl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return $e=function(){return e},e}function Ke(){var e=(0,R.Z)(["\n  mutation MultiplayerControlAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerControlUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerControlReplPermission\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Ke=function(){return e},e}function qe(){var e=(0,R.Z)(["\n  mutation MultiplayerControlRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerControlUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerControlReplPermission\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return qe=function(){return e},e}function Ye(){var e=(0,R.Z)(["\n  mutation MultiplayerControlCreateMultiplayerInvite(\n    $replId: String!\n    $email: String!\n    $type: String!\n  ) {\n    createMultiplayerInvite2(replId: $replId, email: $email, type: $type) {\n      ... on MultiplayerInvite {\n        email\n        repl {\n          id\n          permissions {\n            id\n            ...MultiplayerReplPermission\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on ReplPermission {\n        id\n        ...MultiplayerControlEmailInviteReplPermission\n      }\n    }\n  }\n  ","\n  ","\n"]);return Ye=function(){return e},e}function Qe(){var e=(0,R.Z)(["\n  mutation MultiplayerControlDeleteMultiplayerInvite(\n    $replId: String!\n    $email: String!\n  ) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          permissions {\n            id\n            ...MultiplayerReplPermission\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Qe=function(){return e},e}var Je={},en=(0,E.Ps)(Fe()),nn=(0,E.Ps)(He(),en),tn=(0,E.Ps)(Ve()),rn=(0,E.Ps)($e(),Le);var on=(0,E.Ps)(Ke(),en,nn);var an=(0,E.Ps)(qe(),en,nn);var ln=(0,E.Ps)(Ye(),Le,tn);function cn(e){var n=(0,S.Z)({},Je,e);return M.D(ln,n)}var sn=(0,E.Ps)(Qe(),Le);function un(e){var n=(0,S.Z)({},Je,e);return M.D(sn,n)}var dn=t(19526),pn=t(18757),fn=t(64184),hn=t(82893),vn=t(28898),mn=t(93058),gn=t(92002),Zn=t(30019),yn=t(44781),bn=t(27206),wn=t(50009),xn=t(3218),kn=t(96594),Cn=t(6951),In=t(24351);function Pn(){var e=(0,R.Z)(["\n  fragment MultiplayerUsernameSearchUser on User {\n    id\n    firstName\n    lastName\n    username\n    image\n  }\n"]);return Pn=function(){return e},e}function Sn(){var e=(0,R.Z)(["\n  query MultiplayerUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...MultiplayerUsernameSearchUser\n    }\n  }\n  ","\n"]);return Sn=function(){return e},e}var Rn={},En=(0,E.Ps)(Pn()),Tn=(0,E.Ps)(Sn(),En);function Dn(e){var n=e.onSubmit,t=e.existingUsernames,r=e.isDisabled,o=e.onChange,c=e.placeholder,s=(0,i.Z)(l.useState(""),2),u=s[0],d=s[1],p=!!u.match(/.+@.+/),f=(0,In.Z)(u.trim().replace(/^@/,""),250),h=function(e){var n=(0,S.Z)({},Rn,e);return T.a(Tn,n)}({skip:!f||p,variables:{query:f,limit:6}}),v=h.data,m=h.loading,g=h.error,Z=(0,mn.Z)().showError;l.useEffect((function(){g&&Z(g.message)}),[g,Z]);var y=null===v||void 0===v?void 0:v.usernameSearch;return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),n(u),d("")},className:"jsx-d408485a86637a91",children:[(0,a.BX)("div",{className:"jsx-d408485a86637a91 form-content",children:[(0,a.tZ)(kn.ZP,{onChange:function(e){e&&d(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var r=e.getInputProps,i=e.getItemProps,l=e.getMenuProps,s=e.isOpen,p=e.highlightedIndex;return(0,a.BX)("div",{className:"jsx-d408485a86637a91 dropdown",children:[(0,a.tZ)(bn.ZP,(0,S.Z)({},r({ref:null,value:u,onChange:function(e){d(e.currentTarget.value),null===o||void 0===o||o(e.currentTarget.value)},placeholder:null!==c&&void 0!==c?c:"Search by username or invite by email",autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&u.match(/.+@.+/)&&(n(u),d(""),e.currentTarget.blur())}}))),(0,a.BX)("div",(0,se.Z)((0,S.Z)({},l()),{className:"jsx-d408485a86637a91",children:[s&&y&&y.length?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu",children:y.map((function(e,n){return(0,a.tZ)("div",(0,se.Z)((0,S.Z)({},i({item:e,index:n})),{className:"jsx-d408485a86637a91 "+(he()("result",{"is-active":p===n})||""),children:(0,a.BX)(dn.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(vn.Z,{size:"s",url:e.image}),(0,a.tZ)("div",{className:"jsx-d408485a86637a91",children:e.username}),t.includes(e.username)?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 check-icon",children:(0,a.tZ)(x.Z,{})}):null]})}),e.username)}))}):null,s&&m?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-loading",children:"loading..."}):null,s&&y&&0===y.length?(0,a.BX)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-empty",children:['no results found for "',u,'"']}):null]}))]})}}),(0,a.tZ)("div",{className:"jsx-d408485a86637a91",children:(0,a.tZ)(Cn.Z,{color:"primary",type:"submit",filled:!0,disabled:r||!u,children:"Invite"})})]}),(0,a.tZ)(te(),{id:"d408485a86637a91",children:".form-content.jsx-d408485a86637a91{display:grid;position:relative;width:100%;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.dropdown.jsx-d408485a86637a91{position:relative;z-index:5}.dropdown-menu.jsx-d408485a86637a91{position:absolute;z-index:1;top:100%;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--foreground-dimmest);border-top:0 none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);max-height:300px;overflow:auto}.dropdown-menu.is-loading.jsx-d408485a86637a91,.dropdown-menu.is-empty.jsx-d408485a86637a91{color:var(--foreground-dimmer);padding:var(--space-8)}.dropdown.jsx-d408485a86637a91:focus-within .dropdown-menu.jsx-d408485a86637a91{border-color:var(--accent-primary-default)}.spacer.jsx-d408485a86637a91{width:var(--space-8);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.result.jsx-d408485a86637a91{cursor:pointer;padding:var(--space-8)var(--space-16)}.result.jsx-d408485a86637a91:hover,.is-active.jsx-d408485a86637a91{background-color:var(--accent-primary-dimmer)}.check-icon.jsx-d408485a86637a91{margin-left:auto;color:var(--accent-positive-default)}"})]})}function Un(e){var n=e.value,t=e.onButtonPress,r=e.statusText,i=void 0===r?"":r,o=e.image,l=e.filterValue,c=e.type,s=e.Icon;return(0,a.BX)("div",{className:"jsx-a16e88ad40d0e05c "+(he()("multiplayer-item",{"is-editable":!!t})||""),children:[(0,a.BX)(dn.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(vn.Z,{size:"s",url:null!==o&&void 0!==o?o:""}),(0,a.tZ)("div",{className:"jsx-a16e88ad40d0e05c label",children:l?(0,a.tZ)(wn.gr,{source:n,match:l}):"".concat(n," ").concat(i)}),!!t&&(0,a.tZ)(Cn.Z,{className:"remove-button",border:!1,filled:!1,"aria-label":"Remove ".concat(c||"email invite"),role:"tooltip","data-microtip-position":"left",onClick:t,children:s?(0,a.tZ)(s,{size:12,className:"jsx-a16e88ad40d0e05c"}):null})]}),(0,a.tZ)(te(),{id:"a16e88ad40d0e05c",children:".multiplayer-item.jsx-a16e88ad40d0e05c{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c:hover{background-color:var(--background-root)}.label.jsx-a16e88ad40d0e05c{margin-right:auto}"})]})}var _n=t(4158);function Gn(e){var n=e.email,t=e.onInvite,r=e.onCancel;return(0,a.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa root",children:[(0,a.tZ)(Zn.Z,{level:3,align:"center",children:"Are you sure?"}),(0,a.BX)(yn.Z,{align:"center",children:[(0,a.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa message",children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,a.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa email",children:n})]}),(0,a.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa controls",children:[(0,a.tZ)(Cn.Z,{onClick:r,children:"Cancel"}),(0,a.tZ)(Cn.Z,{filled:!0,color:"primary",onClick:t,children:"Invite"})]}),(0,a.tZ)(te(),{id:"1a6ae4ac10e8f1fa",children:".root.jsx-1a6ae4ac10e8f1fa{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24)}.controls.jsx-1a6ae4ac10e8f1fa{display:grid;grid-gap:var(--space-8);grid-auto-flow:column}.message.jsx-1a6ae4ac10e8f1fa{padding-bottom:var(--space-16)}"})]})}var Bn=t(75474),Mn=t(34847);function An(e){var n,t,r=e.replId,o=function(e){var n=(0,S.Z)({},Ne,e);return T.a(ze,n)}({variables:{replId:r}}),c=o.data,s=o.loading,u=(null===c||void 0===c||null===(n=c.currentUser)||void 0===n?void 0:n.id)||null,d=(0,mn.Z)(),p=d.showConfirm,f=d.showError,h=(0,i.Z)(l.useState(""),2),v=h[0],m=h[1],g=(0,i.Z)(function(e){var n=(0,S.Z)({},Ne,e);return M.D(je,n)}({onError:function(e){return f(e.message)},onCompleted:function(e){var n=e.addMultiplayerUser.user;(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"username"});var t=n?"@".concat(n.username):"Member";p("".concat(t," added"))}}),2),y=g[0],b=g[1],w=(0,i.Z)(function(e){var n=(0,S.Z)({},Ne,e);return M.D(We,n)}({onError:function(e){return f(e.message)},onCompleted:function(e){var n=e.removeMultiplayerUser.user,t=n?"@".concat(n.username):"Member";p("".concat(t," removed"))}}),2),x=w[0],k=w[1],C="Repl"===(null===c||void 0===c?void 0:c.repl.__typename)?c.repl:null,R=(0,i.Z)(cn({onError:function(e){f(e.message)},update:function(e,n){var t,i=null===(t=n.data)||void 0===t?void 0:t.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var o=i.email;return(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"}),void p("Invited ".concat(o," via email"))}if("ReplPermission"===i.__typename){e.modify({id:e.identify({__typename:"Repl",id:r}),fields:{permissions:function(n){var t=e.writeFragment({data:i,fragment:tn});return(0,_e.Z)(n).concat([t])}}});var a=i.user;(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"});var l=a?"@".concat(a.username):"Member";p("".concat(l," added"))}}else f(i.message)}}),2),E=R[0],D=R[1],U=(0,i.Z)(un({onError:function(e){return f(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;(0,I.j)(I.U3.MP2_REMOVED_EMAIL_INVITE,{replId:r,email:n}),p("Invite for ".concat(n," deleted"))}}else f(e.deleteMultiplayerInvite.message)}}),2),_=U[0],G=U[1];if(C&&!C.owner)throw new Error("Cannot manage members on anon repls");if((null===C||void 0===C?void 0:C.owner)&&"Team"!==(null===C||void 0===C?void 0:C.owner.__typename))throw new Error("Expect repl owned by a team");var B,A,X,N="Team"===(null===C||void 0===C||null===(t=C.owner)||void 0===t?void 0:t.__typename)?C.owner:null,O=null!==(B=null===C||void 0===C?void 0:C.permissions.reduce((function(e,n){return n.user?(0,_e.Z)(e).concat([n.user.username]):e}),[]))&&void 0!==B?B:[],L=null===C||void 0===C?void 0:C.permissions.reduce((function(e,n){if(!n.user)return e;var t=n.user;return!v||xn.Z.filter(v,[t.username]).length>0?((null===N||void 0===N?void 0:N.members.some((function(e){var n;return(null===(n=e.user)||void 0===n?void 0:n.id)===t.id})))||e.users.push(t),e):e}),{users:[]}),z=null===C||void 0===C?void 0:C.multiplayerInvites.filter((function(e){return!v||xn.Z.filter(v,[e.email]).length>0})),j=null===N||void 0===N?void 0:N.members.reduce((function(e,n){if(!n.user)return e;var t=n.user;if(!(!v||xn.Z.filter(v,[t.username]).length>0))return e;var r=n.permissions&&n.permissions!==P.SV.Member,i=null===C||void 0===C?void 0:C.permissions.find((function(e){var n;return e.user&&(null===(n=e.user)||void 0===n?void 0:n.id)===t.id}));return r?e.teamAdmins.push(t):(null===i||void 0===i?void 0:i.type)?e.withPermission.push(t):e.withoutPermission.push(t),e}),{teamAdmins:[],withPermission:[],withoutPermission:[]}),W=null===j||void 0===j?void 0:j.teamAdmins.some((function(e){return e.id===u})),F=(null!==(A=null===L||void 0===L?void 0:L.users.length)&&void 0!==A?A:0)+(null!==(X=null===z||void 0===z?void 0:z.length)&&void 0!==X?X:0),H=null===C||void 0===C?void 0:C.currentUserPermissions.editMultiplayers,V=null===C||void 0===C?void 0:C.currentUserPermissions.inviteGuests,$=Boolean(j&&!j.teamAdmins.length&&!j.withPermission.length&&(!(null===L||void 0===L?void 0:L.users.length)&&!(null===z||void 0===z?void 0:z.length)&&V||!V&&!j.withoutPermission.length)),K=(0,i.Z)(l.useState(null),2),q=K[0],Y=K[1];return(0,a.BX)("div",{className:te().dynamic([["dc131772cdbb2add",[ce.j.mobileMax]]])+" root",children:[(0,a.BX)(dn.gC,{spacing:2,align:"stretch",children:[(0,a.BX)(dn.Ug,{children:[(0,a.BX)(Zn.Z,{level:5,foreground:s?3:1,children:[H?"Add or remove members from this repl":null,s?"Loading...":null]}),H&&V&&!s?(0,a.tZ)("div",{"aria-label":" Add team members or invite external guests via email or username","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip",className:te().dynamic([["dc131772cdbb2add",[ce.j.mobileMax]]])+" information-icon-container",children:(0,a.tZ)(_n.Z,{})}):null]}),V?(0,a.tZ)(Dn,{existingUsernames:O,onSubmit:function(e){!!e.match(/.+@.+/)&&!D.loading?Y(e):b.loading||y({variables:{username:e,replId:r,type:"rw"}}),m("")},placeholder:H?"Search for users or invite guests":"Filter users",isDisabled:s,onChange:function(e){return m(e)}}):(0,a.tZ)(bn.ZP,{disabled:s,value:v,onChange:function(e){return m(e.currentTarget.value)},placeholder:H?"Filter team members to add or remove":"Filter team members"}),(0,a.tZ)(Ue.Z,{isOpen:!!q,onRequestClose:function(){return Y(null)},children:q?(0,a.tZ)(Gn,{email:q,onInvite:function(){E({variables:{email:q,replId:r,type:"rw"}}),Y(null)},onCancel:function(){return Y(null)}}):null}),(0,a.BX)("div",{className:te().dynamic([["dc131772cdbb2add",[ce.j.mobileMax]]])+" "+(he()("multiplayers-list",{"is-empty":$})||""),children:[(null===j||void 0===j?void 0:j.withPermission.length)?(0,a.tZ)("div",{className:te().dynamic([["dc131772cdbb2add",[ce.j.mobileMax]]])+" list-heading",children:(0,a.BX)(dn.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(pn.Z,{size:12}),(0,a.BX)(yn.Z,{foreground:2,size:"small",children:[null===j||void 0===j?void 0:j.withPermission.length," member",1===(null===j||void 0===j?void 0:j.withPermission.length)?"":"s"," with access"]})]})}):null,null===j||void 0===j?void 0:j.withPermission.map((function(e){return(0,a.tZ)(Un,{value:e.username,image:e.image,statusText:"(can edit)",type:"member",onButtonPress:W?function(){k.loading||x({variables:{replId:r,username:e.username}})}:void 0,Icon:Z.Z},e.id)})),!!F&&(0,a.tZ)("div",{className:te().dynamic([["dc131772cdbb2add",[ce.j.mobileMax]]])+" list-heading",children:(0,a.BX)(dn.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(pn.Z,{size:12}),(0,a.BX)(yn.Z,{foreground:2,size:"small",children:[(0,Mn.Z)("guest",F,!0),"with access"]})]})}),null===L||void 0===L?void 0:L.users.map((function(e){return(0,a.tZ)(Un,{value:e.username,image:e.image,statusText:"(can edit)",type:"guest",onButtonPress:W?function(){k.loading||x({variables:{replId:r,username:e.username}})}:void 0,Icon:Z.Z},e.id)})),null===z||void 0===z?void 0:z.map((function(e){return(0,a.tZ)(Un,{value:e.email,statusText:"(pending)",onButtonPress:W?function(){G.loading||_({variables:{replId:r,email:e.email}})}:void 0,Icon:Z.Z},e.email)})),!V&&(null===j||void 0===j?void 0:j.withoutPermission.length)?(0,a.tZ)("div",{className:te().dynamic([["dc131772cdbb2add",[ce.j.mobileMax]]])+" list-heading",children:(0,a.BX)(dn.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(fn.Z,{size:12}),(0,a.BX)(yn.Z,{foreground:2,size:"small",children:[(0,Mn.Z)("member",null===j||void 0===j?void 0:j.withoutPermission.length,!0),"without access"]})]})}):null,!V&&(null===j||void 0===j?void 0:j.withoutPermission.map((function(e){return(0,a.tZ)(Un,{value:e.username,image:e.image,type:"member",onButtonPress:H?function(){b.loading||y({variables:{replId:r,username:e.username,type:"rw"}})}:void 0,Icon:gn.Z},e.id)}))),(null===j||void 0===j?void 0:j.teamAdmins.length)?(0,a.tZ)("div",{className:te().dynamic([["dc131772cdbb2add",[ce.j.mobileMax]]])+" list-heading",children:(0,a.BX)(dn.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(hn.Z,{size:12}),(0,a.tZ)(yn.Z,{foreground:2,size:"small",children:"Team admins cannot be removed from repls"})]})}):null,null===j||void 0===j?void 0:j.teamAdmins.map((function(e){return(0,a.tZ)("div",{className:te().dynamic([["dc131772cdbb2add",[ce.j.mobileMax]]])+" "+(he()("multiplayer-item",{"is-editable":H})||""),children:(0,a.BX)(dn.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(vn.Z,{size:"s",url:e.image}),(0,a.tZ)("div",{className:te().dynamic([["dc131772cdbb2add",[ce.j.mobileMax]]])+" label",children:v?(0,a.tZ)(wn.gr,{source:e.username,match:v}):e.username})]})},e.id)})),$?(0,a.BX)(yn.Z,{foreground:2,align:"center",children:['No members matching "',v,'" found']}):null]}),H||s?null:(0,a.tZ)(yn.Z,{foreground:2,size:"small",children:"Only admins can add and remove members to multiplayer"}),H&&V?(0,a.tZ)(Bn.Z,{replId:r}):null]}),(0,a.tZ)(te(),{id:"dc131772cdbb2add",dynamic:[ce.j.mobileMax],children:".root.__jsx-style-dynamic-selector{padding:var(--space-16);color:var(--foreground-default)}.multiplayers-list.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:300px;overflow-y:auto}.multiplayers-list.is-empty.__jsx-style-dynamic-selector{display:grid;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);word-break:break-word}.multiplayer-item.__jsx-style-dynamic-selector{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector{padding-right:var(--space-8)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector:hover{background-color:var(--background-root)}.list-heading.__jsx-style-dynamic-selector{padding:var(--space-16)var(--space-16)0}.label.__jsx-style-dynamic-selector{margin-right:auto}.information-icon-container.__jsx-style-dynamic-selector{margin-left:5px}@media screen and (min-width:".concat(ce.j.mobileMax,"px){.root.__jsx-style-dynamic-selector{padding:var(--space-48)}}")})]})}var Xn=t(15153),Nn=t(12215);function On(e){var n=e.children,t=e.showPopover,r=(0,Nn.Z)("announcement","add-guest-new-user"),o=r.shouldDisplay,c=r.register,s=r.dismiss,u=(0,i.Z)(l.useState(!1),2),d=u[0],p=u[1],f=(0,i.Z)(l.useState(!1),2),h=f[0],v=f[1];l.useEffect((function(){t&&!h&&c()}),[h,c,t]);var m=o&&!h;return(0,a.BX)(Y.Z,{onClickOutside:function(){return v(!0)},isOpen:m,showArrow:!0,borderColor:"var(--accent-purple-default)",children:[n,(0,a.BX)(dn.gC,{spacing:2,align:"stretch",children:[(0,a.BX)(dn.Ug,{spacing:1,children:[(0,a.tZ)(Xn.Z,{}),(0,a.tZ)(Zn.Z,{level:5,children:"Invite guests to your repl!"})]}),(0,a.BX)(yn.Z,{children:[" ","Add external guests to your repl for interviews and collaborative projects."," "]}),(0,a.tZ)(dn.Ug,{spacing:1,justify:"end",children:(0,a.tZ)(Cn.Z,{loading:d,onClick:function(){p(!0),(0,I.j)(I.U3.ADD_GUEST_POPOVER_DISMISSED),s()},children:"Got it"})})]})]})}var Ln=t(11181);function zn(e){var n=e.replId,t=function(e){var n=(0,S.Z)({},Je,e);return T.a(rn,n)}({variables:{replId:n},pollInterval:8e3}),r=t.data,o=t.loading,c=(0,mn.Z)(),s=c.showConfirm,u=c.showError,d=(0,i.Z)(l.useState(!1),2),p=d[0],f=d[1],h=(0,i.Z)(function(e){var n=(0,S.Z)({},Je,e);return M.D(on,n)}({onCompleted:function(e){var t,r=null===(t=e.addMultiplayerUser.user)||void 0===t?void 0:t.username;r&&((0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"username"}),s("Added @".concat(r)))}}),2),v=h[0],m=h[1],g=(0,i.Z)(function(e){var n=(0,S.Z)({},Je,e);return M.D(an,n)}({onError:function(e){return u(e.message)},onCompleted:function(e){var t,r=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;r&&((0,I.j)(I.U3.MP2_REMOVED_USER_PERMISSION,{replId:n,username:r}),s("".concat(r," removed")))}}),2),y=g[0],b=g[1],w=(0,i.Z)(cn({update:function(e,t){var r,i=null===(r=t.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var o=i.email;return(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),void s("Invited ".concat(o," via email"))}if("ReplPermission"===i.__typename){var a;e.modify({id:e.identify({__typename:"Repl",id:n}),fields:{permissions:function(n){var t=e.writeFragment({data:i,fragment:tn});return(0,_e.Z)(n).concat([t])}}});var l=null===(a=i.user)||void 0===a?void 0:a.username;if(!l)return;(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),s("Invited @".concat(l))}}else u(i.message)}}),2),x=w[0],k=w[1],C=(0,i.Z)(un({onError:function(e){return u(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;(0,I.j)(I.U3.MP2_REMOVED_EMAIL_INVITE,{replId:n,email:t}),s("invite for ".concat(t," deleted"))}}else u(e.deleteMultiplayerInvite.message)}}),2),R=C[0],E=C[1];l.useEffect((function(){var e=m.error||k.error;e&&(e.message.includes("reached the limit")?f(!0):u(e.message))}),[m.error,k.error,u]);var D="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null,U=null===r||void 0===r?void 0:r.currentUser,_=null===D||void 0===D?void 0:D.permissions.reduce((function(e,n){return n.user?(0,_e.Z)(e).concat([n.user.username]):e}),[]),G=null===D||void 0===D?void 0:D.currentUserPermissions.editMultiplayers,B=Boolean(D&&!D.permissions.length&&!D.multiplayerInvites.length),A=(null===D||void 0===D?void 0:D.permissions)?D.permissions.length:null;return(0,a.BX)("div",{className:"jsx-7043475ed4bd7433 root",children:[(0,a.BX)(dn.gC,{spacing:2,align:"stretch",children:[G&&_&&D?(0,a.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,a.tZ)(Dn,{existingUsernames:_,onSubmit:function(e){!!!e.match(/.+@.+/)||k.loading?m.loading||v({variables:{username:e,replId:D.id,type:"rw"}}):x({variables:{email:e,replId:D.id,type:"rw"}})}})}):null,(0,a.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,a.BX)(Zn.Z,{level:5,foreground:o?3:1,children:[null!==A&&(null===U||void 0===U?void 0:U.isSubscribed)?"".concat((0,Mn.Z)("multiplayer",A,!0)):null,null===A||(null===U||void 0===U?void 0:U.isSubscribed)?null:"".concat(A,"/").concat(50," ").concat((0,Mn.Z)("multiplayer",A))," ",o||(null===U||void 0===U?void 0:U.isSubscribed)?null:(0,a.tZ)("a",{onClick:function(){return f(!0)},"aria-label":"Click to upgrade for unlimited invites","data-microtip-position":"top",role:"tooltip",className:"jsx-7043475ed4bd7433 info-tooltip",children:(0,a.tZ)(_n.Z,{})}),o?"Loading...":null]})}),B?(0,a.tZ)("div",{className:"jsx-7043475ed4bd7433 empty-list",children:(0,a.BX)(dn.Ug,{align:"center",justify:"center",children:[(0,a.tZ)("div",{className:"jsx-7043475ed4bd7433",children:"No one is here"}),(0,a.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,a.tZ)("img",{src:"/public/images/rainy-computer.png",alt:"raindrops falling onto an open laptop",className:"jsx-7043475ed4bd7433"})})]})}):(0,a.BX)("div",{className:"jsx-7043475ed4bd7433 multiplayers-list",children:[null===D||void 0===D?void 0:D.permissions.map((function(e){var t=e.user,r=e.type;return t?(0,a.BX)("div",{className:"jsx-7043475ed4bd7433 "+(he()("multiplayer-item",{"is-editable":D.currentUserPermissions.editMultiplayers})||""),children:[(0,a.tZ)(vn.Z,{size:"s",url:t.image}),(0,a.BX)("div",{className:"jsx-7043475ed4bd7433 label",children:[t.username," ",r===P.aQ.Rw?" (can edit)":null]}),D.currentUserPermissions.editMultiplayers?(0,a.tZ)(Cn.Z,{border:!1,filled:!1,"aria-label":"Remove member",role:"tooltip","data-microtip-position":"left",onClick:function(){b.loading||y({variables:{replId:n,username:t.username}})},children:(0,a.tZ)(Z.Z,{size:12})}):null]},t.id):null})),null===D||void 0===D?void 0:D.multiplayerInvites.map((function(e){return(0,a.BX)("div",{className:"jsx-7043475ed4bd7433 "+(he()("multiplayer-item",{"is-editable":G})||""),children:[(0,a.tZ)(vn.Z,{size:"s"}),(0,a.BX)("div",{className:"jsx-7043475ed4bd7433 label",children:[e.email," (pending)"]}),G?(0,a.tZ)(Cn.Z,{border:!1,filled:!1,"aria-label":"Remove email invite",role:"tooltip","data-microtip-position":"left",onClick:function(){E.loading||R({variables:{replId:n,email:e.email}})},children:(0,a.tZ)(Z.Z,{size:12})}):null]},e.email)}))]})]}),(0,a.tZ)(Ln.Z,{isOpen:p,onClose:function(){return f(!1)},trackingInfo:{context:"workspace-multiplayer-header"}}),(0,a.tZ)(te(),{id:"7043475ed4bd7433",children:".root.jsx-7043475ed4bd7433{color:var(--foreground-default)}.multiplayers-list.jsx-7043475ed4bd7433,.empty-list.jsx-7043475ed4bd7433{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:200px}.multiplayers-list.jsx-7043475ed4bd7433{overflow-y:auto;padding:var(--space-8)0}.multiplayer-item.jsx-7043475ed4bd7433{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-4)var(--space-16);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.multiplayer-item.is-editable.jsx-7043475ed4bd7433{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-7043475ed4bd7433:hover{background-color:var(--background-root)}.label.jsx-7043475ed4bd7433{margin-right:auto;padding-left:var(--space-8)}.info-tooltip.jsx-7043475ed4bd7433{display:inline-block}.info-tooltip.jsx-7043475ed4bd7433,.info-tooltip.jsx-7043475ed4bd7433:hover,.info-tooltip.jsx-7043475ed4bd7433:focus{color:var(--foreground-default);border:none;outline:none}.empty-list.jsx-7043475ed4bd7433 img.jsx-7043475ed4bd7433{display:block;height:200px;opacity:60%}"})]})}function jn(e){var n=e.replId;return(0,a.BX)("div",{className:te().dynamic([["73cdb9c447ce4102",[ce.j.mobileMax]]]),children:[(0,a.BX)(dn.gC,{spacing:2,align:"stretch",children:[(0,a.tZ)(Zn.Z,{level:4,children:"Invite"}),(0,a.tZ)(zn,{replId:n}),(0,a.tZ)(Bn.Z,{replId:n})]}),(0,a.tZ)(te(),{id:"73cdb9c447ce4102",dynamic:[ce.j.mobileMax],children:"div.__jsx-style-dynamic-selector{padding:var(--space-16)}@media screen and (min-width:".concat(ce.j.mobileMax,"px){div.__jsx-style-dynamic-selector{padding:var(--space-32)}}")})]})}var Wn=t(18172),Fn=t(71171),Hn=t.n(Fn),Vn=t(68963),$n=t(95068),Kn=t(12727),qn=t(88055),Yn=t(8357),Qn=t(72676),Jn=t(57416),et=t(66421),nt=((0,c.cn)(null,(function(e,n,t){var r=e(Kn.Eh).find((function(e){return e.isDialog}));r?n(qn.$,r.paneId):n(tt,t)})),(0,c.cn)(null,(function(e,n,t){var r=e(Kn.Eh).find((function(e){return e.isDialog}));if(r){var i=e(r.data);i.type!==i.type?(n(qn.$,r.paneId),n(tt,t)):n(Yn.v,{paneId:r.paneId,data:t.pane})}else n(tt,t)}))),tt=(0,c.cn)(null,(function(e,n,t){if(!e(Kn.Eh).find((function(e){return e.isDialog}))){var r=e($n.g4),i=e(Kn.CK),o=Hn()(),a=i.x+i.width,l=i.y+i.height,c=t.maxWidth||a,s=t.maxHeight||l,u=Math.min(c,.8*a),d=Math.min(s,.8*l),p={width:u,height:d,x:a/2-u/2-i.x,y:l/2-d/2-i.y},f=(0,Wn.ZP)(r,(function(e){try{(0,Vn.m)(e,{id:Hn()(),isFloating:!0,panes:[o],rect:p})}catch(t){throw n(et.xm,{error:t}),t}}));n(Qn.iH,f),n(Jn.W1,o);var h=(0,Kn.z)(o),v=e(h);n(Jn.W1,o),n(h,(0,se.Z)((0,S.Z)({},v),{isDialog:!0})),n(v.data,t.pane)}})),rt=(0,c.cn)(null,(function(e,n){var t=e(Kn.Eh).find((function(e){return e.isDialog}));t&&n(qn.$,t.paneId)})),it=t(14924),ot=t(35642),at=t(26082),lt=t(17495),ct=t(42325);function st(e){var n,t=e.replId,r=e.onDone,o=e.isResubmit,l=e.lastUpdated,c=e.openIOtesterPane,s=(0,Q.Z)().iotester,u=(0,ct.CH)({variables:{replId:t}}),d=s.lastRunAt.getTime()>l,p=(0,lt.xh)({variables:{replId:t}}).data,f="Repl"===(null===p||void 0===p?void 0:p.repl.__typename)?p.repl:null,h=(null===f||void 0===f?void 0:f.template)||null,v=(null===h||void 0===h?void 0:h.dueDate)||null,g=(new Date).toISOString(),Z=(0,mn.Z)(),k=Z.showConfirm,C=Z.showError,I=(0,i.Z)((0,lt.xA)({variables:{replId:t},onCompleted:function(e){var n=e.submitRepl;"UserError"!==n.__typename?"Repl"===n.__typename&&(k("Repl submitted"),r()):C(n.message)},onError:function(e){C(e.message)}}),2),P=I[0],S=I[1],R=d&&s.lastRunDidPass;return"Repl"===(null===(n=u.data)||void 0===n?void 0:n.repl.__typename)&&u.data.repl.ioTests.length>0&&!R?(0,a.BX)(y.Z,{css:[w.l0.colWithGap(24)],children:[(0,a.tZ)(b.h,{variant:"headerDefault",level:2,children:d?"Fix test failures before submitting":"Run tests before submitting"}),(0,a.tZ)(b.x,{multiline:!0,children:d?"Input/Output tests did not pass.":"Input/Output tests have not been run since this Repl was last changed."}),(0,a.BX)(y.Z,{css:[w.l0.rowWithGap(12),w.l0.justify.end],children:[(0,a.tZ)(m.ZP,{disabled:S.loading,colorway:"primary",onClick:function(){c(),r()},text:"View tests"}),(0,a.tZ)(m.ZP,{disabled:S.loading,onClick:function(){return P()},iconLeft:(0,a.tZ)(x.Z,{}),text:"Submit anyway"})]})]}):(0,a.BX)(y.Z,{css:[w.l0.colWithGap(24)],children:[(0,a.tZ)(b.h,{variant:"headerDefault",level:2,children:o?" Resubmit Repl":"Submit Repl"}),(0,a.tZ)(b.x,{multiline:!0,children:o?"This will re-notify Team admins about your submission.":"This will submit your Repl for review and notify the Team's admins."}),v&&v<g?(0,a.tZ)(b.x,{multiline:!0,css:[w.l0.color.accentNegativeStronger],children:"Note: Your submission is past the due date and will be marked late."}):null,(0,a.BX)(y.Z,{css:[w.l0.rowWithGap(12),w.l0.justify.end],children:[(0,a.tZ)(m.ZP,{disabled:S.loading,onClick:r,text:"Cancel"}),(0,a.tZ)(m.ZP,{colorway:"primary",disabled:S.loading,onClick:function(){return P()},iconLeft:(0,a.tZ)(x.Z,{}),text:o?"Submit again":"Submit"})]})]})}var ut=t(40381),dt=t(65456),pt=t(48551),ft=t(37424),ht=t(19923);function vt(){var e=(0,R.Z)(["\n  query UpdateModelSolutionModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        origin {\n          id\n          ...TeamProfileRepl\n          template {\n            id\n            dueDate\n          }\n          unitTests {\n            tests {\n              id\n            }\n          }\n          ioTests {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return vt=function(){return e},e}function mt(){var e=(0,R.Z)(["\n  mutation UpdateModelSolution($input: UpdateReplTemplateModelSolutionInput!) {\n    updateReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return mt=function(){return e},e}var gt={},Zt=(0,E.Ps)(vt(),ht.vs);var yt=(0,E.Ps)(mt(),ht.vs);var bt,wt=t(28479),xt=function(e){var n,t,r,o,c,s,u,d,p,f=e.replId,h=e.onDone,m=(0,mn.Z)(),g=m.showConfirm,Z=m.showError,y=function(e){var n=(0,S.Z)({},gt,e);return T.a(Zt,n)}({variables:{replId:f},onCompleted:function(e){var n,t,r=e.repl;"Repl"===r.__typename&&(null===(n=r.origin)||void 0===n||null===(t=n.template)||void 0===t?void 0:t.modelSolution)&&"ReplTemplateModelSolution"===r.origin.template.modelSolution.__typename&&(E(r.origin.template.modelSolution.visibleAfterSubmitting),_(r.origin.template.modelSolution.visibleAfterPassingTests),A(r.origin.template.modelSolution.visibleAfterDueDate))}}),b=y.data,w=y.loading,k=(0,i.Z)(function(e){var n=(0,S.Z)({},gt,e);return M.D(yt,n)}({onError:function(e){return Z(e)},onCompleted:function(){g("Updated solution"),h()}}),2),C=k[0],I=k[1],P=(0,i.Z)(l.useState(!1),2),R=P[0],E=P[1],D=(0,i.Z)(l.useState(!1),2),U=D[0],_=D[1],G=(0,i.Z)(l.useState(!1),2),B=G[0],A=G[1],X=(0,i.Z)(l.useState(),2),N=X[0],O=X[1],L=(0,ft.H)();if(l.useEffect((function(){var e="Students can ";if(R||B||U){e+="view the solution after";var n=[];R&&n.push("submitting their project"),U&&n.push("passing all tests"),B&&n.push("the due date has passed");for(var t=0;t<n.length;t++)t>0&&(e+=",",t===n.length-1&&(e+=" and")),e+=" "+n[t];e+="."}else e+="never view the solution.";O(e)}),[R,U,B]),w)return(0,a.tZ)(v.G7,{css:[v.l0.center],children:(0,a.tZ)(ve.Z,{})});var z="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&"Team"===(null===(n=b.repl.owner)||void 0===n?void 0:n.__typename)&&(null===(t=b.repl.owner)||void 0===t?void 0:t.id),j="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&(null===(r=b.repl.origin)||void 0===r||null===(o=r.template)||void 0===o?void 0:o.modelSolution);if(!j)return null;var W=j.id,F="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&((null===(c=b.repl.origin)||void 0===c?void 0:c.ioTests.length)||(null===(s=b.repl.origin)||void 0===s||null===(u=s.unitTests)||void 0===u?void 0:u.tests.length)),H="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&(null===(d=b.repl.origin)||void 0===d||null===(p=d.template)||void 0===p?void 0:p.dueDate);return(0,a.tZ)("form",{onSubmit:function(e){e.preventDefault(),z&&W&&C({variables:{input:{teamId:z,solutionId:W,visibleAfterSubmitting:R,visibleAfterPassingTests:U,visibleAfterDueDate:B}}})},children:(0,a.BX)(v.G7,{css:[v.l0.colWithGap(24)],children:[(0,a.tZ)(v.h4,{level:1,variant:"headerDefault",children:"Update solution"}),(0,a.BX)(v.G7,{css:[v.l0.colWithGap(16)],children:[(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8)],children:[(0,a.tZ)(v.XZ,{id:L("availableAfterSubmitting"),checked:R,onChange:function(){return E(!R)}}),(0,a.tZ)("label",{htmlFor:L("availableAfterSubmitting"),children:(0,a.tZ)(v.xv,{children:"Available after submitting"})})]}),(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8)],children:[(0,a.tZ)(v.XZ,{id:L("availableAfterPassingTests"),checked:U,onChange:function(){return _(!U)}}),(0,a.tZ)("label",{htmlFor:L("availableAfterPassingTests"),children:(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(4)],children:[(0,a.tZ)(v.xv,{children:"Available after passing tests"}),(0,a.BX)(v.xv,{children:["(",F?"".concat(F," ").concat((0,Mn.Z)("test",F)," defined"):"no tests exist yet",")"]})]})})]}),(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8),{verticalAlign:"baseline"}],children:[(0,a.tZ)(v.XZ,{id:L("availableAfterDueDate"),checked:B,onChange:function(){return A(!B)}}),(0,a.tZ)("label",{htmlFor:L("availableAfterDueDate"),children:(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(4)],children:[(0,a.tZ)(v.xv,{children:"Available after due date"}),(0,a.BX)(v.xv,{css:{textDecoration:"italic"},children:["(",H?(0,wt.p)(H):"no due date set yet",")"]})]})})]})]}),(0,a.tZ)(v.E_,{text:"".concat(N),colorway:R||U||B?"positive":"negative"}),(0,a.tZ)(v.G7,{css:{alignItems:"end"},children:(0,a.tZ)(v.zx,{stretch:!1,colorway:"primary",text:"".concat(I.loading?"Saving...":"Save"),iconLeft:(0,a.tZ)(x.Z,{}),disabled:I.loading})})]})})},kt=(bt={},(0,it.Z)(bt,P.Sy.PublishTemplate,"Publish project"),(0,it.Z)(bt,P.Sy.EditTemplate,"Edit project"),(0,it.Z)(bt,P.Sy.Submit,"Submit"),(0,it.Z)(bt,P.Sy.Resubmit,"Resubmit"),(0,it.Z)(bt,P.Sy.UpdateModelSolution,"Update solution"),bt);function Ct(e){var n=e.cta,t=e.replId,r=e.isGroupProject,o=e.openIOtesterPane,c=(0,i.Z)(l.useState(null),2),s=c[0],u=c[1],d=function(){return u(null)},p=(0,ut.Z)(),f=(0,Q.Z)().fs,h=(0,i.Z)(l.useState(0),2),v=h[0],Z=h[1];l.useEffect((function(){if(p&&!(0,pt.T3)(p)&&!(0,pt.sL)(p)){var e=f.watchTextFile(p,{onChange:function(e){e.changeSource===dt.Fl.Local&&Z(Date.now())}});return e}}),[p,f,Z]);var y=Boolean(s&&[P.Sy.PublishTemplate,P.Sy.EditTemplate].includes(s));return l.useEffect((function(){n===P.Sy.ReviewSubmission&&(ot.Z.get("annotations/educationModalDismissed")||(u(n),ot.Z.set("annotations/educationModalDismissed",!0)))}),[n]),(0,a.BX)(a.HY,{children:[kt[n]&&(0,a.tZ)(m.ZP,{onClick:function(){return u(n)},text:kt[n],iconLeft:(0,a.tZ)(x.Z,{})}),(0,a.tZ)(g.Z,{isOpen:s===P.Sy.Submit||s===P.Sy.Resubmit,onRequestClose:d,maxWidth:512,children:(0,a.tZ)(st,{replId:t,onDone:d,isResubmit:s===P.Sy.Resubmit,lastUpdated:v,openIOtesterPane:o})}),(0,a.tZ)(Ue.Z,{preventClose:!0,isOpen:y,onRequestClose:d,width:r?"large":"medium",children:(0,a.tZ)(at.Z,{replId:t,onDone:d})}),(0,a.tZ)(g.Z,{isOpen:s===P.Sy.UpdateModelSolution,onRequestClose:d,maxWidth:600,children:(0,a.tZ)(xt,{replId:t,onDone:d})})]})}var It=t(41238),Pt={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"K"},St={type:"context",icon:(0,a.tZ)(It.Z,{}),label:"",description:"Type a command...",keyboardShortcut:Pt},Rt=(0,c.cn)(!1),Et=(0,c.cn)(null,(function(e,n,t){if(e(Rt))return n(Tt,null),void n(Rt,!1);t&&n(Tt,t),n(Rt,!0)})),Tt=(0,c.cn)(null),Dt=(0,c.cn)((function(e){var n=e(Ut);return{data:St,commands:function(){return n}}})),Ut=(0,c.cn)([]),_t=(0,c.cn)((function(e){var n=e(Dt),t=e(Tt);return t?[n,t]:n})),Gt=t(70917),Bt=t(29163),Mt=t(5257),At=t(99534),Xt=(0,Gt.iv)([v.l0.align.center,v.l0.p(4),v.l0.borderRadius(8),v.l0.rowWithGap(4),{fontSize:v.TV.fontSizeDefault,lineHeight:"normal"}]),Nt=(0,Gt.iv)({color:"inherit"});function Ot(e){var n,t=null===(n=e.highlightRanges)||void 0===n?void 0:n.filter((function(e){return e.to>0}));return(0,a.BX)(v.Tg,{elevated:!0,style:{color:e.active?v.TV.foregroundDefault:v.TV.foregroundDimmer},css:Xt,children:[e.icon,(0,a.tZ)(v.xv,{css:Nt,children:(null===t||void 0===t?void 0:t.length)?(0,a.tZ)(wn.xK,{style:{color:(e.active,v.TV.foregroundDimmest)},matchStyle:{fontWeight:v.TV.fontWeightBold,color:v.TV.foregroundDefault},source:e.label,matches:t.map((function(e){return{column:e.from,length:e.to-e.from}}))}):e.label})]})}var Lt=v.KD.button;function zt(e){var n=e.onClick,t=(0,At.Z)(e,["onClick"]);return(0,a.tZ)(Lt,{css:[v.l0.reset.button],onClick:n,children:(0,a.tZ)(Ot,(0,S.Z)({},t))})}var jt=t(33279),Wt=(0,Gt.iv)([v.l0.p(8),v.l0.rowWithGap(4),v.l0.align.center,v.l0.justify.spaceBetween]),Ft=(0,Gt.iv)([v.l0.rowWithGap(4),v.l0.align.center,v.l0.flex.growAndShrink(1)]);function Ht(e){var n=e.content||(0,a.BX)(a.HY,{children:[(Array.isArray(e.item)?e.item:[e.item]).map((function(e,n){return(0,a.tZ)(Ot,{icon:e.icon,label:e.label,active:e.active,highlightRanges:e.highlightRanges},e.label+n)})),e.description?(0,a.tZ)(v.xv,{variant:"small",color:e.active?"dimmer":"dimmest",css:[v.l0.flex.growAndShrink(1)],children:e.description}):null]});return(0,a.BX)(v.Tg,{elevated:e.active,css:Wt,children:[(0,a.tZ)(v.G7,{css:Ft,children:n}),e.keyboardShortcut?(0,a.tZ)(jt.Z,{shortcut:e.keyboardShortcut}):null]})}var Vt=y.K.div;function $t(e){var n=e.isLoading||e.items.length?e.items.map((function(n,t){var r=n.data,i=r.label,o=r.icon,l=n.match.render,c=t===e.highlightedIndex,s=l&&"content"in l?l.content:void 0,u=l&&"ranges"in l?l.ranges:void 0;return(0,a.tZ)(Vt,(0,se.Z)((0,S.Z)({css:[{cursor:"pointer"}]},e.getItemProps({item:n,index:t})),{children:s?(0,a.tZ)(Ht,{active:c,description:r.description,keyboardShortcut:r.keyboardShortcut,content:s}):(0,a.tZ)(Ht,{active:c,description:r.description,keyboardShortcut:r.keyboardShortcut,item:{icon:o,label:i,active:c,highlightRanges:u}})}),(0,Mt.k)(n))})):null;return(0,a.tZ)(Vt,(0,se.Z)((0,S.Z)({},e.getMenuProps()),{css:[w.l0.flex.growAndShrink(1),w.l0.overflow("auto")],children:n}))}var Kt=(0,l.memo)($t),qt=y.K.div,Yt=y.K.input,Qt=(0,Gt.iv)([w.l0.height("100%"),w.l0.flex.growAndShrink(1),w.l0.color.foregroundDefault,w.l0.display.block,w.l0.py(8),{fontSize:w.TV.fontSizeSubheadDefault,backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:w.TV.foregroundDimmest},"&:hover::placeholder":{color:w.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:w.TV.foregroundDimmest}}]);function Jt(e){var n=(0,Mt.Z)({onSelect:e.onSelect,initialCommand:e.initialCommand}),t=n.combobox;return(0,a.BX)(v.Tg,{elevated:!0,className:e.className,css:[w.l0.flex.growAndShrink(1),w.l0.borderRadius(8),w.l0.overflow("hidden"),w.l0.maxHeight("70vh")],children:[(0,a.BX)(qt,(0,se.Z)((0,S.Z)({},t.getComboboxProps()),{css:[w.l0.rowWithGap(4),w.l0.pl(4),w.l0.pr(8),w.l0.align.center],children:[(0,a.tZ)(y.Z,{css:[w.l0.py(8),w.l0.rowWithGap(4)],children:n.path.map((function(e,t){var r=e.data,i=r.label,o=r.icon,l=i+t,c=function(){n.resetToIndex({index:t,focus:!0})};return 0===t?(0,a.tZ)(Bt.Z,{alt:"Commands",onClick:c,children:n.isLoading?(0,a.tZ)(ve.Z,{}):(0,a.tZ)(It.Z,{})},l):(0,a.tZ)(zt,{label:i,icon:o,onClick:c},l)}))}),(0,a.tZ)(Yt,(0,S.Z)({css:[Qt]},t.getInputProps({value:n.inputValue,autoFocus:!0,ref:n.inputRef,onChange:function(e){return n.setInputValue(e.currentTarget.value)},onKeyDown:function(t){"Enter"===t.key&&0===n.items.length&&e.onSubmit?e.onSubmit(t.currentTarget.value):"ArrowLeft"!==t.key&&"ArrowRight"!==t.key?"Backspace"===t.key&&n.handleBackspace():n.handleLeftRightArrow(t.key)},placeholder:n.placeholder}))),n.keyboardShortcut?(0,a.tZ)(jt.Z,{shortcut:n.keyboardShortcut}):null]})),(0,a.tZ)(Kt,{items:n.items,getMenuProps:t.getMenuProps,getItemProps:t.getItemProps,highlightedIndex:t.highlightedIndex,isLoading:n.isLoading})]})}var er=t(58967),nr=t(16965),tr=t(21131),rr=t(88961),ir=t(47875);function or(e,n){if("object"!==typeof n)return null;var t="string"===typeof n.action?n.action:null;if(!t)return null;if("layout"===e){if("split"===t){var r="string"===typeof n.pane?{type:n.pane}:{type:"commands",data:{autoFocus:!1}};return{action:n.action,placement:n.placement,pane:r}}if("reset"===t)return{action:"resetLayout"}}if("file"===e){var i="string"===typeof n.path?n.path:null;return i&&("openOrCreate"===n.action||"delete"===n.action)?{action:n.action,path:i}:null}if("tabs"===e){if("close"===t&&"string"===typeof n.type)return{action:"closeTab",type:n.type};if("open"===t)return{action:"openTab",pane:"string"===typeof n.type?{type:n.type}:{type:"commands",data:{autoFocus:!1}}}}return"codegen"===e&&"generate"===t&&"string"===typeof n.prompt?{action:"generate",prompt:n.prompt}:null}var ar=t(29351),lr=t(50146),cr=t(74275),sr=t(12771),ur=t(11731),dr=t(54992),pr=(0,c.cn)(null,(function(e,n,t){var r=e((0,Kn.z)(t.fromPaneId));if(r.isDialog){n(qn.$,r.paneId);var i=e(Kn.Eh).some((function(e){return"tile"===e.type}));n(ar.g2,i?{pane:t.data,placement:"leftOf",makeActive:!0}:{pane:t.data,placement:"replace",makeActive:!0})}else n(Yn.v,{paneId:t.fromPaneId,data:t.data,makeActive:!0})})),fr=(0,c.cn)(null,(function(e,n,t){var r=e($n.g4),i=(0,sr._F)(r,"topLeft"),o=e(Kn.Eh).find((function(n){return e(n.data).type===t.pane.type}));if(o)n(ur.Oe,o.paneId);else if(i){var a=i.paneGroup.panes.find((function(n){var t=e((0,Kn.z)(n));if(t.isHidden)return!1;var r=e(t.data);return"filetree"!==r.type&&(!t.isCommited&&!(0,dr.Zh)(r.type))}));a?n(Yn.v,{paneId:a,data:t.pane,makeActive:!0}):("debugger"===t.pane.type&&n(ar.gN,{pane:t.pane,edge:"left"}),n(ur.Et,{pane:t.pane,paneGroupPath:i.path,activate:!0,index:0}))}else n(ar.g2,{pane:t.pane,placement:"leftOf",relativeTo:["tiling"],makeActive:!0})}));function hr(){return(0,c.b9)(fr)}var vr=t(90914),mr=t(17780),gr=t(39),Zr=t(3032),yr=t(78120);function br(e){return wr.apply(this,arguments)}function wr(){return(wr=(0,r.Z)((function(e){var n;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:if(!mr.l)throw new Error("Expected apolloClient");return[4,mr.l.query({query:vr.R1,variables:{input:e}})];case 1:if("GenerateCodeResult"!==(n=t.sent().data).generateCode.__typename)throw new Error(n.generateCode.__typename);return[2,n.generateCode.code]}}))}))).apply(this,arguments)}var xr=(0,c.cn)(null,(function(e,n){n(Qn.iH,{tiling:null,floating:[]})})),kr=((0,c.cn)(null,(function(e,n){var t=Hn()(),r=e($n.g4);n(Qn.iH,(0,Wn.ZP)(r,(function(e){(0,Vn.m)(e,{id:Hn()(),relativeTo:["tiling"],placement:"replace",panes:[t]})})))})),(0,c.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){var r,i,a,l,c,s,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:switch(r=t.action,i=t.fs,r.action){case"openOrCreate":return[3,1];case"delete":return[3,7];case"split":return[3,9];case"openTab":return[3,10];case"closeTab":return[3,11];case"resetLayout":return[3,12];case"clearLayout":return[3,13];case"generate":return[3,14]}return[3,17];case 1:return[4,i.stat(r.path)];case 2:return o.sent().exists?[3,6]:[4,i.writeFile(r.path,"")];case 3:return o.sent(),[4,i.flush()];case 4:return o.sent(),[4,i.persist({skipDebounce:!0})];case 5:o.sent(),o.label=6;case 6:return n(Zr.U,{path:r.path}),[3,17];case 7:return[4,i.deleteFile(r.path)];case 8:return o.sent(),[3,17];case 9:return a=e(Jn.J1),n(ar.g2,{pane:r.pane,placement:r.placement,makeActive:!1,relativeTo:a||["tiling"]}),[3,17];case 10:return n(fr,{pane:r.pane}),[3,17];case 11:return"*"===r.type?n(xr,{}):n(lr.AW,r.type),[3,17];case 12:return n(cr.B,{}),[3,17];case 13:return n(xr,{}),[3,17];case 14:return(l=e($n.QP))||(c=e(Kn.Eh).find((function(n){return"codeEditor"===e(n.data).type})))&&"codeEditor"===(s=e(c.data)).type&&(l=s.data.path),l?[4,br({language:(0,gr.Sf)(l),replId:t.replId,prompt:r.prompt})]:[2];case 15:return u=o.sent(),[4,new Promise((function(e,n){if(l)var t=i.watchTextFile(l,{onError:function(t){n(t),e()},onReady:function(n){var r=n.writeChange,i=n.initialContent;r(yr.as.of({from:i.length,insert:u},i.length)),t(),e()}});else n(new Error("Expected path"))}))];case 16:return o.sent(),[3,17];case 17:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}())),Cr="https://llmide.amasad.repl.co";function Ir(e){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch(Cr+"/"+encodeURIComponent(e),{mode:"cors"})];case 1:return[4,n.sent().json()];case 2:return[2,{json:n.sent(),error:null}];case 3:return[2,{json:null,error:n.sent()}];case 4:return[2]}}))}))).apply(this,arguments)}var Sr=(0,c.cn)(!1),Rr=(0,c.cn)(!1);function Er(e){var n=e.isOpen,t=e.onDone,a=(0,Q.Z)().fs,s=(0,nr.Z)(t),u=(0,ir.Q)("flagGhostrunner"),d=(0,ke.Z)(),p=(0,tr.Z)((function(){return(0,c.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){var r,l,c,u,p,f,h,v,m;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e(ir.H).flagGhostrunner?(n(Sr,!0),[4,Ir(t)]):[2];case 1:if((r=o.sent()).error)return n(Sr,!1),n(Rr,!0),[2];if(l=function(e){if("object"!==typeof e)return{error:"not an object",actions:null};var n=e&&"result"in e?e.result:null;if(!Array.isArray(n))return{error:"no commands",actions:null};var t=[],r=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value;if("object"===typeof s){var u=!0,d=!1,p=void 0;try{for(var f,h=Object.entries(s)[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=(0,i.Z)(f.value,2),g=or(v[0],v[1]);g&&t.push(g)}}catch(m){d=!0,p=m}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}}}}catch(m){o=!0,a=m}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return 0===t.length?{error:"no commands",actions:null}:{error:null,actions:t}}(r.json),!l.actions)return n(Sr,!1),n(Rr,!0),[2];c=!0,u=!1,p=void 0,o.label=2;case 2:o.trys.push([2,7,8,9]),f=l.actions[Symbol.iterator](),o.label=3;case 3:return(c=(h=f.next()).done)?[3,6]:(v=h.value,[4,n(kr,{fs:a,action:v,replId:d})]);case 4:o.sent(),o.label=5;case 5:return c=!0,[3,3];case 6:return[3,9];case 7:return m=o.sent(),u=!0,p=m,[3,9];case 8:try{c||null==f.return||f.return()}finally{if(u)throw p}return[7];case 9:return n(Sr,!1),s.current(),[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}())}),[s,a,d]),f=(0,c.b9)(p);return(0,l.useEffect)((function(){if(u&&n&&window.webkitSpeechRecognition){var e=new window.webkitSpeechRecognition;e.onresult=function(e){var n=e.results[0][0].transcript;f(n)},e.start()}}),[f,u,n]),f}function Tr(){var e=(0,c.Dv)(Sr);return(0,c.Dv)(Rr)?(0,a.tZ)(Dr,{}):e?(0,a.tZ)(v.Tg,{elevated:!0,css:[v.l0.coverContainer,v.l0.borderRadius(8),v.l0.center],children:(0,a.tZ)(ve.Z,{})}):null}function Dr(){var e=(0,c.b9)(Rr);return(0,l.useEffect)((function(){var n=setTimeout((function(){e(!1)}),600);return function(){clearTimeout(n)}}),[e]),(0,a.tZ)(v.Tg,{elevated:!0,css:[v.l0.coverContainer,v.l0.borderRadius(8),v.l0.center],children:(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8),v.l0.align.center],children:[(0,a.tZ)(rr.Z,{color:v.TV.accentNegativeDefault}),(0,a.tZ)(v.xv,{children:"Something went wrong, try again"})]})})}function Ur(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=(0,c.b9)(Ut);(0,l.useEffect)((function(){if(n)return t((function(n){return(0,_e.Z)(n).concat([e])})),function(){t((function(n){return n.filter((function(n){return n!==e}))}))}}),[t,e,n])}function _r(){var e=(0,c.Dv)(Rt),n=(0,c.b9)(Et),t=(0,c.Dv)(_t),r=(0,Q.Z)().session,i=(0,er.Z)("commandBar").trackTimeToLoadFileStart;(0,l.useEffect)((function(){return r.onCommandBarToggled((function(t){t!==e&&n()}))}),[r,n,e]),(0,l.useEffect)((function(){r.setIsCommandBarOpen(e)}),[r,e]);var o=Er({onDone:n,isOpen:e});return(0,a.BX)(Ue.Z,{isOpen:e,onRequestClose:function(){n()},hideCloseButton:!0,children:[(0,a.tZ)(Jt,{onSubmit:o,onSelect:function(e){if("openFile"===e.data.type){var t=e.data.deeplink;i(t.path),r.openFile(t.path),r.updateDeeplink(t)}"action"===e.data.type&&e.data.run(),n()},initialCommand:t}),(0,a.tZ)(Tr,{})]})}var Gr=(0,l.memo)(_r),Br=t(95596),Mr=t(39715),Ar=t(95901),Xr=t(9117),Nr=t(36228),Or=t(48869),Lr=t(6625),zr=t(88679),jr=t(48287),Wr=function(e){return e&&e.args?(e.args&&e.args.length>=3&&"sh"===e.args[0]&&"-c"===e.args[1]?e.args.slice(2):e.args).join(" "):""},Fr=function(e){var n=e.hideModal,t=(0,Q.Z)(),c=t.dotReplit,s=t.session,u=(0,Lr.Z)(),d=(0,mn.Z)().showError,p=(0,i.Z)(l.useState(!1),2),f=p[0],h=p[1],g=(0,i.Z)(l.useState(""),2),Z=g[0],y=g[1],b=l.useCallback((function(){n(),s.openFile(zr.Z)}),[s,n]),x=l.useCallback((function(){return d("Failed to update run command, please try again or contact support")}),[d]),k=(0,i.Z)(l.useState(null),2),C=k[0],I=k[1];l.useEffect((function(){var e=function(){var e=(0,r.Z)((function(){var e,n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,c.getConfig()];case 1:return n=r.sent(),u.current?(n.errorMessage?I({error:n.error,errorMessage:n.errorMessage}):I(null),t=null===n||void 0===n||null===(e=n.config)||void 0===e?void 0:e.run,y(Wr(t)),[2]):[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[c,u]);var P=l.useCallback((0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),e=Z?(0,jr.KQ)(Z):(0,jr.xz)("run"),h(!0),[4,c.updateDotReplit([e])];case 1:return t.sent(),n(),[3,4];case 2:return t.sent(),x(),[3,4];case 3:return h(!1),[7];case 4:return[2]}}))})),[Z,x,c,n]);return(0,a.BX)(v.G7,{css:[w.l0.colWithGap(8),w.l0.p(2),f&&w.l0.cursor.progress],children:[(0,a.tZ)(v.h4,{level:1,variant:"text",css:[w.l0.fontWeight.normal,w.l0.color.foregroundDimmer],children:"Run Command"}),C?(0,a.tZ)(v.xv,{children:C.errorMessage}):(0,a.BX)(a.HY,{children:[(0,a.tZ)(v.II,{value:Z,onChange:function(e){return y(e.target.value)},spellCheck:!1}),(0,a.BX)(v.G7,{css:[w.l0.rowWithGap(12),w.l0.mt(12)],children:[(0,a.tZ)(m.ZP,{onClick:b,text:"Advanced"}),(0,a.tZ)(v.G7,{css:w.l0.flex.grow(1)}),(0,a.tZ)(m.ZP,{colorway:"blue",text:"Save",onClick:P})]})]})]})},Hr=t(42895),Vr=t(98146),$r=t(42699),Kr=t(71255),qr=t(85565),Yr=t(80437),Qr=t(97808),Jr=t(41034),ei=t(79500),ni=t(30880),ti=t(57981),ri="https://linkedin.com/sharing/share-offsite";var ii="https://www.facebook.com/dialog/share?display=page&app_id=1775481339348651";var oi=t(64181),ai=function(e){var n=e.lessonSlug,t=e.courseSlug,r=(0,i.Z)((0,c.KO)(oi.yO),1)[0].locale,o=(0,mn.Z)().showConfirm;if(!n||!t)return null;var l=(0,Qr.QW)(t,r),s=(0,Qr.qv)(t,n,r);if(!s)return null;var u=s.ordinalLabel,d=(0,Qr.tD)(l.socialSharingText,s),p="".concat(d," ").concat(l.sharableLink),f=(0,Kr.Z)({text:d,url:l.sharableLink}),h=function(e){var n=e.url;return"".concat(ri,"?url=").concat(encodeURIComponent(n))}({url:l.sharableLink}),g=function(e){var n=e.url,t=e.hashtag,r=e.redirectBackTo,i=new URLSearchParams;i.append("href",n),r&&i.append("redirect_uri",r),t&&(t.startsWith("#")||(t="#".concat(t)),i.append("hashtag",t));var o=i.toString();return"".concat(ii,"&").concat(o)}({url:l.sharableLink,hashtag:l.socialHashtag}),Z=[{url:f,icon:qr.Z,base:Kr.c,cta:"Share on Twitter",color:Yr.Z.brands.twitter},{url:h,icon:ti.Z,base:ri,cta:"",color:Yr.Z.brands.linkedin},{url:g,icon:ni.Z,base:ii,cta:"",color:Yr.Z.brands.facebook}];return(0,a.BX)(y.Z,{children:[(0,a.BX)(y.Z,{css:[w.l0.rowWithGap(16),w.l0.align.center,w.l0.pr(24)],children:[(0,a.tZ)(y.Z,{css:{fontSize:48},children:"\ud83e\udd73"}),(0,a.BX)(b.x,{variant:"headerDefault",children:["Congrats on completing ",u,"!"]})]}),(0,a.tZ)(b.x,{variant:"subheadDefault",css:[w.l0.py(12)],children:"Share your progress"}),(0,a.BX)(y.Z,{css:[w.l0.position.relative,w.l0.borderRadius(8),w.l0.backgroundColor.backgroundHigher,w.l0.py(8),w.l0.px(12)],children:[(0,a.tZ)(y.Z,{css:w.l0.pr(16),children:p}),(0,a.tZ)(v.hU,{css:[w.l0.position.absolute,w.l0.top(8),w.l0.right(8)],alt:"Copy",size:18,tooltipHidden:!0,onClick:function(){o("Copied to clipboard!"),(0,ei.Z)(p),(0,$r.l)({action:"copied_share_text",lessonSlug:n,courseSlug:t,origin:"lesson_complete_modal"})},children:(0,a.tZ)(Jr.Z,{size:16})})]}),(0,a.BX)(y.Z,{css:[w.l0.rowWithGap(16),w.l0.justify.center,w.l0.pt(16),w.l0.align.center],children:[(0,a.tZ)(v.ZP,{outlined:!0,text:"Back to the learning hub",href:"/learn/".concat(t,"/hub")}),(0,a.tZ)(y.Z,{css:[w.l0.rowWithGap(8),w.l0.align.center],children:Z.map((function(e){var r=e.url,i=e.icon,o=e.base,l=e.cta,c=e.color;return(0,a.tZ)(m.ZP,{css:[{backgroundColor:c,color:"white"}],onClick:function(){window.open(r,"_blank"),(0,I.j)(I.U3.EXTERNAL_LINK_VIEWED,{url:o,placement:"lesson-complete-modal",campaign:t,lessonSlug:n})},text:l,iconLeft:(0,a.tZ)(i,{})},r)}))})]})]})},li=function(e){var n=e.lesson,t=(0,mn.Z)().showError,r=(0,Vr.$0)().fireCircularBurstFrom,o=(0,l.useRef)(null),c=(0,Hr.T)(),s=(0,l.useState)(!1),u=s[0],d=s[1],p=(0,i.Z)(function(e){var n=(0,S.Z)({},N,e);return M.D(L,n)}({onError:function(){return t("Something went wrong")},onCompleted:function(e){var i,a;"UpdatedUserCourseLesson"!==(null===(i=e.completeUserCourseLesson)||void 0===i?void 0:i.__typename)?t((null===(a=e.completeUserCourseLesson)||void 0===a?void 0:a.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===n.id?(o.current&&!c&&r({element:o.current}),d(!0)):t("Something went wrong")}}),2),f=p[0],h=p[1].loading;return(0,a.BX)(a.HY,{children:[null!==n.timeCompleted?(0,a.tZ)(v.zx,{ref:o,disabled:!0,text:"Lesson completed \ud83c\udf89",colorway:"primary"}):(0,a.tZ)(v.zx,{iconLeft:h?(0,a.tZ)(ve.Z,{}):void 0,onClick:function(){(0,$r.l)({action:"completed",lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug}),f({variables:{input:{userLessonId:n.id}}})},text:h?"Verifying\u2026":"Mark lesson as complete",colorway:"primary",css:[h&&v.pt.backgroundPulse()]}),(0,a.tZ)(v.u_,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,a.tZ)(ai,{lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug})})]})},ci=t(92162),si=t(87514);function ui(e){var n=e.lesson,t=(0,ci.Un)(),r=(0,ci.$x)(),i=(0,ir.Q)("flagLayoutNavigator");return!t&&i?(0,a.tZ)(v.zx,{colorway:"primary",iconLeft:(0,a.tZ)(si.Z,{}),text:"Show tutorial",onClick:function(){return r()}}):(0,a.tZ)(li,{lesson:n})}var di=t(41664),pi=t.n(di),fi=t(33773),hi=t(36316),vi=t(11554),mi=t(68480);function gi(){return(0,a.tZ)(v.G7,{children:(0,a.tZ)(v.G7,{"aria-label":"Always on","data-microtip-position":"bottom",role:"tooltip",css:[v.l0.width(8),v.l0.height(8),v.l0.borderRadius("full"),v.l0.backgroundColor.accentPositiveDefault,{alignSelf:"start",boxShadow:"0 0 12px "+v.TV.accentPositiveDefault}]})})}function Zi(e){var n=e.repl,t=(0,i.Z)(l.useState(!1),2),r=t[0],o=t[1],c=(0,ir.Q)("flagLayoutNavigator");return(0,a.BX)(Y.Z,{isOpen:r,maxWidth:460,onClickOutside:function(){},padding:0,gap:8,placement:"bottom-start",growToMaxWidth:!0,zIndex:mi.Is-1,elevated:!1,children:[(0,a.BX)(v.G7,{tag:"button",dataCy:"ws-repl-info-container",onClick:function(){o(!0)},css:[v.l0.flex.growAndShrink(1),v.l0.align.center,v.l0.cursor.pointer,v.l0.rowWithGap(8),v.l0.p(4),v.l0.borderRadius(8),v.l0.color.foregroundDefault,r&&{pointerEvents:"none"},{border:"1px solid transparent",backgroundColor:"transparent","&:hover":{borderColor:v.TV.outlineDimmest}}],children:[(0,a.tZ)(hi.Z,{repl:n}),n.isAlwaysOn&&!c?(0,a.tZ)(gi,{}):null,c?null:(0,a.tZ)(v.G7,{css:[v.l0.p(4)],children:(0,a.tZ)(fi.Z,{})})]}),(0,a.tZ)(v.Tg,{background:"default",css:[v.l0.borderRadius(8)],children:(0,a.tZ)(vi.Z,{setIsEditing:o})})]})}var yi=t(18935),bi=t(3462),wi=t(83117),xi=t(92876),ki=t(15794),Ci=t(2858),Ii=(0,Gt.F4)({"0%":{transform:"scale(0.95)",boxShadow:"0 0 0 0 rgba(235, 64, 52, 0.6)"},"50%":{transform:"scale(1)",boxShadow:"0 0 0 8px rgba(235, 64, 52, 0)"},"80%":{transform:"scale(0.95)",boxShadow:"0 0 0 0 rgba(235, 64, 52, 0)"},"100%":{transform:"scale(0.95)",boxShadow:"0 0 0 0 rgba(235, 64, 52, 0)"}}),Pi=function(){var e=(0,r.Z)((function(e){var n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:n="692bb1f",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,ki.LK)("/data/check_version")];case 2:return r.sent().version!==n&&e(),[3,4];case 3:return t=r.sent(),xi.Tb(t),[3,4];case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Si=function(){var e=(0,l.useState)(!1),n=e[0],t=e[1],i=(0,l.useState)(!1),c=i[0],s=i[1],u=(0,l.useContext)(Ci.Z);if((0,l.useEffect)((function(){var e=setInterval((function(){return Pi((function(){(0,I.j)(I.U3.REFRESH_APP_USED,{action:"triggered"}),t(!0)}))}),1728e5);return function(){clearInterval(e)}}),[]),!n)return null;var d=function(){var e=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return s(!0),(0,I.j)(I.U3.REFRESH_APP_USED,{action:"refresh"}),(null===u||void 0===u?void 0:u.fs)?[4,u.fs.flush()]:[3,3];case 1:return e.sent(),[4,u.fs.persist({skipDebounce:!0})];case 2:e.sent(),e.label=3;case 3:return window.location.reload(),s(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,a.BX)(a.HY,{children:[(0,a.BX)(v.G7,{css:[v.l0.position.relative,v.l0.pl(12)],children:[(0,a.tZ)(v.u,{delay:500,tooltip:"You're using an old version of Replit. Refresh this page to get the latest features!",children:(0,a.tZ)(v.zx,{outlined:!0,iconLeft:(0,a.tZ)(wi.Z,{}),text:"Update Workspace",colorway:"grey",onClick:d})}),(0,a.tZ)(v.G7,{css:{position:"absolute",top:1,right:-1,background:"rgba(235, 64, 52, 1)",borderRadius:"50%",height:5,width:5,boxShadow:"0 0 0 0 rgba(235, 64, 52, 1)",transform:"scale(1)",animation:"".concat(Ii," 2s infinite"),zIndex:2}})]}),(0,a.tZ)(v.u_,{isOpen:c,onRequestClose:function(){s(!1)},children:(0,a.BX)(v.G7,{children:[(0,a.tZ)(v.xv,{variant:"subheadDefault",css:[v.l0.pb(8)],children:"Saving your work"}),(0,a.tZ)(v.xv,{children:"Making sure you'll find your work after reloading\u2026"})]})})]})},Ri=t(85485),Ei=t(57996),Ti=t(14868),Di=t(73092),Ui=t(197),_i=t(27668),Gi=t(58889);function Bi(){var e=(0,R.Z)(["\n  fragment ReplEnvironmentNavMenuCurrentUser on CurrentUser {\n    id\n    ...LayoutSidebarCurrentUser\n  }\n  ","\n"]);return Bi=function(){return e},e}function Mi(){var e=(0,R.Z)(["\n  query ReplEnvironmentNavMenu {\n    currentUser {\n      id\n      ...ReplEnvironmentNavMenuCurrentUser\n    }\n  }\n  ","\n"]);return Mi=function(){return e},e}var Ai={},Xi=(0,E.Ps)(Bi(),Gi.d),Ni=(0,E.Ps)(Mi(),Xi);var Oi=t(3411),Li=t(97838),zi=t(26293),ji=t(11070),Wi=t(34385),Fi=t(67003),Hi=t(59387),Vi=t(14317),$i=t(29736),Ki={button:(0,Gt.iv)([v.l0.py(4),v.l0.viewStyle,v.l0.reset.button,v.l0.rowWithGap(2),v.l0.align.center,v.l0.color.foregroundDefault,v.l0.cursor.pointer,{":hover svg":{fill:v.TV.foregroundDefault}}]),surface:(0,Gt.iv)([v.l0.borderRadius(8),v.l0.width(200),v.l0.maxHeight("80vh"),v.l0.maxWidth("80vw"),v.l0.overflowY("auto")]),ctas:(0,Gt.iv)([v.l0.colWithGap(8),v.l0.p(8),{borderBottom:"1px solid",borderColor:v.TV.outlineDimmer}]),items:(0,Gt.iv)([{"& > a:last-of-type":v.l0.borderRadius(0,0,8,8)}]),link:(0,Gt.iv)([v.l0.viewStyle,v.l0.rowWithGap(4),v.l0.color.foregroundDefault,v.l0.p(8),v.l0.align.center,v.gU.listItem]),linkText:(0,Gt.iv)(v.l0.flex.shrink(1))},qi=(0,Gt.iv)([v.l0.reset,v.l0.p(8),v.l0.width("100%"),v.l0.cursor.pointer,v.l0.justify.spaceBetween,v.l0.flex.row,v.l0.align.center,{borderTop:"1px solid ".concat(v.TV.outlineDimmer),backgroundColor:"transparent"}]);function Yi(){var e=(0,Fi.Fg)(),n=e.isDarkColorScheme,t=e.isSaving,r=e.setActiveTheme;return t?(0,a.BX)(v.G7,{tag:"button",disabled:!0,onClick:function(){r($i.Sj)},css:qi,children:[(0,a.tZ)(v.xv,{children:"Saving..."}),(0,a.tZ)(ve.Z,{size:16})]}):n?(0,a.BX)(v.G7,{tag:"button",onClick:function(){r($i.Dy)},css:qi,children:[(0,a.tZ)(v.xv,{children:"Light Theme"}),(0,a.tZ)(Vi.Z,{size:16})]}):(0,a.BX)(v.G7,{tag:"button",onClick:function(){r($i.Sj)},css:qi,children:[(0,a.tZ)(v.xv,{children:"Dark Theme"}),(0,a.tZ)(Hi.Z,{size:16})]})}function Qi(){var e=(0,Wi.Z)(Nr.y.GlobalNavButton),n=function(e){var n=(0,S.Z)({},Ai,e);return T.a(Ni,n)}().data,t=(0,Oi.N)({currentUser:(null===n||void 0===n?void 0:n.currentUser)||void 0}),r=(0,l.useState)(!1),i=r[0],o=r[1],c=(0,l.useState)(null),s=c[0],u=c[1];return(0,a.BX)(a.HY,{children:[(0,a.BX)(Y.Z,{isOpen:i,onClickOutside:function(){return o(!1)},gap:4,padding:0,placement:"bottom-start",children:[(0,a.BX)("button",{ref:e,onClick:function(){return o(!i)},css:Ki.button,children:[(0,a.tZ)(Ei.N2,{color:v.TV.foregroundDefault,size:20}),(0,a.tZ)(Or.Z,{color:v.TV.foregroundDimmest,size:12})]}),(0,a.BX)(v.Tg,{elevated:!0,css:Ki.surface,children:[(0,a.BX)(v.G7,{css:Ki.ctas,children:[(0,a.tZ)(v.zx,{text:"Create",iconLeft:(0,a.tZ)(gn.Z,{}),colorway:"primary",onClick:function(){o(!1),u("create")}}),(0,a.tZ)(v.zx,{text:"Power Up",iconLeft:(0,a.tZ)(Li.Z,{}),outlined:!0,onClick:function(){o(!1),u("upgrade")}})]}),(0,a.tZ)(v.G7,{css:Ki.items,children:t.map((function(e){return(0,a.tZ)(pi(),{passHref:!0,as:e.as,href:e.href,prefetch:!1,children:(0,a.BX)("a",{css:Ki.link,children:[e.icon,(0,a.tZ)(v.xv,{css:Ki.linkText,children:e.label}),e.tag||null]})},e.label)}))}),(0,a.tZ)(Yi,{})]})]}),(0,a.tZ)(zi.Z,{isOpen:"upgrade"===s,onRequestClose:function(){return u(null)},context:"workspace_menu_nav"}),(0,a.tZ)(v.u_,{isOpen:"create"===s,onRequestClose:function(){return u(null)},children:(0,a.tZ)(ji.Z,{})})]})}var Ji=t(30052),eo=v.KD.a;function no(){var e=(0,Ti.Iv)(),n=(0,Ti.W8)(),t=(0,Wi.Z)(Nr.y.SidebarButton),r=(n?"Close":"Open")+" sidebar";return(0,a.tZ)(v.u,{tooltip:r,placement:"right",children:(0,a.tZ)(v.G7,{tag:"button",alt:r,innerRef:t,css:[v.l0.reset.button,v.l0.height(16),v.l0.width(16),v.l0.center,v.l0.cursor.pointer,{opacity:.75,transition:"opacity 0.1s","&:hover":{opacity:1}}],onClick:function(){return e()},children:(0,a.BX)(v.G7,{css:[v.l0.flex.row,v.l0.align.center,{height:14,width:16,border:"1px solid ".concat(v.TV.foregroundDefault),borderRadius:v.TV.borderRadius2}],children:[(0,a.tZ)(v.G7,{css:{height:"100%",width:n?"40%":"20%",backgroundColor:n?v.TV.foregroundDefault:"transparent",borderRight:"1px solid ".concat(v.TV.foregroundDefault),transition:"0.1s ease-out width, 0.1s background-color"}}),(0,a.tZ)(v.G7,{})]})})})}function to(){return(0,a.tZ)(Gt.xB,{styles:[{".toggle":{display:"none"}}]})}function ro(e){var n=e.repl,t=e.currentUser;return(0,ir.Q)("flagLayoutNavigator")?(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8),v.l0.align.center,v.l0.justify.start,v.l0.width("calc(50% - ".concat((ee.al.small+8)/2,"px)")),(0,it.Z)({},(0,Ri.et)("tabletMax"),[v.l0.width("calc(50% - ".concat((ee.al.large+8)/2,"px)"))])],children:[(0,a.tZ)(no,{}),(0,a.tZ)(to,{}),(0,a.tZ)(Qi,{}),(0,a.tZ)(v.G7,{css:[v.l0.flex.shrink(1),v.l0.maxWidth(530),v.l0.align.center,{"& > span":[v.l0.viewStyle,v.l0.flex.shrink(1)]}],children:(0,a.tZ)(Zi,{repl:n})}),(0,a.tZ)(ao,{}),(null===t||void 0===t?void 0:t.isFirewallMode)?(0,a.tZ)(bi.Z,{isWorkspace:!0}):null,(0,a.tZ)(Si,{})]}):(0,a.BX)(v.G7,{css:[v.l0.flex.row,v.l0.align.center,v.l0.width("calc(50% - ".concat((mi.XD+ee.al.small+8)/2,"px)")),(0,it.Z)({},(0,Ri.et)("tabletMax"),[v.l0.width("calc(50% - ".concat((mi.XD+ee.al.large+8)/2,"px)"))])],children:[(0,a.tZ)(pi(),{as:"/~",href:"/home",passHref:!0,children:(0,a.tZ)(eo,{css:[v.l0.center,v.l0.width(32),v.l0.height(32)],children:(0,a.tZ)(Ei.N2,{})})}),(null===t||void 0===t?void 0:t.isFirewallMode)?(0,a.tZ)(bi.Z,{isWorkspace:!0}):null,(0,a.BX)(v.G7,{css:[v.l0.flex.growAndShrink(1),v.l0.maxWidth(530),v.l0.rowWithGap(4),v.l0.align.center,{"& > span":[v.l0.viewStyle,v.l0.flex.shrink(1)]}],children:[(0,a.tZ)(Zi,{repl:n}),(0,a.tZ)(yi.Z,{}),(0,a.tZ)(Si,{})]})]})}var io=(0,Gt.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),oo={root:(0,Gt.iv)([v.l0.height(20),v.l0.width(20),v.l0.center]),pulse:(0,Gt.iv)({animation:"".concat(io," 2s infinite")})};function ao(){var e=(0,Di.Z)(),n=e.isSaving;return e.isOffline?(0,a.tZ)(v.u,{tooltip:"Reconnecting, changes will be synced when you\u2019re online",placement:"right",children:(0,a.tZ)(v.G7,{css:oo.root,children:(0,a.tZ)(Ui.Z,{size:16,color:v.TV.redDefault})})}):n?(0,a.tZ)(v.u,{tooltip:"Saving",placement:"right",children:(0,a.tZ)(v.G7,{css:[oo.root,oo.pulse],children:(0,a.tZ)(_i.Z,{size:16,color:v.TV.foregroundDimmest})})}):(0,a.tZ)(v.u,{tooltip:"Saved",placement:"right",children:(0,a.tZ)(v.G7,{css:oo.root,children:(0,a.tZ)(Ji.Z,{size:16,color:v.TV.foregroundDimmest})})})}var lo=t(61193),co=t(82447),so=function(e){return function(){(0,I.j)(I.U3.SIDEBAR_LAYOUT_NAV_CLICK,{target:e})}},uo={button:(0,Gt.iv)([v.l0.py(4),v.l0.viewStyle,v.l0.reset.button,v.l0.rowWithGap(2),v.l0.align.center,v.l0.color.foregroundDefault,v.l0.cursor.pointer,{":hover svg":{fill:v.TV.foregroundDefault}}]),surface:(0,Gt.iv)([v.l0.borderRadius(8),v.l0.minWidth(80),{"& > a:first-of-type":v.l0.borderRadius(8,8,0,0)},{"& > a:last-of-type":v.l0.borderRadius(0,0,8,8)}]),link:(0,Gt.iv)([v.l0.viewStyle,v.l0.color.foregroundDefault,v.l0.p(8),v.gU.listItem])};function po(){var e=(0,Wi.Z)(Nr.y.AvatarButton),n=function(e){var n=(0,S.Z)({},_,e);return T.a(B,n)}().data,t=(0,l.useState)(!1),r=t[0],i=t[1],o=null===n||void 0===n?void 0:n.currentUser,c=o?(0,co.Ru)(o):null,s=c?[{label:"Profile",trackingLabel:"Profile",as:c.as,href:c.href},{label:"Account",trackingLabel:"Account",dataCy:"avatar-dropdown-account-link",as:"/account",href:"/account"},{trackingLabel:"CLUI",label:"CLUI",as:"/~/cli",href:"/~/cli"},{trackingLabel:"Log out",label:"Log out",href:"/logout"}]:[];return(0,a.BX)(Y.Z,{isOpen:r,onClickOutside:function(){return i(!1)},gap:4,padding:0,placement:"bottom-start",children:[(0,a.BX)("button",{ref:e,onClick:function(){i(!r)},css:uo.button,children:[(0,a.tZ)(v.qE,{size:24,src:(null===o||void 0===o?void 0:o.image)||null,username:(null===o||void 0===o?void 0:o.username)||""}),(0,a.tZ)(Or.Z,{color:v.TV.foregroundDimmest,size:12})]}),(0,a.tZ)(v.Tg,{elevated:!0,css:uo.surface,children:s.map((function(e){return(0,a.tZ)(pi(),{passHref:!0,as:e.as,href:e.href,prefetch:!1,children:(0,a.tZ)("a",{onClick:function(){so(e.trackingLabel)},onKeyDown:function(){so(e.trackingLabel)},css:uo.link,children:e.label})},e.label)}))})]})}var fo=t(97776),ho=t(87653),vo=t(98099),mo=function(e){var n=(0,vo.Z)(e,{onReceiveAnnotationUpdate:function(){}}).generalThread;return(0,l.useMemo)((function(){return n?n.messages.filter((function(e){return!1===e.seen})).length:0}),[n])},go=t(75026),Zo={container:(0,Gt.iv)([v.l0.position.relative]),unreadDot:(0,Gt.iv)([v.l0.width(8),v.l0.height(8),v.l0.backgroundColor.redStronger,v.l0.position.absolute,v.l0.borderRadius("full"),v.l0.top(0),v.l0.right(0)])};var yo=function(){var e=(0,ke.Z)(),n=mo(e),t=(0,c.b9)(ur.rl);return(0,a.BX)(v.G7,{css:Zo.container,children:[n>0?(0,a.tZ)("div",{css:Zo.unreadDot}):null,(0,a.tZ)(v.zx,{text:"Chat",iconLeft:(0,a.tZ)(go.Z,{}),onClick:function(){t()}})]})},bo=[P.Sy.Submit,P.Sy.Resubmit,P.Sy.UpdateModelSolution,P.Sy.PublishTemplate,P.Sy.EditTemplate,P.Sy.ReviewSubmission],wo={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"M"};function xo(e){var n,t,r,o,u,d=(0,s.useRouter)(),p=(0,Q.Z)(),f=p.runner,h=p.presence,m=p.replbox,g=(0,ke.Z)(),Z=(0,J.Z)({presence:h}),y=(0,i.Z)(l.useState(f),2),b=y[0],w=y[1],x=(0,i.Z)(l.useState(!1),2),k=x[0],C=x[1],P=(0,Ar.e)(Nr.y.Run),R=(0,Ar.e)(Nr.y.Share),E=(0,Wi.Z)(Nr.y.NotificationsButton),D=(0,i.Z)(l.useState(!1),2),U=D[0],_=D[1],G=function(e){var n=(0,S.Z)({},H,e);return T.a(K,n)}({variables:{id:g}}).data,B=(0,c.b9)(nt),M=Ce(),A=(0,c.b9)(Et),X=(0,lo.c)("flag-run-button-editor"),N=X.enabled,O=X.loading,L=(0,lo.c)("flag-workspace-header-chat-entry"),z=L.enabled,j=L.loading,W="Repl"===(null===G||void 0===G?void 0:G.repl.__typename)?G.repl:null,F=z&&!j&&(null===W||void 0===W?void 0:W.multiplayers)&&W.multiplayers.length>0,V="replbox"===(null===W||void 0===W||null===(n=W.lang)||void 0===n?void 0:n.engine)&&"html"!==(null===W||void 0===W?void 0:W.lang.id);(0,l.useEffect)((function(){w(V?m:f)}),[V,m,f]);var $=(0,l.useRef)(null),ne=(0,l.useRef)(null),te=(0,l.useRef)(k&&(null===R||void 0===R?void 0:R.isActive)),re=(0,ir.Q)("flagLayoutNavigator");(0,l.useEffect)((function(){te.current&&!(null===R||void 0===R?void 0:R.isActive)&&C(!1),te.current=k&&(null===R||void 0===R?void 0:R.isActive)}),[R,k]),(0,l.useEffect)((function(){(null===R||void 0===R?void 0:R.isActive)&&(k&&ne.current?null===R||void 0===R||R.delegateTooltip(ne.current):R.delegateTooltip($.current))}),[R,k,ne]);var ie="Team"===(null===W||void 0===W||null===(t=W.owner)||void 0===t?void 0:t.__typename),oe=Boolean("Team"===(null===W||void 0===W||null===(r=W.owner)||void 0===r?void 0:r.__typename)&&(null===(o=null===W||void 0===W?void 0:W.owner.capabilities)||void 0===o?void 0:o.isEducationPlan)),ae=bo.find((function(e){return e===(null===W||void 0===W?void 0:W.workspaceCta)})),le=!oe&&(null===W||void 0===W?void 0:W.currentUserPermissions.editMultiplayers);return(0,Xr.x)(wo,{enabled:!oe,run:function(){C(!0)}}),Ur({match:Mr.pl,data:{type:"action",label:"Multiplayer",icon:(0,a.tZ)(Br.Z,{}),description:"Open multiplayer mode",run:function(){C(!0)},keyboardShortcut:wo}},{enabled:!oe}),(0,a.BX)(v.Tg,{elevated:!re,tag:"header",css:[v.l0.height(60),v.l0.flex.row,v.l0.align.center,v.l0.justify.spaceBetween,v.l0.py(8),v.l0.px(12),v.l0.position.relative,!re&&{paddingLeft:40}],children:[(0,a.tZ)(ro,{repl:e.repl,currentUser:e.currentUser}),(0,a.tZ)(v.G7,{innerRef:null===P||void 0===P?void 0:P.delegateTooltip,dataCy:"ws-run-btn",onClick:function(){(null===P||void 0===P?void 0:P.isActive)&&P.next()},css:[v.l0.position.absolute,v.l0.height(42),v.l0.justify.center,{transform:"translate(-50%, -50%)",left:"50%",top:"50%"}],children:!O&&N?(0,a.BX)(a.HY,{children:[(0,a.BX)(Y.Z,{onClickOutside:function(){return _(!1)},isOpen:U,padding:8,children:[(0,a.tZ)(ee.ZP,{runner:b,disableTooltip:null===P||void 0===P?void 0:P.isActive}),(0,a.tZ)(Fr,{hideModal:function(){return _(!1)}})]}),(0,a.tZ)(v.G7,{css:[v.l0.position.absolute,v.l0.right(-29),v.l0.top(8)],children:(0,a.tZ)(v.hU,{alt:"Configure Repl run",size:28,onClick:function(){_((function(e){return!e}))},css:[v.l0.color.foregroundDimmest],children:(0,a.tZ)(Or.Z,{})})})]}):(0,a.tZ)(ee.ZP,{runner:b,disableTooltip:null===P||void 0===P?void 0:P.isActive})}),(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8),v.l0.align.center,v.l0.justify.end],children:[(null===W||void 0===W?void 0:W.lesson)?(0,a.tZ)(ui,{lesson:W.lesson}):null,F?(0,a.tZ)(yo,{}):null,(0,a.tZ)(De,{users:Z,onAvatarClick:M}),ae?(0,a.tZ)(v.G7,{css:[v.l0.pr(8)],children:(0,a.tZ)(Ct,{cta:ae,replId:g,isGroupProject:Boolean(null===W||void 0===W||null===(u=W.template)||void 0===u?void 0:u.isGroupProject),openIOtesterPane:function(){B({pane:{type:"autograder"}})}})}):null,le?(0,a.tZ)(v.G7,{innerRef:$,children:(0,a.tZ)(On,{showPopover:W.currentUserPermissions.inviteGuests,children:(0,a.tZ)(v.zx,{onClick:function(){(0,I.j)(I.U3.INVITE_MODAL_OPENED,{language:W.lang.id,replId:W.id,source:"replEnvironment"}),C(!0)},iconLeft:(0,a.tZ)(q.Z,{}),text:"Invite"})})}):null,(0,a.tZ)(v.hU,{size:24,onClick:function(){A()},tooltipDelay:500,alt:"Search & run commands",tooltipPlacement:"bottom-end",children:(0,a.tZ)(ho.Z,{})}),re?(0,a.BX)(a.HY,{children:[(0,a.tZ)(v.G7,{innerRef:E,children:(0,a.tZ)(fo.Z,{sidebarIsOpen:!0,pathname:d.pathname,showCount:!1})}),(0,a.tZ)(po,{})]}):null]}),(0,a.tZ)(Ue.Z,{isOpen:k,onRequestClose:function(){return C(!1)},children:(0,a.tZ)(v.G7,{innerRef:ne,children:ie?(0,a.tZ)(An,{replId:g}):(0,a.tZ)(jn,{replId:g})})})]})}var ko=(0,l.memo)(xo),Co=t(65908),Io=t(33480),Po=t(14994),So=t(53800),Ro=t(91550),Eo=t(91296),To=t.n(Eo),Do=t(11533),Uo=t(63736);function _o(e){var n=e.path,t=e.line;return(0,a.BX)(v.G7,{css:[v.l0.colWithGap(4),v.l0.align.start,v.l0.flex.growAndShrink(1),v.l0.py(4)],children:[(0,a.BX)(v.Tg,{elevated:!0,css:[v.l0.rowWithGap(4),v.l0.borderRadius(8),v.l0.p(2)],children:[(0,a.tZ)(Uo.Z,{path:n,size:12}),(0,a.BX)(v.xv,{variant:"small",children:[n,":",t.lineNumber]})]}),(0,a.tZ)(wn.xK,{source:t.content,matches:t.matches})]})}function Go(){return(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8)],children:[(0,a.tZ)(rr.Z,{}),(0,a.tZ)(v.xv,{color:"dimmest",children:"Something went wrong searching your Repl's contents. Please try again."})]})}function Bo(){return(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8)],children:[(0,a.tZ)(rr.Z,{}),(0,a.tZ)(v.xv,{color:"dimmest",children:"Displaying only part of the results, try being more specific with your search."})]})}function Mo(){return(0,a.tZ)(v.G7,{children:(0,a.tZ)(v.xv,{color:"dimmest",children:"Nothing came up searching your Repl's content."})})}var Ao={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"F"};function Xo(e){var n,t=To()((function(e,n,t){(0,Do.yC)(e).then(n).catch(t)}),200);return(0,Mr.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.tZ)(ho.Z,{}),keyboardShortcut:Ao},{match:(0,Mr.zf)({defaultScore:2}),commands:function(){var l=(0,r.Z)((function(r){var l,c,s,u,d,p,f,h,m,g,Z,y;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return r.search?!r.active&&e.activeOnly?[2,[]]:(l=Math.random(),n=l,[4,new Promise((function(n,i){t({query:r.search,container:e.container},n,i)}))]):[2,[]];case 1:if(c=o.sent(),s=c.results,u=c.error,d=c.isPartialResult,l!==n)return[2,[]];if(null!==u)return r.active?[2,[{data:{type:"error",label:"error",icon:(0,a.tZ)(rr.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(Go,{})}}}}]]:[2,[]];p=[],f=!0,h=!1,m=void 0;try{for(g=function(){var e=(0,i.Z)(y.value,2),n=e[0];e[1].forEach((function(e){var t=e.matches[0].column;p.push((0,Mr.fA)({type:"openFile",label:n,icon:(0,a.tZ)(Uo.Z,{path:n}),deeplink:{path:n,line:e.lineNumber,col:t}},{match:function(){var i=xn.Z.match(r.search,e.content);return{score:(null===i||void 0===i?void 0:i.score)||1,render:{content:(0,a.tZ)(_o,{path:n,line:e})},key:[n,e.lineNumber,t].join(":")}}}))}))},Z=Object.entries(s)[Symbol.iterator]();!(f=(y=Z.next()).done);f=!0)g()}catch(b){h=!0,m=b}finally{try{f||null==Z.return||Z.return()}finally{if(h)throw m}}if(0===p.length&&r.active)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(v.G7,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(Mo,{})}}}}]];if(r.active){if(0===p.length)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(v.G7,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(Mo,{})}}}}]];d&&p.push({data:{type:"error",label:"error",icon:(0,a.tZ)(rr.Z,{})},match:function(){return{score:1/0,render:{content:(0,a.tZ)(Bo,{})}}}})}return[2,p]}}))}));return function(e){return l.apply(this,arguments)}}()})}var No=t(42456),Oo=t(57353),Lo=t(18374),zo=t(63035);function jo(){var e=(0,Q.Z)().session,n=(0,i.Z)(l.useState(e.getInstructionsViewerVisible()),2),t=n[0],r=n[1];return l.useEffect((function(){return r(e.getInstructionsViewerVisible()),e.onInstructionsViewerToggled(r)}),[e]),t}var Wo=t(65e3),Fo=t(40705),Ho=t(23445),Vo=t(69128),$o=t(54519),Ko=["education","tutorial","instructions","docs","chat","threadInbox","packager","git","shell","runnerOutput","envEditor","webview","vnc","debugger","database","replAuth","markdown","autograder","unitTests","preferences","adminPanel"];function qo(){var e=(0,Ho.XP)(),n=e.repl,t=e.currentUser,r=Boolean(null===n||void 0===n?void 0:n.config.isServer),o=Boolean(null===n||void 0===n?void 0:n.config.isVnc),a=Boolean(null===t||void 0===t?void 0:t.isAdmin),l=Boolean(null===n||void 0===n?void 0:n.lang.supportsGit),s=jo(),u=(0,Wo.Z)().isTutorial,d=Boolean(n&&!(null===n||void 0===n?void 0:n.lang.key.startsWith("html"))),p=(0,Fo.x)(),f=Boolean(null===p||void 0===p?void 0:p.packageSearch),h=(0,Ho.x5)()||Boolean(null===n||void 0===n?void 0:n.lang.hasDAP),v=Boolean(n&&!(null===n||void 0===n?void 0:n.lang.key.startsWith("html"))),m=Boolean((null===n||void 0===n?void 0:n.isProject)||(null===n||void 0===n?void 0:n.isProjectFork)),g=(0,Vo.Z)().language,Z=!m&&null!==g,y=(0,$o.$)(),b=(0,lo.c)("flag-repl-auth-sidebar"),w=b.enabled,x=(b.loading,Boolean(w&&p));return(0,tr.Z)((function(){return(0,c.cn)((function(e){var n=e(zo.gM),t=[],c=[[{type:"shell"},!0],[{type:"instructions"},s],[{type:"markdown",data:{path:""}},!0],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs"},!0],[{type:"webview"},r],[{type:"vnc"},o],[{type:"runnerOutput"},!n]];e(ir.H).flagLayoutNavigator&&c.push([{type:"git"},l],[{type:"packager"},f],[{type:"envEditor"},d],[{type:"debugger"},h],[{type:"tutorial"},u],[{type:"database"},v],[{type:"replAuth"},x],[{type:"autograder"},m],[{type:"unitTests"},Z],[{type:"education"},Boolean(y)],[{type:"preferences"},!0],[{type:"adminPanel"},a]);var p=!0,g=!1,b=void 0;try{for(var w,k=c[Symbol.iterator]();!(p=(w=k.next()).done);p=!0){var C=(0,i.Z)(w.value,2),I=C[0];C[1]&&t.push(I)}}catch(P){g=!0,b=P}finally{try{p||null==k.return||k.return()}finally{if(g)throw b}}return function(e){return e.sort((function(e,n){return Ko.indexOf(e.type)-Ko.indexOf(n.type)}))}(t)}))}),[r,a,o,s,l,f,d,h,y,Z,m,x,v,u])}function Yo(){return(0,c.Dv)(qo())}var Qo=function(e,n,t){return{match:t||Mr.pl,data:{type:"openPane",pane:e,label:n.getTitle(e),icon:n.Icon({pane:e})}}};function Jo(){var e=(0,So.Se)();return(0,tr.Z)((function(){return(0,c.cn)((function(n){var t=n($n.EP);return{data:{type:"context",label:"Recent",icon:(0,a.tZ)(Po.Z,{})},commands:function(n){var r=n.search;return t.map((function(n){var t=(0,dr.Dp)({path:n});return Qo({type:t,data:{path:n}},e,(function(e){return r?(0,Mr.pl)(e):{score:10}}))}))}}}))}),[e])}function ea(){var e=(0,So.Se)(),n=Yo();return(0,tr.Z)((function(){return(0,c.cn)((function(t){var r=t(Kn.Eh).map((function(e){return t(e.data).type})),i=[],o=!0,a=!1,l=void 0;try{for(var c,s=n[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;(0,dr.b)(u.type)&&r.includes(u.type)||i.push(Qo(u,e))}}catch(d){a=!0,l=d}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i}))}),[n,e])}var na={type:"context",icon:(0,a.tZ)(It.Z,{}),label:"",description:"Search for tools and files"};function ta(e){var n=e.paneId,t=(0,Q.Z)(),r=t.fs,i=t.container,o=ea(),l=Jo(),s=(0,No.A)(),u=(0,Oo.T)(),d=function(e){var n=e.paneId,t=(0,Yn.D)();return(0,tr.Z)((function(){return function(e){var r=e.path,i={type:(0,dr.Dp)({path:r}),data:{path:r}};t({paneId:n,data:i,makeActive:!0})}}),[n,t])}({paneId:n}),p=(0,tr.Z)((function(){return(0,c.cn)((function(e){var n=e(o),t=e(l),c={data:{type:"context",label:"Tools",icon:(0,a.tZ)(Lo.Z,{})},commands:function(){return[(0,Ro.i)({openFile:d,fs:r,shouldHideFile:u,getRecentFiles:s}),Xo({container:i})].concat((0,_e.Z)(n))}};return{data:na,commands:function(){return[t,c]}}}))}),[i,r,s,o,u,l,d]);return(0,c.Dv)(p)}var ra=v.KD.div,ia=v.KD.input;function oa(e){var n=ta({paneId:e.paneId}),t=(0,Mt.Z)({onSelect:e.onSelect,initialCommand:n,insertSectionHeaders:!0}),r=t.combobox,i=t.inputRef;return(0,l.useEffect)((function(){var n;e.autoFocus&&(e.isHidden||null===(n=i.current)||void 0===n||n.focus())}),[e.autoFocus,e.isHidden,i]),(0,a.BX)(v.G7,{css:[v.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(ra,(0,se.Z)((0,S.Z)({},r.getComboboxProps()),{children:(0,a.BX)(v.Tg,{css:[v.l0.rowWithGap(4),v.l0.align.center,t.path.length>1&&v.l0.pl(8),{borderBottom:"1px solid ",borderColor:v.TV.backgroundHigher,":focus-within":{borderColor:v.TV.backgroundHighest}}],children:[t.path.map((function(e,n){var r=e.data;if(n<=1)return null;var i=r.label,o=r.icon,l=i+n;return(0,a.tZ)(zt,{label:i,icon:o,onClick:function(){return t.resetToIndex({index:n,focus:!0})}},l)})),(0,a.tZ)(ia,(0,S.Z)({css:[Qt,v.l0.px(8),t.path.length>1&&{paddingLeft:4}]},t.combobox.getInputProps({value:t.inputValue,ref:t.inputRef,onChange:function(e){return t.setInputValue(e.currentTarget.value)},onKeyDown:function(e){"ArrowLeft"!==e.key&&"ArrowRight"!==e.key?"Backspace"!==e.key||e.currentTarget.value?"Escape"===e.key&&e.currentTarget.blur():t.resetToIndex({index:0}):t.handleLeftRightArrow(e.key)},placeholder:t.placeholder})))]})})),(0,a.tZ)(la,{items:t.itemsWithSections||[],getMenuProps:r.getMenuProps,getItemProps:r.getItemProps,highlightedIndex:r.highlightedIndex,isLoading:t.isLoading})]})}function aa(e){return(0,a.tZ)(ra,(0,se.Z)((0,S.Z)({},e.getMenuProps()),{css:[v.l0.flex.growAndShrink(1),v.l0.overflow("auto")],children:e.isLoading||e.items.length?e.items.map((function(n){if(n.isSection){var t=n.name;return(0,a.tZ)(v.xv,{variant:"small",color:"dimmest",css:[v.l0.px(8),v.l0.py(4),{marginTop:8}],children:t},t)}var r=n.item,i=n.index,o=r.data,l=o.label,c=o.icon,s=r.match.render,u=i===e.highlightedIndex,d=s&&"content"in s?s.content:void 0,p=s&&"ranges"in s?s.ranges:void 0;return(0,a.tZ)(ra,(0,se.Z)((0,S.Z)({css:[{cursor:"pointer"}]},e.getItemProps({item:r,index:i})),{children:d?(0,a.tZ)(Ht,{active:u,content:d}):(0,a.tZ)(Ht,{active:u,item:{icon:c,label:l,active:u,highlightRanges:p}})}),(0,Mt.k)(r))})):null}))}var la=(0,l.memo)(aa),ca={Content:function(e){var n=e.options,t=n.openPane,r=n.isHidden,i=n.paneId,o=e.pane.data.autoFocus;return(0,a.tZ)(oa,{paneId:i,autoFocus:o,isHidden:r,onSelect:function(e){if("openFile"!==e.data.type)"openPane"!==e.data.type?"action"!==e.data.type||e.data.run():t(e.data.pane);else{var n=e.data.deeplink.path,r={type:(0,dr.Dp)({path:n}),data:{path:n}};t(r)}}})},Icon:function(){return null},getTitle:function(){return"New tab"}},sa=t(82947),ua=t(34467),da=t(96769),pa=t(20787),fa=t(76832),ha=t(47886),va=t(56483);function ma(){var e=(0,R.Z)(["\n  fragment DeploymentRepl on Repl {\n    id\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        pending\n        description\n        timeCreated\n      }\n    }\n  }\n"]);return ma=function(){return e},e}function ga(){var e=(0,R.Z)(["\n  query Deployment($replId: String!) {\n    currentUser {\n      id\n      username\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentRepl\n      }\n    }\n  }\n  ","\n"]);return ga=function(){return e},e}function Za(){var e=(0,R.Z)(["\n  mutation CreatePendingRelease($input: CreatePendingReleaseInput!) {\n    createPendingRelease(input: $input) {\n      ... on Repl {\n        id\n        ...DeploymentRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Za=function(){return e},e}function ya(){var e=(0,R.Z)(["\n  mutation PromoteRelease($input: PromoteReleaseInput!) {\n    promoteRelease(input: $input) {\n      ... on Repl {\n        id\n        ...DeploymentRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return ya=function(){return e},e}var ba={},wa=(0,E.Ps)(ma()),xa=(0,E.Ps)(ga(),wa);function ka(e){var n=(0,S.Z)({},ba,e);return T.a(xa,n)}var Ca=(0,E.Ps)(Za(),wa);var Ia=(0,E.Ps)(ya(),wa);var Pa,Sa=t(30992),Ra=t(10449),Ea=t(75240),Ta=t(45528),Da=t(79985),Ua=t(66223),_a=t(72092),Ga=t(64926),Ba=t(59916),Ma=t(52867),Aa=t(39791),Xa=t(61622),Na=t(20311),Oa=t(13331),La=t(25108);function za(){var e=ka({variables:{replId:(0,ke.Z)()}}).data;return(0,a.BX)(v.G7,{css:v.l0.colWithGap(32),children:[(0,a.tZ)(v.xv,{variant:"headerBig",children:"Deployments"}),(0,a.tZ)(Ka,{}),(0,a.tZ)(v.G7,{css:v.l0.colWithGap(16),children:(0,a.BX)(v.G7,{tag:"details",children:[(0,a.tZ)(v.G7,{tag:"summary",css:v.l0.cursor.pointer,children:(0,a.tZ)(v.xv,{variant:"subheadDefault",children:"Data dump:"})}),(0,a.tZ)(v.G7,{tag:"pre",children:JSON.stringify(e,null,2)})]})})]})}function ja(e){var n=e.next,t=(0,ke.Z)(),c=(0,ft.H)(),s=(0,l.useState)(!1),u=s[0],d=s[1],p=(0,i.Z)(function(e){var n=(0,S.Z)({},ba,e);return M.D(Ca,n)}(),1),f=p[0],h=(0,Sa.Y)("",(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){return[2,null]}))}))),m=h.value,g=h.setValue,Z=c("releaseDescription");return(0,a.BX)(v.G7,{css:v.l0.colWithGap(16),children:[(0,a.tZ)(v.G7,{tag:"label",htmlFor:Z,children:(0,a.tZ)(v.xv,{variant:"subheadDefault",children:"Add a description to remind you of what you're deploying now"})}),(0,a.tZ)(v.II,{id:Z,value:m,onChange:function(e){return g(e.target.value)},disabled:u,placeholder:"Added a new feature"}),(0,a.tZ)(v.zx,{disabled:u,onClick:(0,r.Z)((function(){var e,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return d(!0),[4,f({variables:{input:{replId:t,releaseDescription:m}}})];case 1:return r=i.sent(),"Repl"===(null===(e=r.data)||void 0===e?void 0:e.createPendingRelease.__typename)?n(r.data.createPendingRelease.releases.items[0].id):(alert("wtf"),La.log(r)),[2]}}))})),text:u?"Loading...":"Next (Secrets)"})]})}function Wa(e){var n=e.fs,t=e.next,i=(0,l.useState)(!1),c=i[0],s=i[1];return(0,a.BX)(v.G7,{css:v.l0.colWithGap(16),children:[(0,a.tZ)(v.G7,{children:(0,a.tZ)(v.xv,{variant:"subheadDefault",children:"Edit Secrets for this deployment"})}),(0,a.tZ)(Da.Z,{fs:n,activeFile:null,hideInserterAndIntro:!0}),(0,a.tZ)(v.zx,{disabled:c,onClick:(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return s(!0),[4,n.flush()];case 1:return e.sent(),[4,n.persist({skipDebounce:!0})];case 2:return e.sent(),t(),[2]}}))})),text:c?"Loading...":"Next (Build)"})]})}function Fa(e){var n=e.container,t=e.next,i=(0,l.useState)(!1),c=i[0],s=i[1];return(0,a.BX)(v.G7,{css:v.l0.colWithGap(16),children:[(0,a.BX)(v.G7,{children:[(0,a.tZ)(v.xv,{variant:"subheadDefault",children:"Would you like to any build commands"}),(0,a.tZ)(v.xv,{children:"If you're using a framework or a compiled language, you can create a production build now"})]}),(0,a.tZ)(_a.Z,{container:n,autoFocus:!0}),(0,a.tZ)(v.zx,{disabled:c,onClick:(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){return s(!0),t(),[2]}))})),text:c?"Loading...":"Next (Customize run)"})]})}function Ha(e){var n=e.runner,t=e.next,i=(0,l.useState)(!1),c=i[0],s=i[1];return(0,a.BX)(v.G7,{css:v.l0.colWithGap(16),children:[(0,a.BX)(v.G7,{children:[(0,a.tZ)(v.xv,{variant:"subheadDefault",children:"Would you like to change the default run command?"}),(0,a.tZ)(v.xv,{children:"You might want to change the run command to use a production build, or use specific configuration."})]}),(0,a.tZ)(v.xv,{children:"Coming soon... (unimplemented)"}),(0,a.tZ)(v.zx,{disabled:c,onClick:(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return s(!0),[4,n.run()];case 1:return e.sent(),t(),[2]}}))})),text:c?"Loading...":"Next (Preview)"})]})}function Va(e){var n=e.runner,t=e.releaseId,r=e.next;return(0,a.BX)(v.G7,{css:v.l0.colWithGap(16),children:[(0,a.tZ)(v.G7,{children:(0,a.tZ)(v.xv,{variant:"subheadDefault",children:"Preview website and logs"})}),(0,a.tZ)(v.ZP,{iconLeft:(0,a.tZ)(Na.Z,{}),target:"_blank",rel:"noopener",href:"https://".concat(t,".id.repl.co"),text:"Click here to open a preview of your website"}),(0,a.tZ)(v.xv,{children:"Logs"}),(0,a.tZ)(Xa.Z,{runner:n}),(0,a.tZ)(v.zx,{onClick:function(){return r()},text:"Next"})]})}function $a(e){var n,t=e.releaseId,c=e.next,s=(0,ke.Z)(),u=(0,ft.H)(),d=(0,l.useState)(!1),p=d[0],f=d[1],h=(0,i.Z)(function(e){var n=(0,S.Z)({},ba,e);return M.D(Ia,n)}(),1),m=h[0],g=(0,Sa.Y)("",(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){return[2,null]}))}))),Z=g.value,y=g.setValue,b=ka({variables:{replId:s}}).data,w=u("slug"),x=u("type"),k=(0,l.useState)("replco"),C=k[0],I=k[1];return(0,a.BX)(v.G7,{css:v.l0.colWithGap(16),children:[(0,a.BX)(v.G7,{children:[(0,a.tZ)(v.G7,{htmlFor:x,tag:"label",children:(0,a.tZ)(v.xv,{children:"Domain Type"})}),(0,a.BX)(v.hE,{tag:"fieldset",id:x,name:x,value:C,onChange:function(e){I(e),La.log(e.currentTarget.value),La.log(e.target.value)},row:!0,primary:!0,css:[v.l0.width("100%")],children:[(0,a.tZ)(v.rK,{id:u("replco"),value:"replco",text:"Repl.co Domain (free)"}),(0,a.tZ)(v.rK,{id:u("custom"),value:"custom",text:"Custom Domain"})]})]}),"replco"===C?(0,a.BX)(a.HY,{children:[(0,a.tZ)(v.G7,{tag:"label",htmlFor:w,children:(0,a.tZ)(v.xv,{variant:"subheadDefault",children:"Set a URL for your deployment"})}),(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(4),v.l0.align.baseline],children:[(0,a.tZ)(v.II,{id:w,value:Z,onChange:function(e){return y(e.target.value)}}),(0,a.BX)(v.xv,{children:[".",null===b||void 0===b||null===(n=b.currentUser)||void 0===n?void 0:n.username,".repl.co"]})]})]}):(0,a.tZ)(v.xv,{children:"Coming soon...(unimplemented)"}),(0,a.tZ)(v.zx,{iconLeft:(0,a.tZ)(Oa.Z,{}),disabled:p,onClick:(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return f(!0),[4,m({variables:{input:{releaseId:t,slug:Z}}})];case 1:return e.sent(),c(),[2]}}))})),text:p?"Loading...":"Launch"})]})}function Ka(){var e=(0,l.useState)(null),n=e[0],t=e[1],i=(0,Q.Z)().container,c=(0,l.useState)(null),s=c[0],u=c[1];switch(n){case null:return(0,a.tZ)(v.zx,{text:"Create new deployment",onClick:function(){return t(Pa.InitStep)}});case Pa.InitStep:return(0,a.tZ)(ja,{next:function(e){var n=(0,Ea.Z)({onUnrecoverableError:function(e){alert("BSOD"),La.error(e)}}),a=i.getContext();if(!a)throw new Error("wat");var l=(0,Ta.U)({repl:{id:e,slug:e,language:a.repl.language,user:a.repl.user,currentUserPermissions:a.repl.currentUserPermissions},currentUser:a.currentUser,asViewer:!1});n.connect({context:l,fetchConnectionMetadata:(0,r.Z)((function(){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,(0,ki.uz)("/data/repls/".concat(a.repl.id,"/release/").concat(e,"/get_connection_metadata"),{})];case 1:return[2,n.sent()]}}))}))});var c=(0,Ua.Z)({container:n}),s=(0,Ba.Z)({container:n,fs:c}),d=(0,Ga.Z)({container:n,dotReplit:s}),p=(0,Ma.Z)({container:n,beforeRun:(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,Aa.Z)(n,s)];case 1:return e.sent()?[4,d.installPackages()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))});u({container:n,fs:c,runner:p}),t(Pa.SecretsStep)}});case Pa.SecretsStep:if(!s)throw new Error("wat");return(0,a.tZ)(Wa,{fs:s.fs,next:function(){t(Pa.BuildStep)}});case Pa.BuildStep:if(!s)throw new Error("wat");return(0,a.tZ)(Fa,{container:s.container,next:function(){t(Pa.RunStep)}});case Pa.RunStep:if(!s)throw new Error("wat");return(0,a.tZ)(Ha,{runner:s.runner,next:function(){t(Pa.PreviewStep)}});case Pa.PreviewStep:var d;if(!s)throw new Error("wat");var p=null===(d=s.container.getContext())||void 0===d?void 0:d.repl.id;if(!p)throw new Error("wat");return(0,a.tZ)(Va,{releaseId:p,runner:s.runner,next:function(){t(Pa.UrlStep)}});case Pa.UrlStep:var f,h=null===(f=null===s||void 0===s?void 0:s.container.getContext())||void 0===f?void 0:f.repl.id;if(!h)throw new Error("wat");return(0,a.tZ)($a,{releaseId:h,next:function(){t(null),null===s||void 0===s||s.container.destroy(),u(null)}});default:(0,Ra.Z)(n)}}!function(e){e[e.InitStep=0]="InitStep",e[e.SecretsStep=1]="SecretsStep",e[e.BuildStep=2]="BuildStep",e[e.RunStep=3]="RunStep",e[e.PreviewStep=4]="PreviewStep",e[e.UrlStep=5]="UrlStep"}(Pa||(Pa={}));var qa={Content:function(e){var n=e.options,t=n.paneId,r=n.isHidden,i=(0,Q.Z)(),o=i.container,s=i.fs,u=i.session,d=i.runner,p=(0,c.b9)(ur.Oe),f=(0,c.Dv)(fa.f),h=(0,fa.Z)();(0,ha.Z)({container:o,runner:d,refreshWebView:h}),(0,va.Z)({runner:d,refreshWebView:h}),(0,Xr.x)(sa.b,{run:function(){p(t),h()}}),Ur({match:Mr.pl,data:{type:"action",label:"Refresh",icon:(0,a.tZ)(pa.Z,{}),description:"Refresh webview",keyboardShortcut:sa.b,run:function(){p(t),h()}}});var m=(0,lo.c)("flag-deployments"),g=m.enabled,Z=(m.loading,(0,l.useState)(!1)),y=Z[0],b=Z[1];return(0,a.BX)(a.HY,{children:[g?(0,a.tZ)(v.u_,{isOpen:y,onRequestClose:function(){return b(!1)},children:(0,a.tZ)(za,{})}):null,(0,a.tZ)(da.Z,{fs:s,session:u,ref:f,isVisible:!r,onDeployment:g?function(){return b(!0)}:void 0})]})},Icon:function(e){var n=e.size;return(0,a.tZ)(ua.Z,{size:n})},getTitle:function(){return"Webview"}};function Ya(){var e=(0,Io.U)();return(0,se.Z)((0,S.Z)({},e),{webview:qa,commands:ca})}var Qa=t(25108);var Ja=t(15682),el=t(24888),nl=t(19945),tl=t(66477);function rl(){var e=(0,R.Z)(["\n  query ReplEnvironmentHelp {\n    currentUser {\n      id\n      ...HelpCurrentUser\n    }\n  }\n  ","\n"]);return rl=function(){return e},e}var il={},ol=(0,E.Ps)(rl(),tl.HH);var al=t(42844),ll=t(75301),cl=t(29780);function sl(e){var n=e.item,t=e.isActive,r=e.onClick,o=(0,i.Z)(l.useState(!0),2),c=o[0],s=o[1],u=l.useRef(null),d=(0,i.Z)((0,Ja.XZ)(u,!1),4),p=d[0],f=d[1],h=d[2],m=d[3];(0,Ja.Ym)(f,u);var g=(0,a.tZ)(v.hU,{innerRef:u,role:"tab",tabIndex:p,tooltipPlacement:"right","aria-selected":t,size:40,alt:n.tooltip,css:[t?[v.l0.backgroundColor.accentPrimaryDimmest,v.l0.color.accentPrimaryStrongest]:v.l0.color.foregroundDimmest,{"&:hover":t?[v.l0.backgroundColor.accentPrimaryDimmest,v.l0.color.accentPrimaryStrongest]:v.l0.color.accentPrimaryStrongest}],onKeyDown:h,onClick:function(e){m(),s(!1),r(e)},children:n.icon},n.type);return n.IconWrapper?(0,a.tZ)(n.IconWrapper,{isVisible:c,onDismiss:function(){return s(!1)},children:g}):g}var ul={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:","},dl={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"G"};function pl(){var e=(0,Ho.ZP)(),n=e.items,t=e.activeItem,r=(0,cl.vL)(),i=(0,cl.Iv)(),o=function(e){var n=(0,S.Z)({},il,e);return T.a(ol,n)}().data,l=null===o||void 0===o?void 0:o.currentUser;(0,Xr.x)(ul,{run:function(){r({type:"preferences"})}}),Ur({match:Mr.pl,data:{type:"action",icon:(0,a.tZ)(al.Z,{}),label:"Settings",description:"Manage editor settings",keyboardShortcut:ul,run:function(){r({type:"preferences"})}}});var c=n.some((function(e){return"git"===e.type}));return(0,Xr.x)(dl,{run:function(){r({type:"git"})},enabled:c}),Ur({match:Mr.pl,data:{icon:(0,a.tZ)(ll.Z,{}),label:"Version control",description:"Open version control sidebar",type:"action",keyboardShortcut:dl,run:function(){r({type:"git"})}}},{enabled:c}),(0,a.BX)(v.Tg,{elevated:!0,css:[v.l0.borderRadius(8,0,0,8),v.l0.colWithGap(4),v.l0.flex.growAndShrink(1),v.l0.justify.spaceBetween,v.l0.align.center,v.l0.pb(8),v.l0.position.relative,{borderRight:"1px solid "+v.TV.backgroundHigher}],children:[(0,a.tZ)(Ja.uP,{options:{direction:"vertical"},children:(0,a.BX)(v.G7,{css:[v.l0.p(4),v.l0.overflowY("auto"),v.l0.flex.growAndShrink(1),v.l0.colWithGap(4),v.l0.align.start],role:"tablist","aria-orientation":"vertical","aria-label":"Dock",children:[n.map((function(e){var n=e.type===t;return(0,a.tZ)(v.G7,{children:(0,a.tZ)(sl,{item:e,isActive:n,onClick:function(){return i({type:e.type})}})},e.type)})),0===n.length?(0,a.tZ)(v.hU,{"aria-disabled":!0,alt:"",size:40,css:{opacity:0},children:(0,a.tZ)(el.Z,{})}):null]})}),l?(0,a.tZ)(nl.Z,{}):null,(0,a.tZ)(fl,{direction:"top"}),(0,a.tZ)(fl,{direction:"bottom"})]})}function fl(e){return(0,a.tZ)(v.Tg,{css:[v.l0.position.absolute,v.l0.right(-5),v.l0.width(4),v.l0.height(4),"top"===e.direction?v.l0.top(0):v.l0.bottom(0),{pointerEvents:"none"}]})}var hl=(0,l.memo)(pl),vl=t(60523),ml=t(35621);function gl(e){var n=e.children,t=l.useRef({fileMap:new Map});return(0,a.tZ)(vl.Z.Provider,{value:t,children:n})}function Zl(e){var n=e.ui,t=e.services,r=e.replId,i=e.replLanguage,o=e.children,l=(0,tr.Z)((function(){return{id:r,language:i}}),[r,i]);return(0,a.tZ)(So.kz,{value:n,children:(0,a.tZ)(gl,{children:(0,a.tZ)(Ci.Z.Provider,{value:t,children:(0,a.tZ)(ml.Z.Provider,{value:l,children:o})})})})}var yl=t(51438),bl=t(28668),wl=t(25171),xl=t(88662),kl=t(93160),Cl=t(13482),Il=y.K.div,Pl=(0,Gt.iv)([v.l0.width("100%"),v.l0.position.absolute,v.l0.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),Sl=(0,Gt.iv)([v.l0.height("100%"),v.l0.position.absolute,v.l0.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),Rl=(0,Gt.iv)([v.l0.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function El(e){var n="topLeft"===e||"topRight"===e?"bottom":"top";return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat(n)}}var Tl={topLeft:(0,Gt.iv)([v.l0.top(0),v.l0.left(0),El("topLeft")]),topRight:(0,Gt.iv)([v.l0.top(0),v.l0.right(0),El("topRight")]),bottomLeft:(0,Gt.iv)([v.l0.bottom(0),v.l0.left(0),El("bottomLeft")]),bottomRight:(0,Gt.iv)([v.l0.bottom(0),v.l0.right(0),El("bottomRight")])};function Dl(e){var n=e.edge,t=e.size,r=e.onPointerDown;if("top"===n||"bottom"===n)return(0,a.tZ)(Il,{onPointerDown:r,style:(0,it.Z)({height:t},n,-t),css:Pl});if("right"===n||"left"===n)return(0,a.tZ)(Il,{onPointerDown:r,style:(0,it.Z)({width:t},n,-t),css:Sl});var i="topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize";return(0,a.tZ)(Il,{onPointerDown:r,style:{height:t,width:t,cursor:i},css:[Rl,Tl[n]]})}var Ul=["bottom","right","left","bottomRight","bottomLeft"],_l=(0,Gt.iv)([w.l0.coverContainer,w.l0.borderRadius(0,0,8,8)]),Gl="--fixed-position-offset-x",Bl="--fixed-position-offset-y",Ml=function(e){return"var(".concat(e,")")},Al=(0,Gt.iv)({transform:"translate(".concat(Ml(Gl),", ").concat(Ml(Bl),")")}),Xl=(0,Gt.iv)([w.l0.coverContainer,!Cl.g&&{"& .cm-editor > .cm-tooltip":Al,"& .cm-editor > .cm-tooltip.cm-tooltip-thread":{left:"0px !important",transform:"translateY(".concat(Ml(Bl),"px)")},".cm-custom-context-menu":Al}]);function Nl(e){var n,t=e.resizable&&e.onResizeControlPointerDown?Ul.map((function(n){return(0,a.tZ)(Dl,{size:8,edge:n,onPointerDown:function(t){if(!e.onResizeControlPointerDown)throw new Error("Expected onResizeControlMouseDown");e.onResizeControlPointerDown(t,n)}},n)})):null,r=e.rect;return(0,a.tZ)(y.Z,{style:(n={zIndex:e.zIndex,position:"absolute",width:r.width,height:r.height,transform:"translate(".concat(Math.round(r.x),"px, ").concat(Math.round(r.y),"px)"),transition:e.animate?"transform 140ms ease-out":void 0,transitionTimingFunction:"ease-out",visibility:e.hidden?"hidden":void 0,opacity:e.hidden?0:void 0},(0,it.Z)(n,Gl,-e.viewportInset.x+"px"),(0,it.Z)(n,Bl,-e.viewportInset.y+"px"),n),css:{"&:hover":{zIndex:e.zIndexHovered}},children:(0,a.BX)(kl.Z,{onClick:e.onClick,onContextMenu:e.onClick,elevated:!0,css:_l,className:e.className,children:[(0,a.tZ)(y.Z,{innerRef:e.innerRef,css:Xl,children:e.children}),t]})})}var Ol=t(78648),Ll=(0,c.cn)(null),zl=(0,c.cn)(null,(function(e,n,t){var r=e($n.g4);if("end"===t.type)return n(Ll,null),void n(Qn.iH,r);if("update"!==t.type){var i=e(Kn.Eh).find((function(e){return e.paneId===t.paneId}));if(!i){var o=new Error("Expected pane");throw n(et.xm,{error:o}),o}n(Jn.W1,t.paneId),n(Ll,{paneId:t.paneId,edge:t.edge,rectStart:e(i.rectAtom)})}else{var a=e(Ll);if(!a){var l=new Error("Expected floatingResizeState");throw n(et.xm,{error:l}),l}var c=(0,Ol.XR)(a.rectStart,{delta:t.moveDelta,edge:a.edge}),s=a.paneId,u=(0,Wn.ZP)(r,(function(t){var r=t.floating.find((function(e){return e.panes.includes(s)}));if(!r){var i=new Error("Expected floating");throw n(et.xm,{error:i}),i}var o=e(Kn.M0),a=r.rect;a.x=c.x,a.y=c.y-o,a.width=c.width,a.height=c.height+o}));n(Qn.iH,u)}})),jl=t(93096),Wl=t.n(jl);function Fl(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=e.pageX,i=e.pageY,o={x:r,y:i},a={x:0,y:0};n.start&&n.start({mouse:o,shiftKey:e.shiftKey});var l=Wl()((function(e){var t={x:e.pageX,y:e.pageY};a={x:t.x-o.x,y:t.y-o.y},n.move({delta:a,shiftKey:e.shiftKey,mouse:t})}),t),c=function(){l.cancel(),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",c),document.removeEventListener("touchcancel",c),n.end&&n.end({delta:a,shiftKey:e.shiftKey})};document.addEventListener("pointermove",l),document.addEventListener("pointerup",c),document.addEventListener("touchcancel",c)}var Hl=(0,Gt.iv)([w.l0.width("100%"),w.l0.flex.growAndShrink(1),{overflow:"auto"}]);function Vl(e){return(0,a.tZ)(y.Z,{css:Hl,style:{pointerEvents:e.disableInteractions?"none":void 0,userSelect:e.disableInteractions?"none":void 0},children:e.children})}var $l=(0,c.cn)(!1),Kl=(0,c.cn)((function(e){return e($l)?e(Jn.J1):null})),ql=(0,c.cn)(null,(function(e,n,t){n($l,!0),n(Jn.W1,t)})),Yl=(0,c.cn)(null,(function(e,n){n($l,!1)})),Ql=(0,c.cn)(null,(function(e,n,t){e(Kl)===t?n(Yl):n(ql,t)})),Jl=(0,c.cn)((function(e){var n=e(Kn.CK);return{x:-n.x,y:-n.y,width:n.width+n.x,height:n.height+n.y}})),ec=(0,c.cn)((function(e){var n=e(Kn.M0),t=e(Jl);return{x:t.x,y:t.y,width:t.width,height:n}})),nc=(0,c.cn)((function(e){var n=e(Kn.M0),t=e(Jl);return{x:t.x,y:t.y+n,width:t.width,height:t.height-n}}));function tc(e){var n=(0,tr.Z)((function(){return(0,c.cn)((function(n){return e===n(Kl)?n(ec):null}))}),[e]);return(0,c.Dv)(n)}function rc(){return{maximizePane:(0,c.b9)(ql),restoreMaximizedPane:(0,c.b9)(Yl),toggleMaximized:(0,c.b9)(Ql)}}var ic=t(38628),oc=t(80175);function ac(e,n){var t=n.paneGroupPath,r=n.rect,i=(0,sr.KC)(e,t);if("paneGroup"!==(null===i||void 0===i?void 0:i.type))throw new Error("Expected paneGroup");(0,oc.Z)(e,t),(0,Vn.m)(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}var lc=t(35869);var cc=50,sc=(0,c.cn)(null),uc=(0,c.cn)((function(e){var n;return(null===(n=e(sc))||void 0===n?void 0:n.activePaneId)||null}));function dc(e){var n=e.paneId,t=(0,tr.Z)((function(){return(0,c.cn)((function(e){var t;return n===(null===(t=e(sc))||void 0===t?void 0:t.activePaneId)}))}),[n]);return(0,c.Dv)(t)}function pc(e){var n=e.paneId,t=(0,tr.Z)((function(){return(0,c.cn)((function(e){var t=e(sc);return!!t&&(t.activePaneId!==n&&("floating"!==e((0,Kn.z)(n)).type&&e($n._E)))}))}),[n]);return(0,c.Dv)(t)}function fc(e){var n=e.paneId,t=(0,tr.Z)((function(){return(0,c.cn)((function(e){var t=e(sc);return!!t&&("floating"!==t.startType&&(n===t.activePaneId?{originX:t.transformOriginX,scale:t.scale}:null))}))}),[n]);return(0,c.Dv)(t)}function hc(e){var n=e.activePaneId,t=(0,c.b9)(vc),r=(0,c.b9)(mc),i=(0,c.b9)(gc),o=(0,tr.Z)((function(){return{start:function(e){var r=e.mouse;t({activePaneId:n,mouse:r})},update:function(e){r(e)},end:function(e){i(e)}}}),[n,t,r,i]);return{isDragging:dc({paneId:n}),dnd:o}}var vc=(0,c.cn)(null,(function(e,n,t){var r=e(Kn.CK),i=e((0,Kn.z)(t.activePaneId)),o=e(i.rectAtom),a=e(Kn.M0),l={x:o.x,y:o.y-a,width:o.width,height:o.height+a},c=t.mouse.x-(r.x+o.x);n(sc,{startType:i.type,startPoint:{x:t.mouse.x-r.x,y:t.mouse.y-r.y},activePaneId:t.activePaneId,transformOriginX:Math.round(c)+"px",scale:1,fromRect:l})})),mc=(0,c.cn)(null,(function(e,n,t){var r=e(sc);if(r){var o=t.delta,a=r.activePaneId,l=r.fromRect,c=e($n.g4),s=(0,sr.Rh)(c,a);if(!s){var u=new Error("Expected pane");throw n(et.xm,{error:u}),u}var d=(0,Kn.z)(a),p=(0,Kn.Xs)(s.paneGroup.id),f=e(Kn.M0),h=Math.max(Math.abs(o.x),Math.abs(o.y)),v=h>=cc;if(!v||s.floating){var m=e(p),g=e(d),Z=l.x+o.x,y=l.y+o.y;if(n(m.rectAtom,(function(e){return(0,Wn.ZP)(e,(function(e){e.x=Z,e.y=y}))})),n(g.rectAtom,(function(e){return(0,Wn.ZP)(e,(function(e){e.x=Z,e.y=y+f}))})),"floating"!==r.startType){if(!v&&!s.floating){var b=r.startPoint,w=1-.30000000000000004*(x=h/cc,1-Math.sqrt(1-Math.pow(x,2)));return n(ic.m,{type:"detachPreview",rect:{x:b.x-cc,y:b.y-cc,width:100,height:100},progress:h/cc}),void n(sc,(0,Wn.ZP)(r,(function(e){e.scale=w})))}var x,k=e(Kn.CK);if(!s.floating)throw new Error("Expected floating pane");var C=e(Kn.Eh).filter((function(e){return"tile"===e.type&&!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]})),I=e(lc.Ob),P=function(e){var n=e.views,t=e.mouse,r=e.container,o=e.headerHeight,a=e.sidebarWidth,l={x:Math.min(Math.max(t.x-r.x,1),r.width-1),y:Math.min(Math.max(t.y-r.y,1),r.height-1)},c=!0,s=!1,u=void 0;try{for(var d,p=n[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=(0,i.Z)(d.value,2),h=f[0],v=f[1],m={x:v.x,y:v.y-o,width:v.width,height:o},g={x:m.x-Qn.SG/2,y:m.y-Qn.SG/2,width:m.width+Qn.SG,height:o+Qn.SG/2};if((0,Ol.V0)(l,g))return{dropPreview:m,drop:{type:"insert",paneId:h}};var Z={x:v.x,y:v.y-o,width:v.width,height:v.height+o},y={x:Z.x-Qn.SG/2,y:Z.y-Qn.SG/2,width:Z.width+Qn.SG,height:Z.height+Qn.SG};if((0,Ol.V0)(l,y)){var b=(0,Ol.QN)(l,Z);return{dropPreview:b.rect,drop:{type:"split",relativeTo:h,placement:b.placement}}}}}catch(x){s=!0,u=x}finally{try{c||null==p.return||p.return()}finally{if(s)throw u}}var w=(0,Ol.QN)(l,{x:a,y:0,width:r.width-a,height:r.height});return{dropPreview:w.rect,drop:{type:"split",relativeTo:["tiling"],placement:w.placement}}}({views:C,container:k,mouse:t.mouse,headerHeight:f,sidebarWidth:I}),S=P.drop,R=P.dropPreview;n(ic.m,{type:"dropPreview",rect:R}),n(sc,{fromRect:r.fromRect,activePaneId:r.activePaneId,startType:r.startType,startPoint:r.startPoint,drop:S,transformOriginX:r.transformOriginX,scale:r.scale})}}else{var E=e(d).rectAtom,T=e(E),D=(0,Wn.ZP)(c,(function(e){try{ac(e,{paneGroupPath:s.paneGroupPath,rect:{x:T.x+o.x,y:T.y-f+o.y,width:T.width,height:T.height+f}})}catch(u){throw n(et.xm,{error:u}),u}}));n(Qn.iH,D)}}else n(ic.m,null)})),gc=(0,c.cn)(null,(function(e,n,t){var r=t.delta;n(ic.m,null);var i=e(sc);if(i){var o=i.activePaneId,a=i.drop,l=i.fromRect,c=e($n.g4),s=(0,sr.Rh)(c,o);if(!s){var u=new Error("Expected pane");throw n(et.xm,{error:u}),u}var d=(0,Wn.ZP)(c,(function(e){if(s.floating&&"floating"===i.startType){var t=(0,sr.KC)(e,s.paneGroupPath);if("floatingPaneGroup"!==(null===t||void 0===t?void 0:t.type))return;var c=l.x+r.x,d=l.y+r.y;return t.rect.x=c,void(t.rect.y=d)}if(a)if("split"!==a.type){var p=(0,sr.Rh)(e,a.paneId);s.paneGroup.panes.forEach((function(n){return function(e,n){var t="floatingIndex"in n?e.floating[n.floatingIndex]:(0,sr.KC)(e,n.paneGroupPath);if(!t||!("panes"in t))throw new Error("Expected paneGroup");(0,oc.i)(e,n.paneId);var r=void 0===n.index?t.panes.length:n.index;t.panes.splice(r,0,n.paneId),n.activate?t.activeIndex=r:t.activeIndex>=r&&t.activeIndex++}(e,{paneId:n,paneGroupPath:(null===p||void 0===p?void 0:p.paneGroupPath)||["tiling"],activate:!1})}))}else{if(null===e.tiling){var f=Hn()();try{(0,Vn.m)(e,{id:Hn()(),panes:[f],placement:"leftOf",relativeTo:["tiling"]})}catch(u){throw n(et.xm,{error:u}),u}}try{!function(e,n){var t=n.from,r=n.to,i=n.placement,o=(0,sr.Rh)(e,t);if(!o)throw new Error("Expected fromPane");var a=o.paneGroup,l=a.panes,c=a.activeIndex;(0,oc.Z)(e,o.paneGroupPath),(0,Vn.m)(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:c})}(e,{from:o,to:a.relativeTo,placement:a.placement})}catch(h){throw n(et.xm,{error:h}),h}}}));n(sc,null),n(Qn.iH,d),"insert"===(null===a||void 0===a?void 0:a.type)&&n(ur.Oe,o)}}));var Zc={gutterActive:mi.Is+19,maximizedTooltip:mi.Is+18,maximizedPane:mi.Is+17,maximizedHeader:mi.Is+16,detachPreview:16,draggingPane:15,draggingHeader:14,dropPreview:13,floatingPaneHovered:12,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,tiledPaneHovered:7,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1};function yc(){return{normal:Zc.gutter,hovered:Zc.gutterHovered,active:Zc.gutterActive}}var bc=t(91885);function wc(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=(0,sr.KC)(e,t);if(!a||!(0,bc.r)(a))throw new Error("Expected leftNode");var l=(0,bc.I)(t),c=(0,sr.KC)(e,l);if("split"!==(null===c||void 0===c?void 0:c.type))throw new Error("Expected splitNode");var s=c.children.indexOf(a);if(-1===s)throw new Error("Expected leftNodeIndex");var u=s+1,d=c.children[u];if(!d)throw new Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&s>0)for(var p=Math.abs(r),f=s-1;p>0;){var h=c.children[f];if(h.percent>p){h.percent-=p;break}if(p-=h.percent,h.percent=0,0===f)break;f--}var v=c.children.reduce((function(e,n){return n===d?e:e+n.percent}),0);d.percent=100-v}else{var m=a.percent+d.percent,g=c.children.slice(s).reduce((function(e,n){return e+n.percent}),0);if(r>m-o){if(a.percent=Math.min(g,Math.max(m,r)),d.percent=0,r>m&&u<c.children.length-1)for(var Z=r-m,y=u+1;Z>0;){var b=c.children[y];if(b.percent>Z){b.percent-=Z;break}if(Z-=b.percent,b.percent=0,y===c.children.length-1)break;y++}}else{var w=a.percent-r;d.percent=d.percent+w,a.percent=r}}}function xc(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=(0,sr.KC)(e,t);if(!r||"split"!==r.type)throw new Error("Expected split node");for(var i=100,o=(0,bc.I)(t);o.length;){var a=(0,sr.KC)(e,o);if(!a)break;o=(0,bc.I)(o),"split"===a.type&&a.stacked===r.stacked&&(i*=a.percent/100)}return i}(n,{splitPath:t}),o=(0,sr.KC)(n,t);if("split"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected split node");var a=r.size,l=r.gap,c=r.headerHeight,s=r.inset,u=void 0===s?{top:0,bottom:0,left:0,right:0}:s,d=o.children.length,p=o.stacked?l*(d-1)+c*d:l*(d-1);return i/100*((o.stacked?a.height-(u.top+u.bottom):a.width-(u.left+u.right))-p)}var kc=(0,c.cn)(null),Cc=(0,c.cn)(null,(function(e,n,t){if("end"!==t.type)if("update"!==t.type){var r=e($n.g4),i=t.stacked?window.innerHeight:window.innerWidth,o=(0,sr.KC)(r,t.leftPath);if(!o||!(0,bc.r)(o)){var a=new Error("Expected left node");throw n(et.xm,{error:a}),a}var l=(0,bc.I)(t.leftPath),c=o.percent,s=Qn.pc/i*100,u=null;try{u=xc({splitPath:l,layout:r,tilingOptions:e(Qn.Hs)})}catch(w){throw n(et.xm,{error:w}),w}if(null===u)throw new Error("Expected resizeDistance");n(kc,{stacked:t.stacked,leftPath:t.leftPath,startPercent:c,resizeDistance:u,snapPercent:s,initialLayout:r})}else{var d=e(kc);if(!d){var p=new Error("Expected tilingResize");throw n(et.xm,{error:p}),p}var f=d.stacked,h=d.leftPath,v=d.startPercent,m=d.resizeDistance,g=d.initialLayout,Z=d.snapPercent,y=v+(f?t.moveDelta.y:t.moveDelta.x)/m*100,b=(0,Wn.ZP)(g,(function(e){wc(e,{leftPath:h,percent:y,snapPercent:Z})}));n(Qn.iH,b)}else n(kc,null)}));var Ic=t(26774),Pc=(0,c.cn)((function(e){return Boolean(e(sc)||e(Ll)||e(kc)||e(ur.c)||e(Ic.xM))}));var Sc=t(7182),Rc=t(46091);var Ec=(0,Gt.iv)([v.l0.position.absolute,v.l0.shadow(3),v.l0.borderRadius(8),{pointerEvents:"none",border:"1px solid",borderColor:v.TV.outlineDimmest}]);function Tc(e){var n=function(e){var n=e.paneId,t=(0,tr.Z)((function(){return(0,c.cn)((function(e){if(e(Kl))return null;var t=e((0,Kn.z)(n)),r=n===e(uc);if("floating"!==t.type&&!r)return null;var i=e(Kn.M0),o=e(t.rectAtom);return{width:o.width+2,height:o.height+i+2,top:-(i+1),left:-1}}))}),[n]);return(0,c.Dv)(t)}({paneId:e.paneId});return n?(0,a.tZ)(v.G7,{css:Ec,style:n}):null}var Dc=(0,l.memo)(Tc);var Uc=t(25108);var _c=function(e){(0,bl.Z)(t,e);var n=(0,wl.Z)(t);function t(){var e;return(0,yl.Z)(this,t),(e=n.apply(this,arguments)).state={error:null,errorInfo:null},e}var r=t.prototype;return r.componentDidCatch=function(e,n){this.setState({error:e,errorInfo:n}),this.props.handleError(e,n),Uc.error(e)},r.render=function(){return this.state.error?(0,a.tZ)(v.G7,{css:[v.l0.font.code,v.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},v.l0.backgroundColor.blurpleDefault,v.l0.height("100%")],children:(0,a.tZ)(v.G7,{children:this.state.error.stack})}):this.props.children},t}(l.Component);function Gc(e){var n=e.paneId,t=(0,c.Dv)(Kn.CK),r=(0,c.Dv)((0,Kn.z)(n)),o=function(e){var n=(0,tr.Z)((function(){return(0,c.cn)((function(n){return e===n(Kl)?n(nc):null}))}),[e]);return(0,c.Dv)(n)}(n),l=(0,Jn.cr)({paneId:n}),s=(0,et.IY)(),u=fc({paneId:n}),d=(0,c.b9)(zl),p=(0,Jn.Xo)(),f="floating"===r.type&&!r.isDialog,h=Boolean(r.dropBehavior),v=pc({paneId:n}),m=h||Boolean(o),g=function(e){var n=(0,tr.Z)((function(){return(0,c.cn)((function(n){var t=n((0,Kn.z)(e)),r=e===n(Jn.J1);return n(Kl)===e?{hovered:Zc.maximizedPane,normal:Zc.maximizedPane}:e===n(uc)?{hovered:Zc.draggingPane,normal:Zc.draggingPane}:"floating"===t.type?{hovered:Zc.floatingPaneHovered,normal:r?Zc.floatingPaneActive:Zc.floatingPane}:{hovered:Zc.tiledPaneHovered,normal:r?Zc.tiledPaneActive:Zc.tiledPane}}))}),[e]);return(0,c.Dv)(n)}(n),Z=(0,c.Dv)(Pc),y=function(e){var n=e.paneId,t=(0,tr.Z)((function(){return(0,c.cn)((function(e){if(e(Kl)===n)return e(nc);var t=e((0,Kn.z)(n));return e(t.rectAtom)}))}),[n]);return(0,c.Dv)(t)}({paneId:n}),b={x:t.x+y.x,y:t.y+y.y},w=function(e){var n=e.paneId,t=(0,i.Z)((0,xl.L)({accept:[dt.Tv.File,Sc.z.Pane,Sc.z.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,t){var r=t.getClientOffset();r&&a.drag({pageX:r.x,pageY:r.y,over:n})},drop:function(e,t){var r=t.getClientOffset();if(r)if(e.type!==Sc.z.Pane){if(e.type===dt.Tv.File){var i=e.path,o={type:(0,dr.Dp)({path:i}),data:{path:i}};a.drop({type:"newPane",pane:o,pageX:r.x,pageY:r.y,over:n})}if(e.type===Sc.z.NewPane){var l=e.pane;a.drop({type:"newPane",pane:l,pageX:r.x,pageY:r.y,over:n})}}else a.drop({type:"pane",paneId:e.paneId,pageX:r.x,pageY:r.y,over:n})}}),2),r=t[0].isOver,o=t[1],a=(0,Rc.s)({isOver:r});return o}({paneId:n}),x="tile"===r.type;return(0,a.BX)(a.HY,{children:[r.isDialog?(0,a.tZ)(Ac,{}):null,(0,a.BX)(Nl,{css:{transform:u?"scale(".concat(u.scale,")"):void 0,transformOrigin:u?"".concat(u.originX," top"):void 0},innerRef:x?w:void 0,zIndex:g.normal,zIndexHovered:g.hovered,hidden:r.isHidden,viewportInset:b,active:l,rect:y,animate:v,isBeingDragged:h,floating:m,scaleDown:"tile"===r.dropBehavior,resizable:f,onClick:function(){p(n)},onResizeControlPointerDown:function(e,t){Fl(e,{start:function(){d({type:"start",paneId:n,edge:t})},move:function(e){var n=e.delta;d({type:"update",moveDelta:n})},end:function(){d({type:"end"})}})},children:[(0,a.tZ)(Dc,{paneId:n}),(0,a.tZ)(_c,{handleError:function(e,n){s({error:e,extras:{errInfo:n},tags:{layoutv2:"true",bsod:"true",paneType:r.type}})},children:(0,a.tZ)(Vl,{disableInteractions:Z,children:(0,a.tZ)(Mc,{paneId:n,dataAtom:r.data,isHidden:r.isHidden})})},n)]})]})}function Bc(e){var n=e.paneId,t=e.isHidden,r=e.dataAtom,i=(0,c.Dv)(r),o=(0,So.Se)().Content,l=(0,c.b9)(pr),s=function(e){l({fromPaneId:n,data:e})};return(0,a.tZ)(o,{pane:i,options:{paneId:n,isHidden:t,replacePane:s,openPane:s}})}var Mc=(0,l.memo)(Bc);function Ac(){var e=(0,c.b9)(rt);return(0,a.tZ)(v.G7,{onClick:function(){return e()},css:[v.l0.coverContainer,v.l0.position.fixed,v.l0.backgroundColor.backgroundOverlay]})}var Xc=(0,l.memo)(Gc);var Nc=t(48505),Oc=t(8941),Lc=t(56124);function zc(e,n,t){var r=!!/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)?32:0;if(t){var i=2/3,o=Math.max(e.width,r*i),a=Math.max(e.height,r*i),l="left"===t?1:-1,c=n?0:l*(o-e.width)/2,s=n?l*(a-e.height)/2:0;return{width:n?e.width:o,height:n?a:e.height,x:n?e.x:e.x-(o-e.width)/2+c,y:n?e.y-(a-e.height)/2+s:e.y}}var u=Math.max(e.width,r),d=Math.max(e.height,r);return{width:n?e.width:u,height:n?d:e.height,x:n?e.x:e.x-(u-e.width)/2,y:n?e.y-(d-e.height)/2:e.y}}var jc,Wc="--grip-color",Fc="var(".concat(Wc,")"),Hc=(0,Gt.iv)((jc={},(0,it.Z)(jc,Wc,w.TV.outlineDimmest),(0,it.Z)(jc,":active, :hover",(0,it.Z)({},Wc,w.TV.foregroundDefault)),jc)),Vc=(0,Gt.iv)([w.l0.position.absolute,w.l0.center,{minWidth:8,minHeight:8},Hc]),$c=(0,Gt.iv)({":hover":{transform:"scaleX(4)"}}),Kc=(0,Gt.iv)({":hover":{transform:"scaleY(4)"}}),qc=(0,Gt.iv)([w.l0.height("200vh"),w.l0.width("200vw"),{transform:"translate(-50%, -50%)"}]),Yc=(0,Gt.iv)([{backgroundColor:Fc,transition:"background-color"},w.l0.borderRadius(4)]),Qc=(0,Gt.iv)([Yc,{transitionDuration:"140ms"}]);function Jc(e){var n=e.snapped,t=e.stacked;return"left"===n?t?(0,a.tZ)(Or.Z,{color:Fc}):(0,a.tZ)(Oc.Z,{color:Fc}):t?(0,a.tZ)(Lc.Z,{color:Fc}):(0,a.tZ)(Nc.Z,{color:Fc})}var es=function(e){var n,t,r;return n=100/e*1,t=.08,r=.12,Math.min(Math.max(n,t),r)},ns=function(e){return{default:(0,Gt.iv)([w.l0.height("horizontal"===e?2:24),w.l0.width("horizontal"===e?24:2),Yc]),active:(0,Gt.iv)([w.l0.height("horizontal"===e?1:"calc(100%)"),w.l0.width("horizontal"===e?"calc(100%)":1),w.l0.backgroundColor.accentPrimaryDefault]),shared:(0,Gt.iv)([w.l0.borderRadius(4),{transitionProperty:"width, height, background-color",transitionTimingFunction:"ease-out"}])}},ts=ns("horizontal"),rs=ns("vertical");function is(e){var n=e.rect,t=e.onPointerDown,r=e.onDoubleClick,i=e.stacked,o=e.snapped,l=e.zIndexHovered,c=e.zIndex,s=e.isActive,u=zc(n,i,o),d=(0,Hr.T)(),p=(i?n.width:n.height)<24,f=i?ts:rs;return(0,a.BX)(y.Z,{onPointerDown:t,onDoubleClick:r,onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},style:{width:u.width,height:u.height,transform:"translate(".concat(u.x,"px, ").concat(u.y,"px)"),visibility:p?"hidden":void 0,cursor:i?"row-resize":"col-resize"},css:[Vc,{zIndex:c},!s&&{":hover":{zIndex:l}}],children:[(0,a.tZ)(y.Z,{css:[w.l0.coverContainer,!s&&(i?Kc:$c),s&&qc]}),o?(0,a.tZ)(Jc,{snapped:o,stacked:i}):(0,a.tZ)(y.Z,{className:"grip-line",style:{transitionDuration:d?"0s":"".concat(es(i?n.width:n.height),"s")},css:[Qc,s?f.active:f.default,f.shared]})]})}var os=t(64824),as=(0,c.cn)(null,(function(e,n,t){var r=e($n.g4),i=(0,Wn.ZP)(r,(function(e){wc(e,{leftPath:t.leftPath,percent:t.percent})}));n(Qn.iH,i)}));function ls(e){var n=e.handleId,t=(0,c.Dv)((0,Kn.vv)(n)),r=(0,c.b9)(Cc),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,l.useRef)(e),t=(0,c.b9)(as),r=(0,os.lV)((0,l.useCallback)((function(e){return e($n.g4)}),[]));return(0,l.useCallback)((function(i){i.snapped?t({leftPath:i.leftPath,percent:n.current}):Promise.resolve(r()).then((function(r){var o=(0,sr.KC)(r,i.leftPath);if(!o||!(0,bc.r)(o))throw new Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})}))}),[e,t,r])}(),o=yc(),s=function(e){var n=e.handleId,t=(0,tr.Z)((function(){return(0,c.cn)((function(e){var t=e(kc);return!!t&&n===(0,Ol.xH)({leftPath:t.leftPath})}))}),[n]);return(0,c.Dv)(t)}({handleId:n});return(0,a.tZ)(is,{isActive:s,zIndex:s?o.active:o.normal,zIndexHovered:o.hovered,snapped:t.snapped,rect:t.rect,stacked:t.stacked,onDoubleClick:function(){i(t)},onPointerDown:function(e){Fl(e,{start:function(){r({type:"start",leftPath:t.leftPath,stacked:t.stacked})},move:function(e){var n=e.delta;r({type:"update",moveDelta:n})},end:function(){r({type:"end"})}})}})}var cs=(0,l.memo)(ls),ss=t(62991),us=t.n(ss),ds=t(45432),ps=t.n(ds);class fs extends l.Component{constructor(e){super(e),this._osInstance=null,this._osTargetRef=l.createRef()}osInstance(){return this._osInstance}osTarget(){return this._osTargetRef.current||null}componentDidMount(){this._osInstance=ps()(this.osTarget(),this.props.options||{},this.props.extensions),hs(this._osInstance,this.props.className)}componentWillUnmount(){ps().valid(this._osInstance)&&(this._osInstance.destroy(),this._osInstance=null)}componentDidUpdate(e){ps().valid(this._osInstance)&&(this._osInstance.options(this.props.options),e.className!==this.props.className&&hs(this._osInstance,this.props.className))}render(){const e=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}(this.props,["options","extensions","children","className"]);return l.createElement("div",Object.assign({className:"os-host"},e,{ref:this._osTargetRef}),l.createElement("div",{className:"os-resize-observer-host"}),l.createElement("div",{className:"os-padding"},l.createElement("div",{className:"os-viewport"},l.createElement("div",{className:"os-content"},this.props.children))),l.createElement("div",{className:"os-scrollbar os-scrollbar-horizontal "},l.createElement("div",{className:"os-scrollbar-track"},l.createElement("div",{className:"os-scrollbar-handle"}))),l.createElement("div",{className:"os-scrollbar os-scrollbar-vertical"},l.createElement("div",{className:"os-scrollbar-track"},l.createElement("div",{className:"os-scrollbar-handle"}))),l.createElement("div",{className:"os-scrollbar-corner"}))}}function hs(e,n){if(ps().valid(e)){const{host:t}=e.getElements(),r=new RegExp(`(^os-host([-_].+|)$)|${e.options().className.replace(/\s/g,"$|")}$`,"g"),i=t.className.split(" ").filter((e=>e.match(r))).join(" ");t.className=`${i} ${n||""}`}}var vs={overflowBehavior:{y:"hidden"},scrollbars:{autoHide:"leave"}};var ms=t(53201),gs=t(47589),Zs=t(37432);var ys=t(1855),bs=v.KD.button,ws=(0,Gt.iv)([v.l0.display.inlineFlex,v.l0.height("100%")]),xs=(0,Gt.iv)([v.l0.cursor.pointer,v.l0.center,v.l0.rowWithGap(4),v.l0.pl(8),v.l0.pr(4),v.l0.height("100%"),{backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]);function ks(e){var n=e.onClick;return(0,a.tZ)(v.hU,{tooltipHidden:!0,onClick:n,alt:"Close",size:18,css:[{"&& svg":{width:12,height:12,minWidth:"unset",minHeight:"unset"},borderRadius:6},v.gU.nofill],children:(0,a.tZ)(Z.Z,{})})}function Cs(e){var n=(0,Q.Z)().fs,t=e.split("/"),r=t.pop(),i=t.join("/"),o=(0,l.useState)(!1),a=o[0],c=o[1],s=function(e){var n=e.path,t=e.initialExpanded,r=(0,Q.Z)().fs;return(0,Zs.Z)({path:n,initialExpanded:t,fs:r})}({path:i.length>0?i:".",initialExpanded:!0}).children,u=null===s||void 0===s?void 0:s.filter((function(e){return e.filename!==r}));return{fileName:r,parentPath:i,renaming:a,siblings:u,handleRename:function(){c(!0)},handleCancel:function(){c(!1)},handleSubmit:function(t){var r=i.length>0?i+"/"+t:t;n.moveFile(e,r),c(!1)}}}function Is(e){var n=e.filePath,t=e.title,r=e.onClick,i=e.onClose,o=e.isActive,l=e.innerRef,c=e.icon,s=e.onPointerDown,u=Cs(n),d=u.fileName,p=u.parentPath,f=u.renaming,h=u.siblings,m=u.handleRename,g=u.handleSubmit,Z=u.handleCancel,y=t.startsWith("History - ")?"History - ".concat(d):t;return(0,a.tZ)(v.u,{tooltip:n,placement:"bottom",isDisabled:!p,children:function(e,n){return(0,a.BX)(v.Tg,(0,se.Z)((0,S.Z)({innerRef:(0,ys.l)(l,n),css:[ws,o?v.gU.filled:v.gU.nofill,o?v.l0.color.foregroundDefault:v.l0.color.foregroundDimmer,v.l0.flex.row,v.l0.align.center,v.l0.pr(4)]},e),{children:[f?(0,a.tZ)(gs.Z,{onSubmit:g,onCancel:Z,loading:!1,siblings:h||[],parentPath:p,type:dt.Tv.File,initialValue:d,rename:!0}):(0,a.BX)(bs,{onPointerDown:s,onDoubleClick:m,css:[xs],onClick:r,children:[(0,a.tZ)(v.G7,{css:{opacity:o?1:.6},children:c||null}),(0,a.tZ)(v.xv,{children:y})]}),(0,a.tZ)(ks,{onClick:i})]}))}})}function Ps(e){var n=e.title,t=e.onClick,r=e.onClose,i=e.isActive,o=e.innerRef,l=e.icon,c=e.onPointerDown;return(0,a.BX)(v.Tg,{innerRef:o,css:[ws,i?v.gU.filled:v.gU.nofill,i?v.l0.color.foregroundDefault:v.l0.color.foregroundDimmer,v.l0.flex.row,v.l0.align.center,v.l0.pr(4)],children:[(0,a.BX)(bs,{css:[xs],onClick:t,onPointerDown:c,children:[(0,a.tZ)(v.G7,{css:{opacity:i?1:.6},children:l||null}),(0,a.tZ)(v.xv,{children:n})]}),(0,a.tZ)(ks,{onClick:r})]})}var Ss=v.KD.div;function Rs(e){var n=e.paneId,t=e.isActive,r=e.onClick,o=e.onClose,s=e.dragGroup,u=(0,tr.Z)((function(){return(0,c.cn)((function(e){return e(e((0,Kn.z)(n)).data)}))}),[n]),d=(0,c.Dv)(u),p=(0,So.Se)(),f=p.getTitle(d),h=p.Icon({pane:d,size:16}),m=(0,l.useRef)(null),g=(0,i.Z)((0,ms.c)({type:Sc.z.Pane,item:function(){var e,t=(null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect().width)||80;return{type:Sc.z.Pane,paneId:n,width:t}},collect:function(e){return{isDragging:e.isDragging()}}}),2),Z=g[0].isDragging,y=g[1],b=(0,c.b9)(ur.c);(0,l.useEffect)((function(){return b(Z)}),[b,Z]);var w,x=hc({activePaneId:n}).dnd,k=x&&s?function(e){1!==e.button&&Fl(e,{start:x.start,move:x.update,end:x.end})}:void 0;return(0,a.tZ)(Ss,{css:Z?[v.l0.width(0),v.l0.visibility.hidden]:[v.l0.px(2)],onMouseDown:function(e){1===e.button&&o()},children:(0,dr.KM)(d)?(0,a.tZ)(Is,{onPointerDown:k,innerRef:k?void 0:(0,ys.l)(y,m),filePath:null!==(w=d.data.path)&&void 0!==w?w:"",title:(0,pt.UO)(f),isActive:t,icon:h,onClick:function(){(0,I.j)(I.U3.WS_TAB_OPENED,{paneType:d.type}),r()},onClose:function(){(0,I.j)(I.U3.WS_TAB_CLOSED,{paneType:d.type}),o()}}):(0,a.tZ)(Ps,{onPointerDown:k,innerRef:k?void 0:(0,ys.l)(y,m),title:f,isActive:t,icon:h,onClick:function(){(0,I.j)(I.U3.WS_TAB_OPENED,{paneType:d.type}),r()},onClose:function(){(0,I.j)(I.U3.WS_TAB_CLOSED,{paneType:d.type}),o()}})})}function Es(){var e=(0,R.Z)(["\n  query ReplEnvironmentHeaderContainer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return Es=function(){return e},e}var Ts={},Ds=(0,E.Ps)(Es());var Us=t(25386);function _s(){var e=(0,Q.Z)().presence,n=(0,i.Z)(l.useState(e.getFollowingUsers()),2),t=n[0],r=n[1];return l.useEffect((function(){return r(e.getFollowingUsers()),e.onFollowingUsersChanged((function(e){r(e.followingUsers)}))}),[e]),t}function Gs(){var e=_s();return 0===e.length?null:1===e.length?(0,a.tZ)(Bs,{user:e[0]}):(0,a.BX)("div",{className:"jsx-4f2e88846001c10e followed-indicator",children:[(0,a.BX)(yn.Z,{children:[e.length," users are observing you"]}),(0,a.tZ)(te(),{id:"4f2e88846001c10e",children:".followed-indicator.jsx-4f2e88846001c10e{white-space:nowrap;height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"})]})}function Bs(e){var n=e.user,t=le({variables:{ids:[n.id]},ssr:!1}).data;if(!t)return null;var r=t.usersByIds,o=(0,i.Z)(r,1)[0].image,l=n.id,c=n.username,s=n.color;return(0,a.BX)("div",{className:"jsx-add9eb548244268a followed-indicator",children:[(0,a.BX)(dn.Ug,{wrap:"nowrap",align:"center",className:"stack",spacing:"var(--space-4)",children:[(0,a.tZ)(pe,{id:l,username:c,image:o,color:s,size:22}),(0,a.tZ)(yn.Z,{className:"username",children:c}),(0,a.tZ)("div",{className:"jsx-add9eb548244268a text",children:(0,a.tZ)(yn.Z,{children:"is observing you"})})]}),(0,a.tZ)(te(),{id:"add9eb548244268a",children:".followed-indicator.jsx-add9eb548244268a{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8)}.text.jsx-add9eb548244268a{white-space:nowrap}.followed-indicator.jsx-add9eb548244268a .stack{height:100%}.followed-indicator.jsx-add9eb548244268a .username{overflow:clip;max-width:150px;display:inline-block;-o-text-overflow:ellipsis;text-overflow:ellipsis}"})]})}function Ms(e){var n=e.id,t=e.username,r=e.color,o=(0,Q.Z)().presence,l=le({variables:{ids:[n]},ssr:!1}).data;if(!l)return null;var c=l.usersByIds,s=(0,i.Z)(c,1)[0].image;return(0,a.BX)("div",{className:te().dynamic([["48dd00c96a834430",[r]]])+" following-indicator",children:[(0,a.BX)(dn.Ug,{wrap:"nowrap",className:"stack",spacing:"var(--space-4)",children:[(0,a.tZ)(dn.gC,{className:"stack",align:"center",justify:"center",children:(0,a.tZ)(pe,{id:n,username:t,image:s,color:r,size:22})}),(0,a.tZ)(dn.gC,{className:"text-container",align:"center",justify:"center",children:(0,a.BX)(yn.Z,{className:"following-text",children:["Observing ",t]})}),(0,a.tZ)(dn.gC,{className:"stack",align:"center",justify:"center",children:(0,a.BX)(Cn.Z,{size:"small",filled:!1,border:!1,textColor:r,onClick:function(){o.unfollowUser()},children:[(0,a.tZ)(Ie.T,{children:"stop observing"}),(0,a.tZ)(Z.Z,{})]})})]}),(0,a.tZ)(te(),{id:"48dd00c96a834430",dynamic:[r],children:".following-indicator.__jsx-style-dynamic-selector{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8)}.following-indicator.__jsx-style-dynamic-selector .stack{height:100%;max-width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;overflow:clip}.following-indicator.__jsx-style-dynamic-selector .text-container{height:100%;margin-right:-2px}.following-indicator.__jsx-style-dynamic-selector .following-text{color:".concat(r,";white-space:nowrap}")})]})}var As=t(22414);var Xs=t(86601);function Ns(e){var n=e.activeFile,t=e.paneId,r=function(e){var n=(0,S.Z)({},Ts,e);return T.a(Ds,n)}({variables:{replId:(0,ke.Z)()}}).data,i="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl.language:"",o=(0,c.Dv)(ur.bg),s=(0,c.b9)(ur.ao),u=(0,c.b9)(ur.Ky),d=n&&(0,pt.gK)(n),p=function(e){var n=e.paneId,t=(0,Xs.Z)(),r=(0,Jn.cr)({paneId:n});return t&&r?t:null}({paneId:t}),f=function(e){var n=e.paneId,t=_s();return(0,Jn.cr)({paneId:n})&&t.length>0?t:null}({paneId:t}),h=function(){var e=(0,nr.Z)((0,c.Dv)(As.$));return(0,l.useCallback)((function(){setTimeout((function(){var n;return null===(n=e.current)||void 0===n?void 0:n.focus()}),0)}),[e])}(),m=(0,Jn.cr)({paneId:t}),g=null;return p?g=(0,a.tZ)(Ms,{id:p.id,username:p.username,color:p.color}):d&&n?g=o?(0,a.tZ)(v.zx,{css:{backgroundColor:"transparent"},iconLeft:(0,a.tZ)(fn.Z,{}),text:"Close preview",onClick:function(){s({type:"markdown"}),h()}}):(0,a.tZ)(v.zx,{css:{backgroundColor:"transparent"},iconLeft:(0,a.tZ)(pn.Z,{}),text:"Open preview",onClick:function(){n&&(u({type:"markdown",data:{path:n}}),h())}}):n&&(g=(0,a.tZ)(Us.Z,{filePath:n,replLanguage:i,disableKeyboardShortcut:!m})),null!==g||f?(0,a.BX)(v.G7,{css:[v.l0.px(4),v.l0.rowWithGap(8)],children:[f&&n?(0,a.tZ)(Gs,{}):null,g]}):null}var Os=t(59369),Ls=t(89295),zs=t(94860),js=t(73148),Ws=t(87534),Fs=t(99932),Hs=t(90849),Vs=t(87671),$s=t(66843),Ks=(0,c.cn)(null,(function(e,n,t){var r=e($n.g4),i=e((0,Kn.z)(t)),o=i.rectAtom,a=i.type,l=e(o),c=(0,sr.Rh)(r,t);if(!c){var s=new Error("Expected pane");throw n(et.xm,{error:s}),s}if("tile"!==a){var u=e(Kn.Eh).filter((function(e){return"tile"===e.type&&!e.isHidden})),d=e(Kn.M0),p={x:l.x+l.width/2,y:l.y+l.height/2},f=u.find((function(n){var t=e(n.rectAtom);return(0,Ol.V0)(p,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})})),h="leftOf";f&&(h=(0,Ol.QN)(p,e(f.rectAtom)).placement),n(Qn.iH,(0,Wn.ZP)(r,(function(e){!function(e,n){var t=n.paneGroupPath,r=n.placement,i=n.to,o=(0,sr.KC)(e,t);if("floatingPaneGroup"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected floatingPaneGroup");(0,oc.Z)(e,t),null!==i?(0,Vn.m)(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r}):e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex}}(e,{paneGroupPath:c.paneGroupPath,to:(null===f||void 0===f?void 0:f.paneId)||["tiling"],placement:h})})))}else n(Qn.iH,(0,Wn.ZP)(r,(function(e){ac(e,{paneGroupPath:c.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})})))}));var qs=t(90145);function Ys(e){var n=e.paneId,t=(0,c.b9)(Ks),r=(0,Vs.e3)(),i=(0,Vs.CK)(),o=(0,Vs.Bd)(),l=function(e){var n=e.paneId,t=(0,tr.Z)((function(){return(0,c.cn)((function(e){return"floating"===e((0,Kn.z)(n)).type}))}),[n]);return(0,c.Dv)(t)}({paneId:n}),s=rc(),u=s.maximizePane,d=s.restoreMaximizedPane,p=tc(n);if(p)return(0,a.tZ)(v.hU,{onClick:function(){return d()},alt:p?"Restore":"Fullscreen",children:(0,a.tZ)(zs.Z,{})});var f={label:"Maximize",icon:(0,a.tZ)(Ls.Z,{}),run:function(){return u(n)}},h=l?[f]:[{label:"Insert Left",icon:(0,a.tZ)(Ws.Z,{}),run:function(){o({placement:"leftOf",paneId:n}),(0,I.j)(I.U3.WS_SPLIT_USED,{action:"opened",placement:"leftOf"})}},{label:"Insert Right",icon:(0,a.tZ)(Fs.Z,{}),run:function(){o({placement:"rightOf",paneId:n}),(0,I.j)(I.U3.WS_SPLIT_USED,{action:"opened",placement:"rightOf"})}},{label:"Insert Up",icon:(0,a.tZ)(Hs.Z,{}),run:function(){o({placement:"above",paneId:n}),(0,I.j)(I.U3.WS_SPLIT_USED,{action:"opened",placement:"above"})}},{label:"Insert Down",icon:(0,a.tZ)(js.Z,{}),run:function(){o({placement:"below",paneId:n}),(0,I.j)(I.U3.WS_SPLIT_USED,{action:"opened",placement:"below"})}},f];return(r||l)&&(h.splice(h.length-1,0,{label:l?"Unfloat":"Float",icon:l?(0,a.tZ)(qs.Z,{}):(0,a.tZ)($s.Z,{}),run:function(){t(n)}}),h.push({label:"Close",icon:(0,a.tZ)(Z.Z,{}),run:function(){i(n),(0,I.j)(I.U3.WS_SPLIT_USED,{action:"closed"})}})),(0,a.tZ)(Os.Z,{resetOnSelect:!0,label:"Pane Actions",items:h,onItemClick:function(e){e.run()}})}var Qs=(0,l.memo)(Ys),Js=v.KD.div,eu=(0,Gt.iv)([v.l0.flex.growAndShrink(1),v.l0.minWidth(16),v.l0.height("100%")]);function nu(e){var n=e.paneId,t=hc({activePaneId:n}),r=t.isDragging,i=t.dnd,o=rc().toggleMaximized;if(!i)return null;var l=r?"grabbing":"grab";return(0,a.tZ)(Js,{onDoubleClick:function(){o(n)},css:[eu],style:{cursor:l},onPointerDown:function(e){Fl(e,{start:i.start,move:i.update,end:i.end})}})}function tu(e){var n=e.paneId,t=e.onChange,r=(0,tr.Z)((function(){return(0,c.cn)((function(e){var t=e((0,Kn.z)(n));return e(t.rectAtom).width}))}),[n]),i=(0,c.Dv)(r),o=(0,nr.Z)(t),a=(0,tr.Z)((function(){return Wl()((function(){o.current()}),500)}),[o]);return(0,l.useEffect)(a,[i,a]),null}function ru(e){var n=(0,Kn.Xs)(e),t=(0,tr.Z)((function(){return(0,c.cn)((function(e){var t=e(n);return e((0,Kn.z)(t.panes[t.activeIndex])).paneId}))}),[n]);return(0,c.Dv)(t)}function iu(e){var n=e.headerId,t=(0,c.b9)(ur.Oe),r=(0,c.b9)(ur.Et),o=(0,c.b9)(ur.SG),s=(0,c.b9)(qn.U),u=(0,c.Dv)(ur.c),d=function(e){var n=(0,Kn.Xs)(e),t=(0,c.Dv)((0,tr.Z)((function(){return(0,c.cn)((function(e){return e(n).activeIndex}))}),[n])),r=(0,c.Dv)((0,tr.Z)((function(){return(0,os.kv)(n,(function(e){return e.path}),us())}),[n])),i=(0,c.Dv)((0,tr.Z)((function(){return(0,os.kv)(n,(function(e){return e.panes}),us())}),[n])),o=ru(e),a=(0,tr.Z)((function(){return(0,c.cn)((function(e){var t=e(n),r=e((0,Kn.z)(t.panes[t.activeIndex])),i=e(r.data);return(0,dr.KM)(i)?(0,dr.DQ)(i):null}))}),[n]);return{activeIndex:t,path:r,panes:i,activeTabPaneId:o,activeFile:(0,c.Dv)(a)}}(n),p=d.activeIndex,f=d.path,h=d.panes,m=d.activeTabPaneId,g=d.activeFile,Z=function(){var e,n=(0,l.useRef)(null),t=null===(e=n.current)||void 0===e?void 0:e.osInstance(),r=(0,l.useRef)(0),i=(0,l.useRef)(0),o=(0,Fi.Fg)().isDarkColorScheme;return{options:vs,handleWheel:function(e){if(t&&0!==e.deltaY&&0===e.deltaX){var n=e.deltaY<0?-1:1,o=i.current!==n?t.scroll().position.x:r.current,a=25*n,l=t.scroll().max.x;r.current=Math.max(0,Math.min(l,o-a)),i.current=n;var c=function(){if(t){var e=t.scroll().position.x,n=r.current-e,i=Math.round(e+n/10);0!==n&&(t.scroll({x:i}),window.requestAnimationFrame(c))}};window.requestAnimationFrame(c)}},ref:n,className:o?"os-theme-light":"os-theme-dark",update:(null===t||void 0===t?void 0:t.update)?function(){return t.update()}:null}}(),y=(0,i.Z)((0,xl.L)({accept:[dt.Tv.File,Sc.z.Pane,Sc.z.NewPane],hover:function(e,n){var t=n.getSourceClientOffset();t&&C({item:e,panes:h,sourceClientOffset:t.x})},collect:function(e){return{isOver:e.isOver()}},drop:function(e,n){if(!n.didDrop()){var t=null!==(null===I||void 0===I?void 0:I.index)?null===I||void 0===I?void 0:I.index:h.length;if(e.type!==dt.Tv.File)if(e.type!==Sc.z.NewPane){var i=h.includes(e.paneId)?h.length-1:h.length;o({paneId:e.paneId,index:void 0!==t&&t<i?t:i,toPaneGroupPath:f})}else r({activate:!0,paneGroupPath:f,index:t,pane:e.pane});else r({activate:!0,paneGroupPath:f,index:t,pane:{type:"codeEditor",data:{path:e.path}}})}}}),2),b=y[0],w=y[1],x=function(e){var n=e.isOver,t=(0,l.useState)(null),r=t[0],i=t[1],o=(0,l.useRef)(null),a=(0,l.useRef)([]);(0,l.useEffect)((function(){if(!n)return a.current=[],void i(null);o.current&&(a.current=(0,_e.Z)(o.current.children).map((function(e){var n=e.getBoundingClientRect();return n.x+n.width/2})))}),[n]);var c=(0,l.useCallback)((function(e){if(0!==a.current.length){var n=e.item.type===Sc.z.Pane?e.item:null,t=(null===n||void 0===n?void 0:n.paneId)||null,r=t?e.panes.indexOf(t):-1,o=(null===n||void 0===n?void 0:n.width)||80,l=a.current.map((function(e,n){return-1===r||r<n?e:e+o/2})).findIndex((function(n){return n>e.sourceClientOffset})),c=-1===l,s=-1===r?e.panes.length:e.panes.length-1;i({index:c?s:Math.min(l,s),paneId:t,width:o})}}),[]);return{tabContainerRef:o,hover:c,dropState:r}}({isOver:b.isOver}),k=x.tabContainerRef,C=x.hover,I=x.dropState,P=I?I.index:null;if((null===I||void 0===I?void 0:I.paneId)&&null!==P){var S=h.indexOf(I.paneId);S>-1&&S<P&&P++}var R=I&&null!==P?(0,_e.Z)(h.slice(0,P)).concat([I],(0,_e.Z)(h.slice(P))):h;return(0,a.BX)(a.HY,{children:[(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(2),v.l0.flex.growAndShrink(1),v.l0.align.center,v.l0.height("100%")],innerRef:w,children:[(0,a.tZ)(v.G7,{css:[v.l0.flex.row,v.l0.flex.shrink(1),v.l0.align.center,v.l0.height("100%")],children:(0,a.tZ)(fs,{style:{height:"100%",width:"100%"},className:Z.className,options:{overflowBehavior:{y:"hidden"},scrollbars:{autoHide:"leave",visibility:u?"hidden":"auto"}},onWheel:Z.handleWheel,ref:Z.ref,children:(0,a.tZ)(v.G7,{innerRef:k,css:[v.l0.flex.row,v.l0.height("100%"),v.l0.py(4),v.l0.px(2)],children:R.map((function(e,n){var r=p===n;return"string"!==typeof e?(0,a.tZ)(v.G7,{css:[v.l0.px(2)],children:(0,a.tZ)(v.G7,{css:[v.l0.borderRadius(8),v.l0.width(e.width),v.l0.height(28),v.l0.backgroundColor.accentPrimaryDimmest,{border:"1px dashed ".concat(v.TV.accentPrimaryDefault)}]})},"preview"):(0,a.tZ)(Rs,{dragGroup:1===h.length,paneId:e,isActive:r,onClick:function(){t(e)},onClose:function(){s(e)}},e)}))})})}),(0,a.tZ)(v.hU,{alt:"New tab",tooltipHidden:!0,onClick:function(){r({paneGroupPath:f,activate:!0,pane:{type:"commands",data:{autoFocus:!0}}})},children:(0,a.tZ)(gn.Z,{})}),(0,a.tZ)(nu,{paneId:m})]}),(0,a.tZ)(Ns,{headerId:n,paneId:m,activeFile:g}),(0,a.tZ)(v.G7,{css:v.l0.px(4),children:(0,a.tZ)(Qs,{paneId:m})}),Z.update?(0,a.tZ)(tu,{paneId:m,onChange:Z.update}):null]})}var ou=(0,l.memo)(iu),au=(0,Gt.iv)([v.l0.borderRadius(8,8,0,0),v.l0.position.absolute,v.l0.flex.row,v.l0.align.center],{borderBottom:"1px solid ".concat(v.TV.backgroundHigher)}),lu=["top","right","left","topRight","topLeft"];function cu(e){var n=e.headerId,t=function(e){var n=e.headerId,t=(0,Kn.Xs)(n),r=(0,tr.Z)((function(){return(0,c.cn)((function(e){return"floating"===e(t).path[0]}))}),[t]);return(0,c.Dv)(r)}({headerId:n}),r=ru(n),i=(0,c.b9)(zl);return t?(0,a.tZ)(a.HY,{children:lu.map((function(e){return(0,a.tZ)(Dl,{size:8,edge:e,onPointerDown:function(n){Fl(n,{start:function(){i({type:"start",paneId:r,edge:e})},move:function(e){var n=e.delta;i({type:"update",moveDelta:n})},end:function(){i({type:"end"})}})}},e)}))}):null}var su=(0,l.memo)(cu);function uu(e){var n=e.headerId,t=(0,Kn.Xs)(n),r=ru(n),i=tc(r),o=(0,tr.Z)((function(){return(0,c.cn)((function(e){return e(e(t).rectAtom)}))}),[t]),l=(0,c.Dv)(o),s=function(e){var n=(0,tr.Z)((function(){return(0,c.cn)((function(n){var t=n((0,Kn.z)(e)),r=e===n(Jn.J1);return n(Kl)===e?Zc.maximizedHeader:e===n(uc)?Zc.draggingHeader:"floating"===t.type?r?Zc.floatingHeaderActive:Zc.floatingHeader:Zc.tiledHeader}))}),[e]);return(0,c.Dv)(n)}(r),u=fc({paneId:r}),d=i||l,p=pc({paneId:r});return(0,a.BX)(v.Tg,{elevated:!0,css:au,style:{transform:u?"scale(".concat(u.scale,")"):void 0,transformOrigin:u?"".concat(u.originX," bottom"):void 0,width:d.width,height:d.height,top:Math.round(d.y),left:Math.round(d.x),zIndex:s,transitionProperty:p?"all":void 0,transitionDuration:p?"140ms":void 0,transitionTimingFunction:p?"ease-out":void 0},children:[(0,a.tZ)(ou,{headerId:n}),(0,a.tZ)(su,{headerId:n})]})}var du=(0,l.memo)(uu);function pu(){var e=(0,ic.K)(),n=(0,c.Dv)($n._E),t=function(){var e=(0,tr.Z)((function(){return(0,c.cn)((function(e){var n=e(ic.m);return"detachPreview"===(null===n||void 0===n?void 0:n.type)?Zc.detachPreview:Zc.dropPreview}))}),[]);return(0,c.Dv)(e)}();if(!e)return null;var r=e.rect,i="detachPreview"===e.type?e.progress:1,o="detachPreview"===e.type?e.rect.height:8,l="detachPreview"===e.type&&i<.98?w.TV.foregroundDefault:w.TV.accentPrimaryDefault,s="detachPreview"===e.type?void 0:w.TV.accentPrimaryDimmer;return(0,a.tZ)("div",{style:{position:"absolute",border:"1px ".concat(i<.98?"dashed":"solid"),pointerEvents:"none",width:r.width,height:r.height,backgroundColor:s,borderColor:l,borderRadius:o,zIndex:t,opacity:"detachPreview"===e.type?.5*i:.2,transform:"translate(".concat(Math.round(r.x),"px, ").concat(Math.round(r.y),"px)"),transition:n?"transform 140ms, width 140ms, height 140ms, border-radius 140ms":void 0},children:"detachPreview"===e.type?(0,a.tZ)(fu,{progress:i}):null})}function fu(e){var n=e.progress;return(0,a.tZ)("div",{style:{width:"100%",height:"100%",transform:"scale(".concat(n,")"),background:"radial-gradient(transparent, ".concat(w.TV.backgroundHighest,")"),borderRadius:"100%"}})}var hu=(0,l.memo)(pu),vu=t(96189);var mu=t(92364);function gu(){var e=(0,R.Z)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return gu=function(){return e},e}var Zu=(0,E.Ps)(gu());function yu(e){return bu.apply(this,arguments)}function bu(){return bu=(0,r.Z)((function(e){var n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return null===mr.l?[2]:[4,mr.l.query({query:Zu,variables:{username:e}})];case 1:return[2,null===(t=r.sent().data)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.image]}}))})),bu.apply(this,arguments)}function wu(){return"Notification"in window?"true"===ot.Z.get(Pu,"string")?"dismissed":window.Notification.permission:"denied"}function xu(){return ku.apply(this,arguments)}function ku(){return(ku=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){try{window.Notification.requestPermission().then()}catch(n){return[2,new Promise((function(e){window.Notification.requestPermission((function(n){e(n)}))}))]}return[2,window.Notification.requestPermission()]}))}))).apply(this,arguments)}function Cu(){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,xu()];case 1:return e=n.sent(),Su(!1),(0,I.j)("granted"===e?I.U3.WEB_NOTIFICATION_PERM_GRANTED:I.U3.WEB_NOTIFICATION_PERM_DENIED),[2]}}))}))).apply(this,arguments)}var Pu="notifications/dismissedModal";function Su(e){ot.Z.set(Pu,String(e)),e&&(0,I.j)(I.U3.WEB_NOTIFICATION_PERM_DISMISSED_MODAL)}var Ru={};function Eu(){return(Eu=(0,r.Z)((function(e){var n,t,r,i,a,l,c,s,u,d,p;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.title,t=e.body,r=e.badge,i=e.icon,a=e.iconByUsername,l=e.tag,c=e.onClick,s=e.cacheDuration,u=void 0===s?0:s,!document.hidden&&document.hasFocus()?[2]:"granted"!==wu()?[2]:(d=Date.now(),l in Ru&&Ru[l]+u>d?[2]:a?[4,yu(a)]:[3,2]);case 1:i=o.sent(),o.label=2;case 2:return p=new window.Notification(n,{body:t,badge:r||"/public/images/logo-grayscale.png",icon:i||"/public/images/icon-square.png",tag:l}),setTimeout((function(){p.close()}),1e4),p.addEventListener("click",(function(){window.focus(),p.close()})),c&&p.addEventListener("click",c),Ru[l]=d,[2]}}))}))).apply(this,arguments)}var Tu=t(20431);var Du=44100,Uu=32896,_u=function e(){var n=this;(0,yl.Z)(this,e),this.audioStart=0,this.feed=function(e){var t=n.getFormatedValue(e),r=new Float32Array(n.samples.length+t.length);r.set(n.samples,0),r.set(t,n.samples.length),n.samples=r},this.getFormatedValue=function(e){for(var n=new Float32Array(e.length),t=0;t<e.length;t++)n[t]=e[t]/2147483648;return n},this.stop=function(){if(n.bufferSource)try{n.bufferSource.stop()}catch(e){if("InvalidStateError"!==e.name&&"RangeError"!==e.name)throw e}},this.flush=function(e){if(n.audioCtx&&n.samples.length){var t=0,r=n.audioCtx.currentTime;if(0===e)n.startTime=r,n.audioStart=r;else{for(var i=r-n.audioStart,o=Math.floor(i*Du);o>e-Uu;)n.audioStart+=.7459410430839002,o-=Uu;o>e&&(t=o-e,n.startTime=r),n.startTime=r}n.samples=n.samples.slice(t,n.samples.length);for(var a,l,c,s=n.audioCtx.createBufferSource(),u=n.samples.length/1,d=n.audioCtx.createBuffer(1,u,Du),p=0;p<1;p++)for(a=d.getChannelData(p),l=p,c=0;c<u;c++)a[c]=n.samples[l],l+=1;n.startTime<n.audioCtx.currentTime&&(n.startTime=n.audioCtx.currentTime),s.buffer=d,s.connect(n.gainNode),s.start(n.startTime),n.stop(),n.bufferSource=s,n.startTime+=d.duration,n.samples=new Float32Array}},this.samples=new Float32Array;var t=window.AudioContext||window.webkitAudioContext;this.audioCtx=new t,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime};function Gu(e){var n=e.container,t=(0,l.useState)(!1),r=t[0],i=t[1],o=(0,l.useRef)(null);(0,l.useEffect)((function(){return n.openChannel({name:"audio",service:"audio"},(function(e){var n=e.channel;if(n){var t=null,r=!1;return n.onCommand((function(e){var n;r||(r=!0,(0,I.j)(I.U3.AUDIO_PLAYING_STARTED),o.current=function(){t=new _u,o.current=null},i(!0)),t&&(null===e||void 0===e||null===(n=e.audio2)||void 0===n?void 0:n.data)&&(e.audio2.samples||(e.audio2.samples=0),t.feed(Int32Array.from(e.audio2.data)),t.flush(e.audio2.samples))})),function(){i(!1),t&&(t.stop(),t=null),o.current=null}}}))}),[n]);var c=function(){i(!1),(0,I.j)(I.U3.AUDIO_PROMPT_CLOSED,{accepted:!1})};return(0,a.tZ)(v.u_,{isOpen:r,onRequestClose:c,children:(0,a.BX)(v.G7,{css:[v.l0.colWithGap(24)],children:[(0,a.tZ)(v.h4,{variant:"headerDefault",level:1,children:"We hear audio!"}),(0,a.BX)(v.G7,{css:[v.l0.colWithGap(8)],children:[(0,a.tZ)(v.xv,{multiline:!0,children:"Hey! It appears that this Repl is playing audio."}),(0,a.tZ)(v.xv,{multiline:!0,children:"In order for us to hear the audio you\u2019re receiving, please click confirm."})]}),(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(12),v.l0.justify.end],children:[(0,a.tZ)(v.zx,{onClick:c,text:"Cancel"}),(0,a.tZ)(v.zx,{colorway:"positive",onClick:function(){i(!1),(0,I.j)(I.U3.AUDIO_PROMPT_CLOSED,{accepted:!0}),o.current&&o.current()},text:"Confirm",iconLeft:(0,a.tZ)(x.Z,{})})]})]})})}var Bu=t(51995),Mu=t(91082),Au=t(48920),Xu={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"Enter"};function Nu(){var e=(0,c.b9)(Et),n=(0,l.useState)(!1),t=n[0],r=n[1],i=(0,No.A)(),o=(0,Q.Z)(),s=o.fs,u=o.container,d=o.runner,p=(0,ee.L7)(d),f=(0,Oo.T)(),h=(0,Zr.C)();(0,Xr.x)(Pt,{run:e}),(0,Xr.x)(Ro.q,{run:function(){e(Ro.i({openFile:h,fs:s,shouldHideFile:f,getRecentFiles:i}))}}),(0,Xr.x)(Ao,{run:function(){e(Xo({container:u}))}}),Ur(Ro.i({openFile:h,fs:s,shouldHideFile:f,getRecentFiles:i}));var v=(0,ir.Q)("flagGhostrunner");return Ur(Xo({container:u,activeOnly:v})),Ur({match:Mr.pl,data:{type:"action",icon:(0,a.tZ)(Bu.Z,{}),label:"Run",description:"Run Repl",run:function(){d.run()},keyboardShortcut:Xu}},{enabled:p===Au.A.IDLE}),(0,Xr.x)(Xu,{run:function(){p===Au.A.RUNNING&&d.stopRun(),d.run()},enabled:p!==Au.A.OFFLINE}),Ur({match:Mr.pl,data:{type:"action",icon:(0,a.tZ)(Mu.Z,{}),label:"Stop",description:"Stop Repl",run:function(){d.stopRun()}}},{enabled:p===Au.A.RUNNING}),Ur({match:(0,Mr.zf)({defaultScore:.5}),data:{type:"action",label:"Create",icon:(0,a.tZ)(gn.Z,{}),description:"Create a new Repl",run:function(){r(!0)}}}),(0,a.tZ)(g.Z,{isOpen:t,onRequestClose:function(){return r(!1)},maxWidth:600,centered:!0,children:(0,a.tZ)(ji.Z,{})})}var Ou=(0,l.memo)(Nu);function Lu(e){var n=e.children,t=e.tour,r=function(e){var n;i&&t&&"function"===typeof(null===(n=window.analytics)||void 0===n?void 0:n.user)&&(0,I.yV)({id:window.analytics.user().id(),workspaceTourId:t.id,workspaceTourStatus:e===t.steps[t.steps.length-1].id?"completed":e.toLowerCase()})};if(!t)return(0,a.tZ)(a.HY,{children:n});var i="workspace-desktop-tour"===t.id||"workspace-desktop-new-user-tour"===t.id;return(0,a.tZ)(Ar.r,{tour:t,onStep:r,onDone:r,children:n})}var zu=t(84790),ju=t(31066);function Wu(){var e=(0,R.Z)(["\n  query ContentsDiverged {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return Wu=function(){return e},e}var Fu={},Hu=(0,E.Ps)(Wu());var Vu=t(14456),$u=t(99094),Ku=Vu.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),qu=Vu.p.line({attributes:{class:"cm-diff-inserted"}}),Yu=Vu.p.line({attributes:{class:"cm-diff-deleted"}}),Qu=yr.Py.define({map:function(e,n){return e.map(n)}}),Ju=function(e){(0,bl.Z)(t,e);var n=(0,wl.Z)(t);function t(){return(0,yl.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},t}(Vu.l9);function ed(e){var n=new yr.f_,t=new Ju;e.sort((function(e,n){return e.character-n.character}));var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,s=c.character,u=c.padding,d=0;d<u;d++)n.add(s,s,Vu.p.widget({widget:t,side:-1,block:!0}))}catch(p){i=!0,o=p}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}function nd(e){var n=e.coloredLines,t=e.colorDecoration,r=Vu.lg.fromClass((function e(r){(0,yl.Z)(this,e);var i=new yr.f_,o=!0,a=!1,l=void 0;try{for(var c,s=n[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=r.state.doc.line(u);i.add(d.from,d.from,t)}}catch(p){a=!0,l=p}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}this.decorations=i.finish()}),{decorations:function(e){return e.decorations}}),i=yr.QQ.define({create:function(){return Vu.p.none},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(Qu))return l.value}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.docChanged?e.map(n.changes):e},provide:function(e){return Vu.tk.decorations.from(e)}});return[Ku,r,i]}var td=function(){var e=function(e,n){return Vu.tk.domEventHandlers({scroll:function(t,r){if(r===e&&t.target){var i=t.target;if(i.scrollTop){var o=i.scrollTop;n.scrollDOM.scrollTo({top:o})}}}})},n=new yr.F6,t=new yr.F6;return{extensions:function(){return{right:n.of([]),left:t.of([])}},setup:function(r,i){r.dispatch({effects:t.reconfigure(e(r,i))}),i.dispatch({effects:n.reconfigure(e(i,r))})}}},rd=t(80159),id=t(78244),od=td(),ad=od.extensions,ld=od.setup;function cd(e){var n=e.left,t=e.right,r=n.code,o=(0,At.Z)(n,["code"]),a=t.code,c=(0,At.Z)(t,["code"]),s=(0,rd.Z)((0,S.Z)({readOnly:!0,lineWrapping:!1,initialDoc:r,extensions:[ad().left]},o)),u=s.view,d=s.ref,p=(0,rd.Z)((0,S.Z)({readOnly:!0,lineWrapping:!1,initialDoc:a,extensions:[ad().right]},c)),f=p.view,h=p.ref,v=(0,i.Z)(l.useState(!1),2),m=v[0],g=v[1],Z=(0,i.Z)(l.useState(!1),2),y=Z[0],b=Z[1];return l.useEffect((function(){if(u&&f&&m&&y){var e=setTimeout((function(){ld(u,f),function(e,n){var t=(0,$u.Bz)(e.state.doc.sliceString(0),n.state.doc.sliceString(0));e.dispatch({effects:[yr.Py.appendConfig.of(nd({coloredLines:t.leftColored.sort((function(e,n){return e-n})),colorDecoration:Yu})),Qu.of(ed(t.leftPadded))]}),n.dispatch({effects:[yr.Py.appendConfig.of(nd({coloredLines:t.rightColored.sort((function(e,n){return e-n})),colorDecoration:qu})),Qu.of(ed(t.rightPadded))]})}(u,f)}));return function(){return clearTimeout(e)}}}),[u,f,m,y]),l.useEffect((function(){u&&(u.dispatch({changes:{from:0,to:u.state.doc.length,insert:r}}),g(!0))}),[r,u]),l.useEffect((function(){f&&(f.dispatch({changes:{from:0,to:f.state.doc.length,insert:a}}),b(!0))}),[a,f]),{left:{view:u,ref:d,code:r,options:o,ready:m},right:{view:f,ref:h,code:a,options:c,ready:y}}}function sd(e){var n,t=e.diffViewer,r=(0,At.Z)(e,["diffViewer"]);return(0,a.BX)(a.HY,{children:[(0,a.tZ)("div",{css:{height:t.ready?0:"auto"},ref:t.ref}),!t.ready&&(0,a.tZ)(id.PH,(0,S.Z)({code:null!==(n=t.code)&&void 0!==n?n:""},t.options,r))]})}function ud(){var e,n=(0,Q.Z)().fs,t=(0,l.useRef)(new Map),i=(0,ut.Z)(),s=(0,l.useState)(!1),u=s[0],d=s[1],p=(0,l.useState)(!1),f=p[0],h=p[1],m=(0,l.useState)([]),g=m[0],Z=m[1],y=function(e){var n=(0,S.Z)({},Fu,e);return T.a(Hu,n)}().data,w=(null===y||void 0===y||null===(e=y.currentUser)||void 0===e?void 0:e.isAdmin)||window.location.search.includes("debug=1"),x=(0,et.IY)(),k=(0,c.b9)(ur.a4),C=g.map((function(e){return e.path})).map((function(e){return{title:e,path:e}})),P=(0,l.useState)(),R=P[0],E=P[1];(0,l.useEffect)((function(){if(i&&!t.current.has(i)&&i!==ju.rq){var e=function(e){k(e),t.current.delete(i),Z((function(e){return e.filter((function(e){return e.path!==i}))}))};(0,pt.Mb)(i)?n.watchTextFile(i,{onMoveOrDelete:e,onError:function(e,t){e.code||(n.flush(),n.persist({skipDebounce:!0}),x({error:e,extras:t,tags:{ot:!0}}))},onReconnectFail:function(e,n){Z((function(t){return(0,_e.Z)(t.filter((function(e){return e.path!==i}))||[]).concat([{path:i,prompt:n,cb:e}])})),d(!0),R||E(i)}}):n.watchFile(i,{onChange:function(){},onMoveOrDelete:e}),t.current.set(i,!0)}}),[i,n,x,k]);var D,U,_=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return(0,I.j)(I.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,I.j)(I.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),h(!0),[4,Promise.all(g.map((function(n){return Z((function(e){var t=e.filter((function(e){return e.path!==n.path}));return 0===t.length?d(!1):E(t[0].path),t})),n.cb(e)})))];case 1:return n.sent(),h(!1),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),G=R?g.find((function(e){return e.path===R})):null,B=null===G||void 0===G?void 0:G.prompt,M=R,A=cd({left:{code:null!==(D=null===B||void 0===B?void 0:B.localContent)&&void 0!==D?D:"",filePath:M},right:{code:null!==(U=null===B||void 0===B?void 0:B.remoteContent)&&void 0!==U?U:"",filePath:M}}),X=A.left,N=A.right,O=[v.l0.minHeight("7em"),v.l0.maxHeight("50vh"),v.l0.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,a.tZ)(v.u_,{css:[{maxHeight:"90%",maxWidth:"90%"}],preventClose:!0,isOpen:u,onRequestClose:function(){},children:(0,a.BX)(v.G7,{css:[v.l0.colWithGap(24)],children:[(0,a.tZ)(b.h,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,a.BX)(b.x,{multiline:!0,children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",g.length>1?"these files":"this file"," you'd like to keep."," ",g.length>1?(0,a.BX)("strong",{children:["There are ",g.length," files impacted by this."]}):""]}),f?(0,a.tZ)(zu.Loader,{}):(0,a.BX)(a.HY,{children:[C.length?(0,a.tZ)(v.Ph,{initialSelectedItem:C[0],selectedItem:C.find((function(e){return e.path===R})),items:C,onChange:function(e){E(e.path)}}):null,w?(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(16),v.l0.justify.start,v.l0.align.center,v.l0.pt(16),v.l0.p(8),v.l0.backgroundColor.redDimmest,v.l0.font.code],children:[(0,a.tZ)(b.x,{variant:"subheadDefault",children:"Debug View"}),(0,a.BX)(b.x,{children:["Divergence type: ",null===B||void 0===B?void 0:B.case]})]}):null,(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8)],children:[(0,a.BX)(v.G7,{css:[v.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,a.tZ)(b.x,{variant:"subheadDefault",children:"My changes"}),(0,a.tZ)(v.Tg,{elevated:!0,css:[v.l0.flex.growAndShrink(1),v.l0.py(8)],children:(0,a.tZ)(v.G7,{css:O,children:(0,a.tZ)(sd,{diffViewer:X})})}),(0,a.BX)(v.G7,{css:[v.l0.pt(16)],children:[(0,a.tZ)(b.x,{multiline:!0,css:[v.l0.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,a.tZ)(v.zx,{onClick:function(){_("local")},text:"Reset to Mine"})]})]}),(0,a.BX)(v.G7,{css:[v.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,a.tZ)(b.x,{variant:"subheadDefault",children:"Shared changes"}),(0,a.tZ)(v.Tg,{elevated:!0,css:[v.l0.flex.growAndShrink(1),v.l0.py(8)],children:(0,a.tZ)(v.G7,{css:O,children:(0,a.tZ)(sd,{diffViewer:N})})}),(0,a.BX)(v.G7,{css:[v.l0.pt(16),v.l0.justify.end],children:[(0,a.tZ)(b.x,{multiline:!0,css:[v.l0.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,a.tZ)(v.zx,{onClick:function(){_("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}var dd=t(1557);function pd(){var e=(0,Q.Z)().fs,n=(0,l.useState)(!1),t=n[0],r=n[1],i=(0,l.useState)(!1),o=i[0],c=i[1],s=(0,ft.D)();(0,l.useEffect)((function(){if(!o)return e.onDiskQuotaExceeded((function(){r(!0)}))}),[e,o]);var u=function(){r(!1)};return(0,a.tZ)(v.u_,{isOpen:t,onRequestClose:u,children:(0,a.BX)(v.G7,{css:[v.l0.colWithGap(24)],children:[(0,a.BX)(v.h4,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,a.tZ)(dd.Z,{color:v.TV.accentNegativeDefault,size:20})]}),(0,a.BX)(v.xv,{multiline:!0,variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,a.tZ)(el.Z,{})," icon on the left."]}),(0,a.tZ)(v.xv,{multiline:!0,children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,a.tZ)(v.xv,{multiline:!0,variant:"small",children:"We apologize for the inconvenience. We are working on a solution to allow you to boost your disk limits."}),(0,a.BX)(v.G7,{css:v.l0.rowWithGap(8),tag:"label",children:[(0,a.tZ)(v.XZ,{id:s,checked:o,onChange:function(e){return c(Boolean(e.currentTarget.value))}}),(0,a.tZ)(v.xv,{multiline:!0,variant:"small",children:"Do not show this message again for this session."})]}),(0,a.tZ)(v.zx,{onClick:u,text:"Close"})]})})}var fd=t(46701),hd=t(79611),vd=t(43186),md=t(7787),gd=!1;var Zd=t(95642);function yd(){var e=(0,R.Z)(["\n  mutation UpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return yd=function(){return e},e}var bd={},wd=(0,E.Ps)(yd());function xd(){var e=(0,ke.Z)(),n=(0,Q.Z)().container,t=(0,c.b9)(ur._N),r=(0,i.Z)(function(e){var n=(0,S.Z)({},bd,e);return M.D(wd,n)}(),1),o=r[0];(0,l.useEffect)((function(){return n.onPortOpened((function(n){var r,i=n.isVnc;t(i?"vnc":"webview"),r=i?{isVnc:!0}:{isServer:!0},o({variables:{input:(0,S.Z)({id:e},r)}})}))}),[n,t,o,e])}var kd=t(18888),Cd=t(58482),Id=t(87238);var Pd=t(10129);function Sd(){return(Sd=(0,r.Z)((function(e){var n;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:if(!mr.l)throw new Error("Expected Apollo client");return[4,mr.l.query({query:Id.Ux,variables:{id:e}})];case 1:return[2,"Repl"===(null===(n=t.sent().data)||void 0===n?void 0:n.repl.__typename)?n.repl.title:null]}}))}))).apply(this,arguments)}function Rd(){var e=(0,Q.Z)(),n=e.container,t=e.presence;l.useEffect((function(){var e=t.onUserJoin((function(t){var r,i=null===(r=n.getContext())||void 0===r?void 0:r.repl;if(i){var o=t.username;return function(e){return Sd.apply(this,arguments)}(i.id).then((function(e){e&&function(e){Eu.apply(this,arguments)}({title:"",body:"".concat(o," joined ").concat(e),tag:"".concat(i.id,"-").concat(o,"-joined"),iconByUsername:o,cacheDuration:9e5})})),function(){e()}}}))}),[t,n])}var Ed=t(15335),Td=t(75436);function Dd(){var e=(0,R.Z)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return Dd=function(){return e},e}var Ud={},_d=(0,E.Ps)(Dd());function Gd(){!function(e){var n=(0,S.Z)({},Ud,e);Td.m(_d,n)}({variables:{replId:(0,ke.Z)()},skip:(0,Ed.Z)()!==Ea.e.CONNECTED})}var Bd=t(95716);function Md(){var e=(0,R.Z)(["\n  query GitRepoIsNewFork($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        origin {\n          id\n        }\n        timeCreated\n        timeUpdated\n      }\n    }\n  }\n"]);return Md=function(){return e},e}var Ad={},Xd=(0,E.Ps)(Md());var Nd=t(16799),Od=t(67128);function Ld(){var e=(0,ke.Z)(),n=(0,Q.Z)().container,t=function(e){var n=(0,S.Z)({},Ad,e);return T.a(Xd,n)}({variables:{replId:e}}).data,r=null===t||void 0===t?void 0:t.repl;(0,l.useEffect)((function(){if(r){var e,t=null!==r.origin,i=new Date(r.timeUpdated).getTime()-new Date(r.timeCreated).getTime()<1e3;if(t&&i)(e=n).exec.apply(e,(0,_e.Z)(Nd.rO.format(Od.Xe)))}}),[n,r])}function zd(){var e=(0,mn.Z)(),n=e.showConfirm,t=e.showNotice,r=e.hideMessage,i=e.showError,o=(0,Q.Z)().container;(0,l.useEffect)((function(){var e=o.onToast((function(e){e.startsWith("PANIC")||t(e,function(e){var n=e.length/.025+1e3;return Math.max(1e4,n)}(e))})),a=null,l=!1,c=o.onConnectionStateChanged((function(e){if(a&&(r(a),a=null),e===Ea.e.CONNECTED)return l=!0,void(a=n("Connected",1500));l&&(e!==Ea.e.CONNECTING?e!==Ea.e.DISCONNECTED||(a=i("Disconnected")):a=t("Reconnecting"))}));return function(){a&&r(a),e(),c()}}),[o,n,t,i,r])}var jd=t(9523);function Wd(){var e=(0,R.Z)(["\n  query ReplEnvironment2LoadCurriculum($id: String!) {\n    currentUser {\n      id\n      isTeacher: hasRole(role: TEACHER)\n      ...CrosisContextCurrentUser\n    }\n    repl(id: $id) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        language\n        origin {\n          id\n          ...CrosisContextRepl\n          origin {\n            id\n            ...CrosisContextRepl\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Wd=function(){return e},e}var Fd={},Hd=(0,E.Ps)(Wd(),jd.D,jd.C);var Vd=t(50217),$d=t(18962),Kd=t(25108);function qd(){var e,n,t=(0,ke.Z)(),i=(0,Q.Z)(),a=i.fs,c=i.session,s=function(e){var n=(0,S.Z)({},Fd,e);return T.a(Hd,n)}({variables:{id:t}}).data,u="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)?s.repl:null,d="CurrentUser"===(null===s||void 0===s||null===(e=s.currentUser)||void 0===e?void 0:e.__typename)?s.currentUser:null,p="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)&&s.repl.isModelSolutionFork,f=p?u&&(null===(n=u.origin)||void 0===n?void 0:n.origin):u&&u.origin||null,h=(0,Ta.b)("Repl"===(null===f||void 0===f?void 0:f.__typename)?{repl:f,currentUser:d||void 0}:null);l.useEffect((function(){u&&d&&u.isProject&&a.stat(".lesson").then((function(e){e.exists||a.createDir(".lesson")}))}),[a,d,u]),l.useEffect((function(){if(u&&(u.isProjectFork||p)&&f&&h){var e=(0,Ea.Z)({onUnrecoverableError:function(e){Kd.error(e),xi.$e((function(n){n.setTag("curriculum-authoring",!0),n.setExtra("originId",f.id),xi.Tb(e)}))}}),n=(0,Ua.Z)({container:e});e.connect({context:h,fetchConnectionMetadata:function(){return(0,Vd.Z)({url:"/data/repls/".concat(u.id,"/get_repl_origin_guest_connection_metadata")})}});var t=e.onConnectionStateChanged(function(){var i=(0,r.Z)((function(r){var i,l;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(r!==$d.e.CONNECTED)return[3,8];t(),o.label=1;case 1:return o.trys.push([1,6,7,8]),[4,a.copyDirFromRemote(".lesson",".lesson",n)];case 2:return(i=o.sent()).error?(xi.$e((function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",f.id),xi.Tb({message:"Error copying lesson: ".concat(i.error)})})),[3,5]):[3,3];case 3:return[4,a.stat(".lesson/instructions.md")];case 4:o.sent().exists&&c.setInstructionsViewerVisible(!0),o.label=5;case 5:return[3,8];case 6:return l=o.sent(),xi.$e((function(e){e.setTag("curriculum-authoring",!0),xi.Tb(l)})),[3,8];case 7:return e.destroy(),[7];case 8:return[2]}}))}));return function(e){return i.apply(this,arguments)}}());return function(){return e.destroy()}}}),[a,h,u,f,p,c])}var Yd=t(68122),Qd=t(39571);function Jd(){var e=(0,R.Z)(["\n  fragment WorkspaceUseDebuggerRepl on Repl {\n    id\n    lang {\n      id\n      hasDAP\n    }\n  }\n"]);return Jd=function(){return e},e}function ep(){var e=(0,R.Z)(["\n  query WorkspaceUseDebugger($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceUseDebuggerRepl\n      }\n    }\n  }\n  ","\n"]);return ep=function(){return e},e}var np={},tp=(0,E.Ps)(Jd()),rp=(0,E.Ps)(ep(),tp);function ip(e){var n=e.onOpenFile,t=e.onOutput,r=(0,Q.Z)(),i=r.debuggest,o=r.dotReplit,a=function(e){var n=(0,S.Z)({},np,e);return T.a(rp,n)}({variables:{replId:(0,ke.Z)()}}).data,c=function(e){var n=e.repl,t=e.dotReplit,r=e.debuggest;return(0,l.useEffect)((function(){if(n){if(!n.lang.hasDAP)return t.watch((function(e){var n;e.error||(null===(n=e.config.debugger)||void 0===n?void 0:n.support)&&r.connect()}));r.connect()}}),[n,r]),(0,Yd.Z)(r.mainClient)}({debuggest:i,dotReplit:o,repl:"Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null});!function(e){(0,l.useEffect)((function(){if(e){var n=e.onStarted((function(e){(0,I.j)(I.U3.DEBUGGER_USED,{action:"started",joined:e})})),t=e.onPaused((function(e){(0,I.j)(I.U3.DEBUGGER_USED,{action:"paused",reason:e})})),r=e.onBreakpoint((function(n){(0,I.j)(I.U3.DEBUGGER_USED,{action:"breakpointToggled",breakpointAction:n,state:e.state.current})}));return function(){n(),t(),r()}}}),[e])}(c),function(e,n){var t,r=n.onOutput,i=n.onOpenFile,o=(0,nr.Z)(r),a=(0,nr.Z)(i);(0,l.useEffect)((function(){if(e)return e.onOutput((function(e){o.current(e)}))}),[e]);var c=(0,Yd.Z)(e?e.stackFrames:null),s=null===c||void 0===c?void 0:c[0],u=null===s||void 0===s||null===(t=s.source)||void 0===t?void 0:t.path,d=null===s||void 0===s?void 0:s.line;(0,l.useEffect)((function(){if(u&&d&&e){var n=(0,Qd.om)(u);n?a.current({path:n,line:d}):e.stepOut()}}),[e,u,d])}(c,{onOpenFile:n,onOutput:t})}var op=t(75338),ap={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"S"};var lp=t(536),cp=t(45435);var sp=t(52008);var up=t(99336);var dp=t(5442),pp=t(63848),fp=t(1864),hp="video.json",vp=(0,fp.join)(pp.V,hp);function mp(e,n){return gp.apply(this,arguments)}function gp(){return(gp=(0,r.Z)((function(e,n){var t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return n.find((function(e){return e.type===dt.Tv.File&&e.filename===hp}))?[4,e.readFile(vp)]:[2,null];case 1:return(t=r.sent()).error?[2,null]:[2,t.content.toString()]}}))}))).apply(this,arguments)}function Zp(){!function(e){var n=(0,Q.Z)().fs,r=(0,Wo.Z)().isTutorial,o=(0,nr.Z)(e);(0,l.useEffect)((function(){if(r){var e=!1,a=n.watchDir(pp.V,{onChange:function(r){Promise.all([t.e(1142).then(t.t.bind(t,11142,23)),mp(n,r)]).then((function(n){var t=(0,i.Z)(n,2),r=t[0],a=t[1];if(!e)if(a){var l=null;try{l=r.parse(a)}catch(s){}var c="object"===typeof l&&"string"===typeof l.embedUrl?l.embedUrl:null;o.current(c?{embedUrl:c}:null)}else o.current(null)}))},onMoveOrDelete:function(){o.current(null)},onError:function(){o.current(null)}});return function(){e=!0,a()}}}),[n,r,o])}((0,ci.gQ)())}var yp=t(55528),bp=t(4862),wp=t(58823);function xp(){var e=(0,R.Z)(["\n  query TrackMultiplayer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return xp=function(){return e},e}var kp={},Cp=(0,E.Ps)(xp());function Ip(){var e,n=(0,Q.Z)().presence,t=(0,ke.Z)(),r=(0,l.useRef)(!1),i=function(e){var n=(0,S.Z)({},kp,e);return T.a(Cp,n)}({variables:{replId:t}}),o=i.data,a=i.loading,c=0;"Repl"===(null===o||void 0===o?void 0:o.repl.__typename)&&(c=o.repl.multiplayers.length,"User"===(null===(e=o.repl.owner)||void 0===e?void 0:e.__typename)&&(c+=1));(0,l.useEffect)((function(){if(!a&&!r.current){var e=n.onActiveUsersChange((function(){r.current=!0,e(),(0,I.j)(I.U3.MULTIPLAYER_REPL_OPENED,{replId:t,participantsCount:c,usersOnlineCount:n.getActiveUsers().length})}));return e}}),[t,a,c,n])}function Pp(e){var n,t=e.repl,r=e.currentUser,o=r.id===(null===(n=t.user)||void 0===n?void 0:n.id),a=(0,vd.Z)().preferences,u=(0,Q.Z)().session;!function(){var e=(0,Q.Z)(),n=e.lspnix,t=e.lsp,r=e.fs,i=(0,vd.Z)().preferences.codeIntelligence,o=(0,ut.Z)()||"",a=(0,yp.Z)(o);l.useEffect((function(){if(!i)return t.stop(),void n.disable();t.start(),n.enable()}),[n,t,i]),l.useEffect((function(){if(a&&o&&(0,pt.Mb)(o))return a.onWorkspaceEdit((function(e){var n=e.edit;return(0,wp.w)({edit:n,fs:r,client:a}),{applied:!0}}))}),[r,a,o]),l.useEffect((function(){if(a&&o&&(0,pt.Mb)(o)&&(0,bp.Z)(a).isTextDocumentSyncSupported)return r.watchTextFile(o,{onFlush:function(){a.isOpen(o)&&a.notify.didSave(o)}})}),[r,o,a])}(),function(){var e=(0,cr.ne)();(0,l.useEffect)((function(){var n=function(){e.flush()};return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}}),[e]),(0,l.useEffect)((function(){var n=function(){"hidden"===document.visibilityState&&e({force:!1})};return document.addEventListener("visibilitychange",n),function(){document.removeEventListener("visibilitychange",n)}}),[e]),(0,l.useEffect)((function(){var n=null;return function t(){n=setTimeout((function(){e({force:!1}),t()}),6e4)}(),function(){n&&clearTimeout(n)}}),[e]),(0,l.useEffect)((function(){return function(){e.flush()}}),[e])}(),(0,kd.Z)(),(0,lp.Z)({workspaceType:"desktop"}),l.useEffect((function(){var e=function(e){"s"===e.key&&(0,Pd.j)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),Rd(),Gd(),function(){var e=(0,Q.Z)().presence;l.useEffect((function(){return e.onFollowingUsersChanged((function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,I.j)(Bd.U3.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,I.j)(Bd.U3.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})}))}),[e])}(),function(e){var n=e.isAnon,t=e.isOwner,r=e.ignoreUnloadPrompt,i=(0,ke.Z)();(0,Id.Vg)({skip:n||t,variables:{replId:i},onData:function(e){var n=e.data.data;!1===(null===n||void 0===n?void 0:n.currentUserCanWrite)&&(r(!0),window.location.reload())}})}({isAnon:!1,isOwner:o,ignoreUnloadPrompt:(0,Cd.Z)()}),Ld(),function(){var e=(0,Q.Z)().presence,n=(0,ut.Z)();(0,l.useEffect)((function(){e.updateOpenFile(n)}),[e,n])}(),zd(),qd(),(0,op.Z)(),function(){var e=(0,Q.Z)().runner,n=(0,c.b9)(ur.im),t=(0,c.b9)(ur.Ky),r=(0,c.b9)(ur.ao),i=jo(),o=(0,c.Dv)(cr.Mn),a=(0,Ar.e)(Nr.y.Output);l.useEffect((function(){if(o&&(null===a||void 0===a?void 0:a.isActive)){var e=setInterval((function(){n()}),200);return function(){clearInterval(e)}}}),[null===a||void 0===a?void 0:a.isActive,n,o]),l.useEffect((function(){if(o)return e.onStateChanged((function(e){e===Au.A.RUNNING&&n()}))}),[e,n,o]),l.useEffect((function(){o&&(i?t({type:"instructions"}):r({type:"instructions"}))}),[i,t,r,o]),(0,Xr.x)(ap,{run:function(){return t({type:"shell"})},enabled:Boolean(o)})}(),function(){var e=(0,s.useRouter)(),n=(0,Q.Z)().container,t=(0,i.Z)((0,c.KO)(cp.a0),2),r=t[0],o=t[1],a=(0,c.b9)(cp.Th);(0,l.useEffect)((function(){e.query.debug&&o(!0)}),[o,e.query.debug]),(0,l.useEffect)((function(){if(r)return n.client().onDebugLog((function(e){"log"===e.type&&a((function(n){return(0,_e.Z)(n).concat([{index:n[n.length-1]?n[n.length-1].index+1:0,dir:e.log.direction,cmd:e.log.cmd,timestamp:window.performance.now()}])}))}))}),[r,a,n])}(),function(){var e=(0,Q.Z)(),n=e.presence,t=e.session;(0,l.useEffect)((function(){return n.onUserOpenedFile((function(e){var r=e.user,i=e.file,o=n.getFollowedUser();o&&o.id===r.id&&i&&t.openFile(i)}))}),[n,t]);var r=(0,l.useState)(null),i=r[0],o=r[1];(0,l.useEffect)((function(){return n.onFollowedUserChanged(o)}),[n,t]),(0,l.useEffect)((function(){var e=function(){n.unfollowUser()};if(i){var t=setTimeout((function(){document.addEventListener("click",e)}),0);return function(){clearTimeout(t),document.removeEventListener("click",e)}}}),[i])}(),(0,dp.Z)(),Zp(),(0,$o.z)(),function(){var e=(0,Wo.Z)().isTutorial,n=(0,ci.$x)(),t=(0,ir.Q)("flagLayoutNavigator");(0,l.useEffect)((function(){t&&e&&n()}),[n,e,t])}(),ip({onOpenFile:function(e){u.openFile(e.path),u.updateDeeplink(e)},onOutput:function(){}}),function(){var e=(0,sp.JM)().data,n=null===e||void 0===e?void 0:e.currentUser,t=(0,c.b9)(ir.H);(0,l.useEffect)((function(){t({flagGhostrunner:Boolean(null===n||void 0===n?void 0:n.flagGhostrunner),flagLayoutNavigator:Boolean(null===n||void 0===n?void 0:n.flagLayoutNavigator)})}),[t,n])}();var d=["html","html_beta"].includes(t.language);(0,Zd.Z)({initialLayoutState:t.layoutState||null}),(0,l.useEffect)((function(){return xi.YA("replId",t.id),up.c_.setTag("replId",t.id),function(){xi.YA("replId",void 0),up.c_.setTag("replId",void 0)}}),[t.id]),function(e){var n=e.repl,t=e.currentUser,r=(0,Q.Z)().container,i=(0,s.useRouter)(),o=(0,Ta.b)({repl:n,currentUser:t});(0,l.useEffect)((function(){var e;return gd||(gd=!0,e=i.query.initialConnectionMetadata),r.connect({customConnectionMetadata:e,context:o}),function(){r.close()}}),[o,r]),(0,l.useEffect)((function(){return function(){r.destroy()}}),[r])}({repl:t,currentUser:r}),xd(),(0,l.useEffect)((function(){var e,n="Repl"===(null===(e=t.origin)||void 0===e?void 0:e.__typename)?t.origin.id:null;return(0,md.Fy)({id:t.id,slug:t.slug,originId:n,roles:r.roles&&r.roles.map((function(e){return e.name}))}),function(){(0,md.dv)()}}),[t,r.roles]);var p=(0,c.b9)($n._E),f=(0,Hr.T)();(0,l.useEffect)((function(){p(!f)}),[f,p]);var h=a.isLayoutStacked,v=(0,c.b9)(zo.h$);(0,l.useEffect)((function(){return v(h)}),[v,h]);var m=(0,c.b9)(zo.gM);return(0,l.useEffect)((function(){return m(d)}),[m,d]),Ip(),null}var Sp=t(25602),Rp=t(89390),Ep=function(){var e=(0,r.Z)((function(e,n){var t,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return(0,Sp.u9)()?[4,(0,Sp.mv)(e)]:[2,!1];case 1:return t=o.sent(),r=t.path,i=t.line,a=t.col,r?(n.openFile(r,{line:i,col:a}),[2,!0]):[2,!1]}}))}));return function(n,t){return e.apply(this,arguments)}}();function Tp(){var e=(0,Q.Z)(),n=e.fs,t=e.session,i=e.dotReplit,a=(0,ke.Z)(),s=(0,l.useRef)(!1),u=(0,c.Dv)($n.QP),d=(0,nr.Z)(u),p=(0,l.useState)(!1),f=p[0],h=p[1],v=(0,c.Dv)(cr.Mn);(0,l.useEffect)((function(){if(f)if(u){var e=(0,Sp.YM)({path:u}),n=window.location.hash;n===u||n.startsWith(e+":")||(s.current=!0,window.location.hash=e)}else history.pushState("",document.title,window.location.pathname+window.location.search)}),[f,u]),(0,l.useEffect)((function(){function e(){return(e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return v?d.current?(h(!0),[2]):[4,Ep(n,t)]:[2];case 1:return e=r.sent(),h(!0),e||d.current||"saved"===v?[2]:((0,Rp.P)(n,t,i,a),[2])}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,t,i,a,d,v]),(0,l.useEffect)((function(){if(v){var e=function(){var e=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return s.current?(s.current=!1,[2]):[4,Ep(n,t)];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}}),[v,n,t])}function Dp(){return Tp(),null}var Up=t(4368);function _p(){var e=(0,R.Z)(["\n  query ExtensionStore {\n    extensionList {\n      id\n      url\n      name\n      description\n      user {\n        id\n        username\n        displayName\n      }\n    }\n  }\n"]);return _p=function(){return e},e}var Gp=(0,E.Ps)(_p());function Bp(){var e=(0,lo.c)("flag-iframe-extensions"),n=e.enabled,t=e.loading,i=(0,c.b9)(ar.g2),s=l.useCallback((function(e){i({pane:{data:e,type:"extension"},makeActive:!0,placement:"rightOf"})}),[i]);return Ur({match:Mr.pl,commands:function(e){return e.active||""!==e.search?[{match:Mr.pl,data:{type:"action",label:"URL",icon:(0,a.tZ)(gn.Z,{}),description:"Add an extension by URL",run:function(){var e=prompt("insert extension url");e&&s({url:e,name:"Extension"})}}},{match:Mr.pl,data:{type:"context",label:"Store",icon:(0,a.tZ)(Up.Z,{}),description:"Browse the extension store"},commands:function(){var e=(0,r.Z)((function(e){var n,t,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return e.active?[4,null===mr.l||void 0===mr.l?void 0:mr.l.query({query:Gp})]:[2,[]];case 1:return!(n=i.sent())||n.error?[2,[]]:(t=n.data.extensionList)?[2,t.map((function(e){return{match:Mr.pl,data:{type:"action",label:e.name,icon:(0,a.tZ)(Up.Z,{}),description:null!==(r=e.description)&&void 0!==r?r:"",run:function(){e.url&&s({url:e.url,name:e.name})}}}}))]:[2,[]]}}))}));return function(n){return e.apply(this,arguments)}}()}]:[]},data:{type:"context",label:"Extensions",icon:(0,a.tZ)(Up.Z,{}),description:"Manage extensions"}},{enabled:!t&&n}),null}var Mp=(0,c.cn)((function(e){var n=e(Jn.J1);if(!n)return null;var t=e((0,Kn.z)(n)).rectAtom,r=e(t),i=e(Kn.M0);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}}));function Ap(){var e=(0,c.Dv)(Mp),n=(0,Xs.Z)();return e&&n?(0,a.tZ)("div",{css:[w.l0.position.absolute,w.l0.width(e.width),w.l0.height(e.height),w.l0.borderRadius(4),{boxShadow:"0 0 0 3px ".concat(n.color),pointerEvents:"none",zIndex:3,transform:"translate(".concat(Math.round(e.x),"px, ").concat(Math.round(e.y),"px)")}]}):null}var Xp=(0,l.memo)(Ap),Np=t(2548),Op=40,Lp=(0,c.cn)({}),zp=(0,c.cn)(null,(function(e,n,t){n(Lp,(function(e){return(0,Wn.ZP)(e,(function(e){e[t.id]=t.preferredHeight}))}))}));var jp=(0,c.cn)([]),Wp=(0,c.cn)(0),Fp=(0,c.cn)(null,(function(e,n,t){var r=t.height,i=t.sections,o=r-i.length*Op;n(Wp,r),n(jp,i.map((function(e){var n=e.id,t=e.percent;return{id:n,height:0===t?0:o*(t/100)}})))}));function Hp(e){return(0,c.Dv)(function(e){return(0,tr.Z)((function(){return(0,c.cn)((function(n){var t;return Op+((null===(t=n(jp).find((function(n){return n.id===e})))||void 0===t?void 0:t.height)||0)}))}),[e])}(e))}var Vp=(0,c.cn)((function(e){return e(jp).map((function(e){return e.id}))}));var $p=(0,c.cn)(null,(function(e,n,t){n(Wp,t),n(jp,(function(e){return(0,Wn.ZP)(e,(function(e){var n=e.reduce((function(e,n){return e+n.height}),0),r=t-e.length*Op,i=e.filter((function(e){return e.height>0})),o=(r-n)/i.length,a=!0,l=!1,c=void 0;try{for(var s,u=i[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;d.height=Math.max(0,d.height+o)}}catch(p){l=!0,c=p}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}))}))}));var Kp=t(12629),qp=t(44044),Yp={root:v.l0.px(4),rowWrap:(0,Gt.iv)([v.l0.borderRadius(8)]),row:(0,Gt.iv)([qp.gU.nofill,v.l0.rowWithGap(8),v.l0.p(4),v.l0.minHeight(32),v.l0.align.center,{transition:"initial"}]),icon:{"& > svg":v.l0.color.foregroundDimmer},textWrap:[v.l0.colWithGap(2),v.l0.flex.growAndShrink(1)],heading:[v.l0.flex.growAndShrink(1),{opacity:.5}],text:[v.l0.flex.growAndShrink(1)]};function Qp(e){var n=e.pane,t=hr(),r=(0,So.Se)(),o=r.Icon({pane:n}),l=r.getTitle(n),c=(0,Rc.N)(),s=(0,i.Z)((0,ms.c)({type:Sc.z.Pane,item:function(){return{type:Sc.z.NewPane,pane:n}},end:function(){c()}}),2)[1];return(0,a.tZ)(v.G7,{css:Yp.root,children:(0,a.BX)(v.Tg,{innerRef:s,onClick:function(){t({pane:n})},css:Yp.row,children:[(0,a.tZ)(v.G7,{css:Yp.icon,children:o}),(0,a.tZ)(v.xv,{css:Yp.text,color:"dimmest",children:l})]})})}function Jp(e){var n=e.title,t=e.icon,r=e.active,i=e.highlightRanges,o=e.heading,l=e.dragRef;return(0,a.tZ)(v.G7,{css:Yp.root,children:(0,a.tZ)(v.Tg,{elevated:r,css:Yp.rowWrap,children:(0,a.BX)(v.Tg,{innerRef:l,css:Yp.row,children:[(0,a.tZ)(v.G7,{css:Yp.icon,children:t}),(0,a.BX)(v.G7,{css:Yp.textWrap,children:[o?(0,a.tZ)(v.xv,{variant:"small",color:"dimmest",css:Yp.heading,children:o}):null,(0,a.tZ)(v.xv,{css:Yp.text,color:(null===i||void 0===i?void 0:i.length)?"dimmest":"default",children:(null===i||void 0===i?void 0:i.length)?(0,a.tZ)(wn.xK,{style:{color:v.TV.foregroundDimmest},matchStyle:{fontWeight:v.TV.fontWeightBold,color:v.TV.foregroundDefault},source:n,matches:i.map((function(e){return{column:e.from,length:e.to-e.from}}))}):n})]})]})})})}function ef(e){var n=e.pane,t=e.active,r=e.highlightRanges,o=e.title,l=e.heading,c=(0,So.Se)().Icon({pane:n}),s=(0,i.Z)((0,ms.c)({type:Sc.z.Pane,item:function(){return{type:Sc.z.NewPane,pane:n}}}),2)[1];return(0,a.tZ)(Jp,{active:t,icon:c,title:o,heading:l,dragRef:s,highlightRanges:r})}function nf(){var e=Yo(),n=e.length,t=(0,c.b9)(zp);return(0,l.useEffect)((function(){var e=Math.min(300,40*n);t({id:"dock",preferredHeight:e})}),[n,t]),(0,a.tZ)(a.HY,{children:e.map((function(e){return(0,a.tZ)(Qp,{pane:e},e.type)}))})}function tf(){var e=(0,Q.Z)().presence,n=Ce(),t=(0,J.Z)({presence:e}),l=(0,i.Z)(function(e){var n=(0,S.Z)({},oe,e);return re.t(ae,n)}(),1),c=l[0];return(0,tr.Z)((function(){return{data:{type:"context",label:"Multiplayers",icon:(0,a.tZ)(Br.Z,{})},commands:(0,r.Z)((function(){var e,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t.length?[4,c({variables:{ids:t.map((function(e){return e.id}))}})]:[2,[]];case 1:return(e=o.sent().data)?(r=t.reduce((function(e,n){return e[n.id]=n.color,e}),{}),i=e.currentUser,[2,e.usersByIds.filter((function(e){return e.id!==(null===i||void 0===i?void 0:i.id)})).map((function(e){return{match:Mr.pl,data:{type:"action",label:e.username,icon:(0,a.tZ)(v.G7,{style:{border:"2px solid",borderColor:r[e.id],borderRadius:"50%"},children:(0,a.tZ)(ue.Z,{size:16,src:e.image,alt:e.username})}),run:function(){return n({username:e.username,id:e.id})}}}}))]):[2,[]]}}))}))}}),[t,n,c])}var rf={type:"context",icon:(0,a.tZ)(ho.Z,{}),label:"",description:"Search"};var of=v.KD.div,af=v.KD.input,lf={inputContainer:(0,Gt.iv)([v.l0.position.relative,v.l0.flex.row,v.l0.align.center,v.gU.filled,{":focus-within":{borderColor:v.TV.outlineDefault}}]),input:(0,Gt.iv)([v.l0.flex.growAndShrink(1),v.l0.p(8),v.l0.color.foregroundDefault,{paddingLeft:26,fontSize:v.TV.fontSizeDefault,outline:"0 none",backgroundColor:"transparent",borderColor:"transparent"}]),menuContainer:(0,Gt.iv)([v.l0.left(0),v.l0.width("100%"),v.l0.overflowY("auto"),v.l0.py(4),v.l0.position.absolute,{top:40,height:"calc(100% - ".concat(40,"px)"),zIndex:1}]),searchIcon:(0,Gt.iv)([v.l0.position.absolute,v.l0.top(0),v.l0.left(0),v.l0.height("100%"),v.l0.center,{paddingLeft:6,pointerEvents:"none"}]),clearButton:(0,Gt.iv)([v.l0.reset.button,v.l0.p(4),v.l0.color.foregroundDimmest,v.l0.cursor.pointer,{"&:hover":v.l0.color.foregroundDefault}])};function cf(){var e=function(){var e=(0,Q.Z)().fs,n=(0,No.A)(),t=(0,Oo.T)(),r=(0,Zr.C)(),i=Jo(),o=ea(),l=tf(),s=(0,tr.Z)((function(){return(0,c.cn)((function(c){var s=c(i),u=c(o),d={data:{type:"context",label:"Tools",icon:(0,a.tZ)(Lo.Z,{})},commands:function(){return u}},p=(0,Ro.i)({openFile:r,fs:e,shouldHideFile:t,getRecentFiles:n,lazyLoad:!0});return p.match=void 0,{data:rf,commands:function(){return[s,p,d,l]}}}))}),[e,o,i,t,r,n,l]);return(0,c.Dv)(s)}(),n=(0,Zr.C)(),t=hr(),r=(0,Mt.Z)({onSelect:function(e){if(r.combobox.reset(),r.setInputValue(""),"openFile"!==e.data.type)if("openPane"!==e.data.type)"action"!==e.data.type||e.data.run();else{var i=e.data.pane;t({pane:i})}else{var o=e.data.deeplink.path;n({path:o})}},initialCommand:e,insertSectionHeaders:!0}),i=r.combobox;return(0,a.BX)(a.HY,{children:[(0,a.BX)(of,(0,se.Z)((0,S.Z)({},i.getComboboxProps()),{css:lf.inputContainer,children:[(0,a.tZ)(v.G7,{css:lf.searchIcon,children:r.isLoading?(0,a.tZ)(ve.Z,{}):(0,a.tZ)(ho.Z,{color:v.TV.foregroundDimmest})}),(0,a.tZ)(af,(0,S.Z)({css:lf.input},r.combobox.getInputProps({value:r.inputValue,ref:r.inputRef,onChange:function(e){return r.setInputValue(e.currentTarget.value)},onKeyDown:function(e){"Escape"===e.key&&e.currentTarget.blur()},placeholder:"Search"}))),r.inputValue.length>0?(0,a.tZ)(v.G7,{css:lf.clearButton,tag:"button",children:(0,a.tZ)(Z.Z,{onClick:function(){return r.setInputValue("")}})}):null]})),(0,a.tZ)(v.Tg,(0,se.Z)((0,S.Z)({style:{display:r.inputValue?void 0:"none"},css:lf.menuContainer},r.combobox.getMenuProps({refKey:"innerRef"})),{children:(0,a.tZ)(uf,{items:r.itemsWithSections||[],getItemProps:i.getItemProps,highlightedIndex:i.highlightedIndex,isLoading:r.isLoading})}))]})}function sf(e){var n=(0,l.useRef)(e.items);if(!(e.items!==n.current))return null;var t=e.items.slice(0,100);return e.isLoading||0!==t.length?(0,a.tZ)(v.G7,{css:[v.l0.pt(2)],children:t.map((function(n){if(n.isSection){var t=n.name;return(0,a.tZ)(v.xv,{variant:"small",color:"dimmest",css:[v.l0.px(12),v.l0.py(4)],children:t},t)}var r=n.item,i=n.index,o=i===e.highlightedIndex,l=function(e){var n=e.data,t=e.match.render,r=n.icon,i=n.label,o=null,a=void 0;if("openFile"===n.type){var l=n.deeplink.path;o={type:(0,dr.Dp)({path:l}),data:{path:l}}}else"openPane"===n.type&&(o=n.pane);if(o&&(0,dr.KM)(o)&&o.data.path){var c=o.data.path;i=(0,pt.UO)(c);var s=(0,pt.Il)(c);s&&(a=s)}return{pane:o,title:i,heading:a,icon:r,highlightRanges:t&&"ranges"in t?t.ranges:void 0}}(r),c=l.pane,s=l.highlightRanges,u=l.icon,d=l.title,p=l.heading;return(0,a.tZ)(of,(0,se.Z)((0,S.Z)({css:[{cursor:"pointer"}]},e.getItemProps({item:r,index:i})),{children:c?(0,a.tZ)(ef,{active:o,highlightRanges:s,pane:c,title:d,heading:p}):(0,a.tZ)(Jp,{active:o,highlightRanges:s,title:d,icon:u})}),(0,Mt.k)(r))}))}):(0,a.tZ)(v.xv,{color:"dimmest",css:[v.l0.px(8),v.l0.py(16),{textAlign:"center"}],children:"No results found"})}var uf=(0,l.memo)(sf),df=t(47979),pf=t(87583);function ff(e){var n=e.sections,t=e.id,r=n.findIndex((function(e){return e.id===t}));if(-1===r)throw new Error("");var i=n[r],o=i.height;i.height=0;var a=r===n.length-1?n.slice(0,r).reverse():n.slice(r),l=!0,c=!1,s=void 0;try{for(var u,d=a[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;if(0!==p.height)return void(p.height+=o)}}catch(h){c=!0,s=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}var f=n[r+1];f&&(f.height=o)}var hf=(0,c.cn)(null),vf=(0,c.cn)(null,(function(e,n,t){var r=e(jp);if("start"!==t.type){var i=e(hf);if(!i)throw new Error("");if("update"!==t.type)n(jp,(0,Wn.ZP)(r,(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.height>=32||ff({sections:e,id:a.id})}}catch(l){t=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}))),n(hf,null);else{var o=e(Wp);n(jp,(0,Wn.ZP)(i.sectionStart,(function(e){var n=i.heightStart+t.delta;!function(e){var n=e.sections,t=e.id,r=e.totalHeight-n.reduce((function(n,t){return n+(t.height+e.headerHeight)}),0),i=n.findIndex((function(e){return e.id===t}));if(-1===i)throw new Error("Expected sectionIndex");var o=r+n.slice(i).reduce((function(e,n){return e+n.height}),0),a=n[i],l=e.height>a.height,c=Math.min(o,e.height),s=Math.abs(a.height-c);if(l){a.height=Math.max(0,c);var u=!0,d=!1,p=void 0;try{for(var f,h=n.slice(i+1)[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=f.value;if(0!==v.height){if(!(v.height<s)){v.height-=s;break}s-=v.height,v.height=0}}}catch(I){d=!0,p=I}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}}else{var m=n[i+1];if(e.height>=0)return a.height=e.height,void(m&&(m.height+=s));var g=a.height;a.height=0;var Z=-1*e.height,y=!0,b=!1,w=void 0;try{for(var x,k=n.slice(0,i).reverse()[Symbol.iterator]();!(y=(x=k.next()).done);y=!0){var C=x.value;if(C.height>Z){g+=Z,C.height-=Z;break}g+=C.height,Z-=C.height,C.height=0}}catch(I){b=!0,w=I}finally{try{y||null==k.return||k.return()}finally{if(b)throw w}}m&&(m.height+=g)}}({headerHeight:Op,totalHeight:o,sections:e,id:i.id,height:n})})))}}else{var a=r.find((function(e){return e.id===t.id}));if(!a)throw new Error("");n(hf,{id:t.id,heightStart:a.height,sectionStart:r})}}));function mf(e){var n=e.id,t=(0,tr.Z)((function(){return(0,c.cn)((function(e){var t;return(null===(t=e(hf))||void 0===t?void 0:t.id)===n}))}),[n]);return(0,c.Dv)(t)}var gf=(0,c.cn)((function(e){return e($n._E)&&!e(hf)}));var Zf=(0,c.cn)(null,(function(e,n,t){var r=e(jp),i=e(Lp)[t],o=r.find((function(e){return e.id===t}));if(!o)throw new Error("");0===o.height?n(jp,(0,Wn.ZP)(r,(function(n){!function(e){var n=e.sections,t=e.preferredHeight,r=e.id,i=n.findIndex((function(e){return e.id===r}));if(-1===i)throw new Error("Expected sectionIndex");var o=n.reduce((function(n,t){return n+(t.height+e.headerHeight)}),0),a=e.totalHeight-o,l=n[i];if(a>0)l.height=a;else{var c=n.slice(i+1).find((function(e){return e.height>0}))||n.slice(0,i).reverse().find((function(e){return e.height>0}));if(c){if(void 0!==t&&t<c.height)return l.height=t,void(c.height-=t);l.height=c.height,c.height=0}}}({sections:n,id:t,totalHeight:e(Wp),headerHeight:Op,preferredHeight:i})}))):(n(zp,{id:o.id,preferredHeight:o.height}),n(jp,(0,Wn.ZP)(r,(function(e){return ff({sections:e,id:t})}))))}));var yf=t(72466),bf=t(86851),wf=t(9252),xf=t(38935),kf=t(25741),Cf=t(42231),If=t(9211),Pf=t(69453),Sf=t(94135),Rf=(0,l.createContext)(null);function Ef(){var e=(0,l.useContext)(Rf);if(!e)throw new Error("Expected ref");return e}var Tf=t(58360),Df={root:(0,Gt.iv)([v.l0.rowWithGap(4),v.l0.pr(2)])};function Uf(){var e=(0,ke.Z)(),n=(0,Q.Z)().session,t=Ef(),r=(0,l.useRef)(null),i=(0,l.useRef)(null),o=(0,kf.Z)(),c=(0,ar.BN)(),s=(0,Cf.Z)(),u=(0,Sf.z)(),d=[{label:xf.dk[xf.st.UploadFile],run:function(){r.current&&(r.current.click(),(0,Pf.Z)({replId:e,action:"uploaded",fileType:dt.Tv.File}))}}];return s&&d.push({label:xf.dk[xf.st.UploadFolder],run:function(){i.current&&(i.current.click(),(0,Pf.Z)({replId:e,action:"uploaded",fileType:dt.Tv.Directory}))}}),d.push({label:xf.dk[xf.st.OpenPane],run:function(){c({pane:{type:"commands",data:{autoFocus:!0}},edge:"left"})}},{label:xf.dk[xf.st.DownloadZip],run:u},{label:xf.dk[o?xf.st.HideHiddenFiles:xf.st.ShowHiddenFiles],run:function(){n.setAreHiddenFilesVisible(!o)}}),(0,a.BX)(v.G7,{children:[(0,a.tZ)(If.Q,{fileUploadInputRef:r,dirUploadInputRef:i,uploadFiles:function(e){var n;return null===(n=t.current)||void 0===n?void 0:n.uploadFiles(e)}}),(0,a.BX)(v.G7,{css:Df.root,children:[(0,a.tZ)(v.hU,{alt:"New file",tooltipPlacement:"top",onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.addFileType(dt.Tv.File)},children:(0,a.tZ)(bf.Z,{})}),(0,a.tZ)(v.hU,{alt:"New folder",tooltipPlacement:"top",onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.addFileType(dt.Tv.Directory)},children:(0,a.tZ)(wf.Z,{})}),(0,a.tZ)(Os.Z,{resetOnSelect:!0,label:"File Actions",items:d,onItemClick:function(e){e.run()}})]})]})}function _f(){var e=Ef(),n=(0,Tf.p)();return(0,a.tZ)(pf.Z,{ref:e,filetreeApi:n,showHeader:!1,showResources:!1})}function Gf(){var e=(0,Zr.C)();return(0,a.tZ)(yf.Z,{onFileOpen:function(n){return e({path:n})}})}var Bf={kaboom:{title:"Kaboom",content:(0,a.tZ)(Gf,{})},files:{title:"Files",controls:(0,a.tZ)(Uf,{}),content:(0,a.tZ)(_f,{})},dock:{title:"Dock",content:(0,a.tZ)(nf,{})}},Mf={root:(0,Gt.iv)([v.l0.rowWithGap(4),v.l0.align.center,v.l0.height(Op)]),header:(0,Gt.iv)([v.l0.pl(8),v.l0.flex.growAndShrink(1),v.l0.rowWithGap(4),v.l0.align.center,v.l0.cursor.pointer]),title:(0,Gt.iv)([v.l0.fontWeight.medium]),border:(0,Gt.iv)([v.l0.position.absolute,v.l0.top(0),v.l0.right(0),v.l0.width("calc(100% - ".concat(v.TV.space8,")")),{pointerEvents:"none",borderTop:"1px solid",borderColor:v.TV.outlineDimmest}]),content:(0,Gt.iv)([v.l0.flex.growAndShrink(1),v.l0.overflowY("auto")])},Af=(0,l.memo)((function(e){var n=function(e){var n=(0,tr.Z)((function(){return(0,c.cn)((function(n){var t;return 0===(null===(t=n(jp).find((function(n){return n.id===e})))||void 0===t?void 0:t.height)}))}),[e]);return(0,c.Dv)(n)}(e.id),t=(0,c.b9)(Zf),r=Bf[e.id],i=r.title,o=r.controls;return(0,a.BX)(v.G7,{css:Mf.root,children:[(0,a.BX)(v.G7,{onClick:function(){return t(e.id)},css:Mf.header,children:[(0,a.tZ)(Oc.Z,{rotate:n?0:90}),(0,a.tZ)(v.xv,{css:Mf.title,children:i})]}),o||null]})})),Xf=(0,l.memo)((function(e){var n=Bf[e.id].content;return(0,a.tZ)(v.G7,{css:Mf.content,children:(0,a.tZ)(v.G7,{css:v.l0.pb(8),children:n})})})),Nf={root:(0,Gt.iv)([v.l0.position.relative,v.l0.height(0),v.l0.width("100%"),{zIndex:1,"&:hover > div":{transform:"scaleY(2)"},cursor:"ns-resize"}]),hoverArea:(0,Gt.iv)([v.l0.position.relative,v.l0.height(8),v.l0.top(-4)])},Of=(0,l.memo)((function(e){var n=(0,c.b9)(vf),t=mf({id:e.id});return(0,a.tZ)(v.G7,{css:Nf.root,onPointerDown:function(t){Fl(t,{start:function(){n({type:"start",id:e.id})},move:function(e){var t=e.delta;n({type:"update",delta:t.y})},end:function(e){var t=e.delta;n({type:"end",delta:t.y})}})},children:(0,a.tZ)(v.G7,{style:t?{transform:"scaleY(100)"}:void 0,css:Nf.hoverArea})})}));function Lf(e){var n=Hp(e.id),t=(0,c.Dv)(gf),r=mf({id:e.id});return(0,a.BX)(v.G7,{style:{zIndex:r?2:void 0,height:n,position:"relative",transition:t?"height 120ms ease-out":void 0},children:[e.border?(0,a.tZ)(v.G7,{css:Mf.border}):null,(0,a.tZ)(Af,{id:e.id}),(0,a.tZ)(Xf,{id:e.id}),e.resizable?(0,a.tZ)(Of,{id:e.id}):null]})}var zf={container:(0,Gt.iv)([v.l0.position.absolute,v.l0.top(0),v.l0.left(0),v.l0.width("100%"),v.l0.height("100%"),v.l0.minWidth(lc.ih)]),header:(0,Gt.iv)([v.l0.pl(8),{zIndex:3}]),content:(0,Gt.iv)([v.l0.flex.growAndShrink(1)]),footer:(0,Gt.iv)([v.l0.pl(8),{zIndex:2}]),resources:(0,Gt.iv)([v.l0.justify.center,v.l0.position.relative,{"& > div":[{borderColor:v.TV.outlineDimmest},v.l0.px(0),v.l0.pt(16)]}]),help:(0,Gt.iv)([v.l0.pb(8),v.l0.flex.growAndShrink(1),v.l0.justify.center])};function jf(){return(0,a.BX)(v.G7,{css:zf.footer,children:[(0,a.tZ)(v.G7,{css:zf.resources,children:(0,a.tZ)(Kp.w,{})}),(0,a.tZ)(v.G7,{css:zf.help,children:(0,a.tZ)(nl.Z,{big:!0})})]})}function Wf(){var e=(0,c.b9)(Fp),n=(0,c.b9)($p),t=(0,df.oj)(),r=(0,l.useRef)(null);(0,l.useEffect)((function(){if(r.current){var n=r.current.getBoundingClientRect().height;e(t?{height:n,sections:[{id:"files",percent:0},{id:"kaboom",percent:60},{id:"dock",percent:40}]}:{height:n,sections:[{id:"files",percent:60},{id:"dock",percent:40}]})}}),[e,t]);var i=(0,vu.Z)((function(e){e&&n(e.height)}),{wait:100,type:"debounce"});return(0,ys.l)(i,r)}var Ff=(0,l.memo)((function(){var e=(0,c.Dv)(Vp),n=Wf(),t=(0,l.useRef)(null),r=e[e.length-1];return(0,a.tZ)(Rf.Provider,{value:t,children:(0,a.BX)(v.G7,{css:zf.container,children:[(0,a.tZ)(v.G7,{css:zf.header,children:(0,a.tZ)(cf,{})}),(0,a.tZ)(v.G7,{css:zf.content,innerRef:n,children:e.map((function(e,n){return(0,a.tZ)(Lf,{id:e,resizable:e!==r,border:0!==n},e)}))}),(0,a.tZ)(jf,{})]})})})),Hf=v.KD.div,Vf=(0,Gt.iv)([v.l0.borderRadius(0,8,8,0),v.l0.height("calc(100% - 16px)"),v.l0.top(8),v.l0.position.relative,v.l0.flex.growAndShrink(1),v.l0.overflowY("auto"),v.l0.overflowX("hidden")]);function $f(){var e=(0,lc.Iu)(),n=(0,So.Se)().Content;return(0,a.tZ)(v.Tg,{elevated:!0,css:Vf,children:(0,a.tZ)(n,{pane:e,options:{paneId:"",isHidden:!1,replacePane:function(){},openPane:function(){}}})})}var Kf=(0,l.memo)($f),qf=(0,Gt.iv)([v.l0.position.absolute,v.l0.center,Hc,{cursor:"ew-resize",":hover":{zIndex:Zc.gutterHovered}}]),Yf={default:(0,Gt.iv)([v.l0.height(24),v.l0.width(2),Yc]),active:(0,Gt.iv)([v.l0.height("100%"),v.l0.width(1),v.l0.backgroundColor.accentPrimaryDefault]),shared:(0,Gt.iv)([v.l0.borderRadius(4),{transitionProperty:"width, height, background-color",transitionTimingFunction:"ease-out"}])},Qf=(0,Gt.iv)([v.l0.coverContainer,{":hover":{transform:"scaleX(4)"}}]),Jf=(0,Gt.iv)([v.l0.position.absolute,v.l0.height("200vh"),v.l0.width("200vw"),{pointerEvents:"none"}]);function eh(){var e=(0,Ic.og)(),n=(0,Ic.TN)(),t=(0,Ic.EU)(),r=yc(),i=(0,Hr.T)();return(0,a.BX)(Hf,{css:[qf,{zIndex:t?r.active:r.normal}],style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")},onPointerDown:function(e){Fl(e,{start:function(){n.start()},move:function(e){var t=e.delta;n.update({deltaX:t.x})},end:function(){n.end()}})},children:[(0,a.tZ)(v.G7,{className:"grip-line",style:{transitionDuration:i?"0s":"".concat(es(e.height),"s")},css:[t?Yf.active:Yf.default,Yf.shared]}),(0,a.tZ)(v.G7,{css:t?Jf:Qf})]})}var nh=(0,Gt.iv)([v.l0.height("100%"),v.l0.position.absolute,v.l0.top(0),v.l0.left(0),v.l0.flex.row]),th=(0,Gt.iv)([nh,v.l0.flex.growAndShrink(1),v.l0.overflow("auto")]);function rh(){var e=(0,lc.Or)(),n=(0,ir.Q)("flagLayoutNavigator"),t=0===e,r=(0,Wi.Z)(Nr.y.Sidepane),i=(0,Wo.Z)().isTutorial?null:r;return(0,a.BX)(a.HY,{children:[(0,a.BX)(v.G7,{css:n?th:nh,style:{width:e,visibility:t?"hidden":void 0},innerRef:i,children:[t||n?null:(0,a.tZ)(Kf,{}),n?(0,a.tZ)(Ff,{}):null]}),(0,a.tZ)(eh,{})]})}var ih=(0,l.memo)(rh),oh=t(18751),ah=function(e){var n=e.isOpen,t=(0,s.useRouter)();return(0,a.tZ)(g.Z,{isOpen:n,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,a.BX)(y.Z,{css:[w.l0.colWithGap(32)],children:[(0,a.BX)(y.Z,{css:[w.l0.rowWithGap(16),w.l0.align.center],children:[(0,a.tZ)(oh.Z,{size:24,css:[w.l0.color.orangeStrongest]}),(0,a.tZ)(b.h,{level:2,variant:"headerDefault",children:"You can\u2019t join this Repl from Firewall Mode."})]}),(0,a.BX)(y.Z,{css:[w.l0.pr(32),w.l0.colWithGap(16)],children:[(0,a.tZ)(b.x,{multiline:!0,children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,a.BX)(y.Z,{css:[w.l0.colWithGap(16),w.l0.pl(16)],children:[(0,a.tZ)(b.x,{children:"\u2022 Exit Firewall Mode."}),(0,a.tZ)(b.x,{children:"\u2022 Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,a.BX)(y.Z,{css:[w.l0.rowWithGap(16),w.l0.justify.end],children:[(0,a.tZ)(m.ZP,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(t.asPath)}}),(0,a.tZ)(m.ZP,{text:"Leave",onClick:function(){t.push("/home","~/")}})]})]})})},lh=t(2146),ch=t(87138),sh=new Date("2022-12-01"),uh=new Date("2022-10-20");function dh(){var e,n=(0,ch.lg)(),t=n.data,r=n.loading,i=n.error,o=(0,lh.o)("workspace-history-announcement"),l=o.isLoading,c=o.isDone,s=o.setAsDone,u=new Date,d=(null===t||void 0===t||null===(e=t.currentUser)||void 0===e?void 0:e.timeCreated)?new Date(t.currentUser.timeCreated):null;return r||l||c||i||!d||sh<u||uh<d?null:(0,a.tZ)(v.u_,{centered:!0,isOpen:!c,onRequestClose:function(){return s()},children:(0,a.BX)(v.G7,{css:[v.l0.colWithGap(16)],children:[(0,a.tZ)(v.xv,{variant:"headerDefault",children:"History in the Workspace"}),(0,a.tZ)(v.xv,{multiline:!0,children:"Now, you can scrub through any file history directly in the workspace. You'll see a History button in the bottom right of any file."}),(0,a.tZ)(v.G7,{css:[v.l0.p(4),v.l0.borderRadius(8),v.l0.backgroundColor.backgroundRoot,{border:"solid 1px ".concat(v.TV.backgroundHigher)}],children:(0,a.tZ)("video",{css:v.l0.borderRadius(8),src:"/public/videos/history-demo-new.mp4",autoPlay:!0,muted:!0,playsInline:!0,loop:!0})}),(0,a.tZ)(v.G7,{css:[v.l0.display.flex,v.l0.align.end],children:(0,a.tZ)(v.zx,{text:"Continue Coding",colorway:"primary",onClick:function(){return s()}})})]})})}var ph={id:"workspace-desktop-tour",steps:[{id:Nr.y.Editor,title:"Code Editor",content:"This is where you write code. Code describes how programs work. The editor helps you write code, by coloring certain types, and giving you suggestions when you type. Click on one of the examples to see how code looks."},{id:Nr.y.Examples,title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:Nr.y.Run,title:"Running Code",content:'This button takes your code and executes, or "runs", it. You can also run your code using the '.concat(Cl.V?"Cmd":"Ctrl","+Return shortcut.")},{id:Nr.y.Output,title:"Program Output",content:"This is where the results of the code appear when you run it. Results can be console output (just text), a website, game, or graphics display, depending on the programming language and setup."},{id:Nr.y.Sidepane,title:"Sidepane & Files",content:function(){return(0,a.BX)(v.G7,{css:[{display:"inline"}],children:["The sidepane contains different features for working on your program, like the file-tree ",(0,a.tZ)(el.Z,{}),". Sometimes you can also find a tutorial"," ",(0,a.tZ)(si.Z,{})," and tools like Version Control and Debugger. There\u2019s usually a starter file in the file-tree, but you can make more files and folders as your project grows."]})}},{id:Nr.y.Share,title:"Invite & Collaborate",content:"Invite others to your Repl to collaborate and work together at the same time."}]};function fh(e){var n=e.src,t=e.autoPlay,r=void 0===t||t,i=e.loop,o=void 0===i||i,l=e.width,c=void 0===l?280:l;return(0,a.tZ)(v.G7,{css:[v.l0.p(4),v.l0.borderRadius(8),v.l0.width(c),v.l0.backgroundColor.backgroundRoot,{border:"solid 1px ".concat(v.TV.outlineDimmest)}],children:(0,a.tZ)("video",{style:{width:"100%"},css:v.l0.borderRadius(8),src:n,autoPlay:r,loop:o,playsInline:!0,muted:!0})})}var hh=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},vh={id:"workspace-desktop-new-user-tour",steps:[{id:Nr.y.Welcome,isModal:!0,title:"Welcome to the Workspace",content:function(){return(0,a.tZ)(v.G7,{css:[v.l0.maxWidth(400)],children:(0,a.BX)(v.xv,{multiline:!0,children:["The Workspace is where you create projects on Replit. These are called"," ",(0,a.tZ)("strong",{children:"Repls."}),(0,a.tZ)("br",{}),"Let's explore around!"]})})}},{id:Nr.y.Editor,title:"Code Editor",content:function(){return(0,a.BX)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:[(0,a.tZ)(fh,{src:hh("editor"),autoPlay:!0,loop:!0}),(0,a.tZ)(v.G7,{css:[v.l0.colWithGap(8),v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"This is where you write code. The editor helps you by giving you suggestions and coloring your code."})})]})}},{id:Nr.y.Examples,title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:Nr.y.Run,title:"Run Button",content:function(){return(0,a.BX)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:[(0,a.tZ)(fh,{src:hh("run-button"),autoPlay:!0,loop:!0}),(0,a.tZ)(v.G7,{css:[v.l0.colWithGap(8),v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"Tap the Run button to \u201crun\u201d your code and see its output."})})]})}},{id:Nr.y.Output,title:"Output",content:function(){return(0,a.BX)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:[(0,a.tZ)(fh,{src:hh("output"),autoPlay:!0,loop:!0}),(0,a.tZ)(v.G7,{css:[v.l0.colWithGap(8),v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"This is where your run output appears. This can be text, websites, games, and more depending on the template you\u2019re using."})})]})}},{id:Nr.y.Sidepane,title:"Sidebar",content:function(){return(0,a.BX)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:[(0,a.tZ)(fh,{src:hh("sidebar"),autoPlay:!0,loop:!0}),(0,a.BX)(v.G7,{css:[v.l0.colWithGap(8),v.l0.width("100%"),v.l0.p(8)],children:[(0,a.BX)(v.xv,{multiline:!0,children:[(0,a.tZ)("strong",{children:"Files"})," is where all of your Repl\u2019s code is."]}),(0,a.BX)(v.xv,{multiline:!0,children:[(0,a.tZ)("strong",{children:"Dock"})," is where other tools are like Packager, Debugger, and Chat."]}),(0,a.tZ)(v.xv,{multiline:!0,children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]})}},{id:Nr.y.Share,title:"Invite & Collaborate",content:function(){return(0,a.BX)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:[(0,a.tZ)(fh,{src:hh("invite-multiplayer"),autoPlay:!0,loop:!0}),(0,a.tZ)(v.G7,{css:[v.l0.colWithGap(8),v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"Invite others to your Repl to collaborate and work together at the same time."})})]})}}]},mh={id:"workspace-desktop-sidebar-tour",steps:[{id:Nr.y.SidebarAnnouncement,title:"The New Workspace",isModal:!0,content:function(){return(0,a.tZ)(v.G7,{css:[v.l0.maxWidth(400)],children:(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"If you\u2019re seeing this, that means you get to test the new Workspace redesign. It has a few key differences we want to show you!"})})})}},{id:Nr.y.Sidepane,title:"Sidebar",content:function(){return(0,a.BX)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:[(0,a.tZ)(fh,{src:(e="sidebar","/public/videos/workspace-onboarding/".concat(e,".mp4")),autoPlay:!0,loop:!0}),(0,a.BX)(v.G7,{css:[v.l0.colWithGap(8),v.l0.width("100%"),v.l0.p(8)],children:[(0,a.BX)(v.xv,{multiline:!0,children:[(0,a.tZ)("strong",{children:"Files"})," is where all of your Repl\u2019s code is."]}),(0,a.BX)(v.xv,{multiline:!0,children:[(0,a.tZ)("strong",{children:"Dock"})," is where other tools are like Packager, Debugger, and Chat."]}),(0,a.tZ)(v.xv,{multiline:!0,children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]});var e}},{id:Nr.y.SidebarButton,title:"Sidebar Button",content:function(){return(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"Tapping on this quickly opens and closes the entire sidebar."})})})}},{id:Nr.y.GlobalNavButton,title:"Navigation Menu",content:function(){return(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"Tapping on this lets you navigate to other pages on Replit."})})})}},{id:Nr.y.NotificationsButton,title:"Notifications",content:function(){return(0,a.tZ)(v.G7,{children:(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.py(8)],children:(0,a.BX)(v.xv,{multiline:!0,children:["You can access all notifications from this menu."," "]})})})}},{id:Nr.y.AvatarButton,title:"Profile Menu",content:function(){return(0,a.tZ)(v.G7,{children:(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"You can access your profile and account settings from this menu."})})})}},{id:Nr.y.Feedback,title:"That's all!",isModal:!0,content:function(){return(0,a.tZ)(v.G7,{css:[v.l0.maxWidth(400)],children:(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.py(8)],children:(0,a.BX)(v.xv,{multiline:!0,children:["This is the start of many more future updates to the Workspace to help increase the flexibility of Replit.",(0,a.tZ)("br",{}),(0,a.tZ)("br",{}),"If you'd like to leave some feedback, you can"," ",(0,a.tZ)("a",{href:"https://replit.com/@tyler/The-New-Workspace?v=1",target:"_blank",children:(0,a.tZ)("strong",{children:"leave a comment on this Repl"})}),". Happy coding!"]})})})}}]};var gh=t(86518);function Zh(e){var n=e.repl,t=e.currentUser,r=function(e){var n=e.repl,t=(0,s.useRouter)(),r=(0,Zr.C)(),i=(0,et.IY)(),o=(0,l.useState)(!1),a=o[0],c=o[1];return{services:(0,l.useState)((function(){return(0,Co.Z)({runnerMode:"html"===n.language?"html":"shellrunner",onUnrecoverableError:function(e){if(e.message.toLowerCase().includes("repl not found"))t.push("/home","~/");else{var n={replenvironmentservices:!0,layoutv2:!0};Qa.error(e),xi.Tb(e,{tags:n}),i({error:e,tags:n})}},openFile:r,onFirewallDenied:function(){return c(!0)}})}))[0],ui:(0,l.useState)((function(){return(0,So.fK)({config:Ya()})}))[0],isFirewallDenied:a}}({repl:n}),i=r.services,o=r.ui,u=r.isFirewallDenied,d=(0,c.Dv)($n.dD),p=function(){var e=(0,Tu.X)(),n=(0,nr.Z)(e),t=(0,l.useState)(!e),r=t[0],i=t[1],o=Boolean(e&&e.isLoading);return(0,l.useEffect)((function(){if(!o){var e=n.current;e&&i(Boolean(null===e||void 0===e?void 0:e.isDone))}}),[o]),r}(),f=(0,ir.Q)("flagLayoutNavigator");return(0,a.BX)(Zl,{ui:o,services:i,replId:n.id,replLanguage:n.language,children:[(0,a.tZ)(Xr.h,{}),(0,a.tZ)(Ou,{}),(0,a.tZ)(mu.Z,{}),(0,a.tZ)(ko,{repl:n,currentUser:t}),(0,a.tZ)(Gr,{}),(0,a.tZ)(Dp,{}),(0,a.tZ)(Pp,{repl:n,currentUser:t}),(0,a.tZ)(fd.ZP,{}),f?(0,a.tZ)(xh,{}):(0,a.BX)(v.G7,{css:[v.l0.flex.row,v.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(v.G7,{css:[v.l0.py(8),v.l0.pl(8),!d&&v.l0.visibility.hidden],children:(0,a.tZ)(hl,{})}),(0,a.tZ)(xh,{})]}),(0,a.tZ)(Gu,{container:i.container}),(0,a.tZ)(ud,{}),(0,a.tZ)(pd,{}),p?(0,a.tZ)(dh,{}):null,(0,a.tZ)(bh,{isMultiplayerSession:n.multiplayers.length>0}),(0,a.tZ)(yh,{image:t.image,username:t.username}),(0,a.tZ)(ah,{isOpen:u}),(0,a.tZ)(Bp,{})]})}function yh(e){var n=e.image,t=e.username,r=(0,i.Z)((0,et.yF)(),2),o=r[0],c=r[1],s=(0,cr.n7)();return(0,l.useEffect)((function(){o&&s({})}),[o,s]),o?(0,a.tZ)(u.Z,{devHide:function(){return c(null)},eventId:o,currentUserImage:n,currentUserUsername:t}):null}function bh(e){var n=function(e){var n=(0,i.Z)(l.useState(!1),2),t=n[0],a=n[1],c=(0,Tu.X)(),s=c&&!c.isDone&&!c.isLoading;return l.useEffect((function(){s||e&&"default"===wu()&&a(!0)}),[e,s]),{shouldShowModal:t,hideModal:l.useCallback((function(){Su(!0),a(!1)}),[]),confirm:l.useCallback((0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,Cu()];case 1:return e.sent(),a(!1),[2]}}))})),[])}}(e.isMultiplayerSession),t=n.shouldShowModal,c=n.hideModal,s=n.confirm;return t?(0,a.tZ)(k,{onCancel:c,onConfirm:s}):null}var wh=v.KD.div;function xh(){var e=function(){var e=(0,c.b9)(Qn.rR),n=(0,l.useRef)(null),t=(0,vu.Z)((function(t){var r=t.width,i=t.height;if(r&&i&&n.current){var o=n.current.getBoundingClientRect(),a=o.top,l=o.left;e({width:r,height:i,x:l,y:a})}}));return(0,l.useCallback)((function(e){n.current=e,t(e)}),[t])}(),n=(0,c.Dv)($n.dD),t=(0,c.Dv)(Kn.gg),r=(0,c.Dv)(Kn.g3),i=(0,c.Dv)(Kn.If);return(0,a.tZ)(wh,{ref:e,css:[v.l0.position.relative,v.l0.flex.growAndShrink(1)],children:n?(0,a.BX)(a.HY,{children:[(0,a.tZ)(ih,{}),r.map((function(e){return(0,a.tZ)(cs,{handleId:e},e)})),i.map((function(e){return(0,a.tZ)(du,{headerId:e},e)})),t.map((function(e){return(0,a.tZ)(Xc,{paneId:e},e)})),(0,a.tZ)(hu,{}),(0,a.tZ)(Xp,{})]}):null})}var kh=(0,Gt.iv)([v.l0.position.fixed,v.l0.top(0),v.l0.left(0),v.l0.height("100%"),v.l0.width("100%"),v.l0.overflow("hidden")]),Ch=function(){var e=null,n=(0,s.useRouter)().query;if(!n.replUrl)throw new Error("Expected replUrl to be set");var t=n.replUrl.toString(),r=(0,h.Cd)({variables:{url:t},ssr:Boolean(n.ssr)}),i=r.data,o=r.loading,c=r.error,u=i&&"Repl"===i.repl.__typename?i.repl:null,d=(null===i||void 0===i?void 0:i.currentUser)||void 0,m="https://replit.com".concat(t),g=function(e){if(e){if(e.description)return e.description;var n=f.Z.get(e.language).displayName;return"A ".concat(n," Repl")}}(u),Z=(0,l.useState)(!1),y=Z[0],b=Z[1];(0,l.useEffect)((function(){return b(!0)}),[]),(0,hd.Z)((null===i||void 0===i?void 0:i.repl)||null,t);var w=null;return c?e=(0,a.tZ)(v.G7,{css:[v.l0.center,v.l0.flex.growAndShrink(1)],children:(0,a.tZ)(v.xv,{children:"Something went wrong loading the Repl. Please reload the page and try again."})}):o||!y?e=(0,a.BX)(v.G7,{css:[v.l0.center,v.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(to,{}),(0,a.tZ)(Np.Z,{height:100})]}):u&&d?(e=(0,a.tZ)(Zh,{repl:u,currentUser:d},u.id),w=function(e){var n=e.isLesson,t=e.hasSeenOldWorkspaceTour,r=e.flagLayoutNavigator;return n?null:r?t?mh:vh:ph}({isLesson:Boolean(u.lesson),hasSeenOldWorkspaceTour:d.hasSeenOldWorkspaceTour,flagLayoutNavigator:d.flagLayoutNavigator})):e=(0,a.BX)(v.G7,{css:[v.l0.center,v.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(to,{}),(0,a.tZ)(Np.Z,{height:100})]}),(0,a.tZ)(Lu,{tour:w,children:(0,a.tZ)(C.Z,{children:(0,a.tZ)(p.Z,{dataCy:"workspace-page",title:"".concat((null===u||void 0===u?void 0:u.title)||""),oembedUrl:m,description:g,noHeader:!0,noFooter:!0,forceDrawer:!0,hideSidebar:!0,hideEmailVerify:!0,children:(0,a.BX)(v.Tg,{css:kh,children:[(0,a.tZ)(gh.g,{}),e]})})})})};Ch.getInitialProps=function(){var e=(0,r.Z)((function(e){var n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return n=e.req,t=e.store,[4,(0,d.Z)(n,t)];case 1:return r.sent(),[2,{}]}}))}));return function(n){return e.apply(this,arguments)}}();var Ih=Ch},7900:function(e,n,t){"use strict";t.d(n,{Pc:function(){return b},Pu:function(){return C}});var r=t(26042),i=t(7297),o=t(31230),a=t(21767);function l(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplTemplateMember on TeamMembership {\n    id\n    user {\n      id\n      image\n      username\n      firstName\n      lastName\n    }\n    nickname\n    email\n    permissions\n  }\n"]);return l=function(){return e},e}var c=(0,o.Ps)(l()),s=t(16092),u=t(37887);function d(){var e=(0,i.Z)(["\n  fragment TeamTemplateUser on User {\n    id\n    username\n    displayName\n    fullName\n    image\n    url\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplSubmission on ReplSubmission {\n    id\n    timeSubmitted\n    timeLastReviewed\n    author {\n      id\n      ...TeamTemplateUser\n    }\n    repl {\n      id\n      title\n      timeCreated\n      template {\n        id\n        dueDate\n      }\n      ...ReplLinkRepl\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment TeamTemplateSubmissionGroup on ReplSubmissionGroup {\n    submission {\n      id\n      timeSubmitted\n      timeLastReviewed\n      isGroupSubmission\n      repl {\n        id\n        url\n        nextPagePathname\n      }\n    }\n    users {\n      id\n      ...TeamTemplateUser\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplTemplate on ReplTemplate {\n    id\n    isGroupProject\n    isPublished\n    imageUrl\n    url\n    dueDate\n    repl {\n      id\n    }\n    team {\n      id\n      username\n      displayName\n      members {\n        id\n        ...TeamTemplateReplTemplateMember\n      }\n    }\n    author {\n      id\n      username\n      image\n      ...UserLinkUser\n    }\n    submissions {\n      id\n      ...TeamTemplateReplSubmission\n    }\n    submissionGroups {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment TeamTemplateRepl on Repl {\n    id\n    title\n    slug\n    description\n    ...ReplLinkRepl\n    template {\n      id\n      ...TeamTemplateReplTemplate\n    }\n  }\n  ","\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  query TeamTemplate($replUrl: String!) {\n    repl(url: $replUrl) {\n      ... on Repl {\n        id\n        ...TeamTemplateRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n        repl {\n          id\n        }\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},Z=(0,o.Ps)(d()),y=(0,o.Ps)(p(),Z,a.Y),b=(0,o.Ps)(f(),Z),w=(0,o.Ps)(h(),c,s._,y,b),x=(0,o.Ps)(v(),a.Y,w),k=(0,o.Ps)(m(),x);function C(e){var n=(0,r.Z)({},g,e);return u.a(k,n)}}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[3443,2240,6344,6351,2736,8966,4778,5395,4470,7485,7651,5499,3736,4837,1674,1889,6202,6679,2027,7685,2995,3414,4718,2350,3497,6223,3324,7737,8393,1822,8253,6272,4549,362,9774,2888,179],(function(){return n(97239),n(60937)}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=replEnvironment2-df4e5bf1bc0ff94b.js.map